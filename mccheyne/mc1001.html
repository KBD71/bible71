<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>맥체인 성경읽기 - 10월 1일</title>
    <style>
        :root {
            --font-size-base: 17px;
            --line-height-base: 1.8;
            --color-text: #212529;
            --color-card-book1: #4285F4;
            --color-card-book2: #DB4437;
            --color-card-book3: #F4B400;
            --color-card-book4: #0F9D58;
            --color-integration-card: #808080;
            --max-width: 1280px;
        }
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: var(--color-text);
            font-size: var(--font-size-base);
            line-height: var(--line-height-base);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: var(--max-width);
            padding: 20px;
            box-sizing: border-box;
        }
        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #dee2e6;
        }
        h1 {
            font-size: clamp(2.0rem, 5vw, 2.8rem);
            font-weight: 700;
            margin: 0;
        }
        h2 {
            font-size: clamp(1.5rem, 4vw, 2.0rem);
            font-weight: 600;
            margin-top: 10px;
            color: #495057;
        }
        .chapter-card, .integration-card {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            padding: 30px;
            border-left: 8px solid;
        }
        .card-book1 { border-color: var(--color-card-book1); }
        .card-book2 { border-color: var(--color-card-book2); }
        .card-book3 { border-color: var(--color-card-book3); }
        .card-book4 { border-color: var(--color-card-book4); }
        .integration-card { border-color: var(--color-integration-card); }

        h3 {
            font-size: 1.6rem;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 20px;
        }
        .card-book1 h3 { color: var(--color-card-book1); }
        .card-book2 h3 { color: var(--color-card-book2); }
        .card-book3 h3 { color: var(--color-card-book3); }
        .card-book4 h3 { color: var(--color-card-book4); }
        .integration-card h3 { color: var(--color-integration-card); }

        h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }
        p, ul, ol {
            margin-bottom: 1rem;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 0.5rem;
        }
        .button-group {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease-in-out;
            color: white;
        }
        .btn-view { background-color: #6c757d; }
        .btn-listen { background-color: #007bff; }
        .btn-view:hover { background-color: #5a6268; transform: translateY(-2px); }
        .btn-listen:hover { background-color: #0056b3; transform: translateY(-2px); }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 900px;
            border-radius: 8px;
            animation-name: slideIn;
            animation-duration: 0.4s;
        }
        @keyframes slideIn {
            from {transform: translateY(-50px); opacity: 0}
            to {transform: translateY(0); opacity: 1}
        }
        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }
        #bible-text-content {
            line-height: 2;
        }
        #modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #343a40;
        }

        /* Audio Player Styles */
        #audio-player-bar {
            position: fixed;
            bottom: -100px;
            left: 0;
            width: 100%;
            background-color: #212529;
            color: white;
            padding: 15px;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1050;
            transition: bottom 0.3s ease-in-out;
        }
        #audio-player-bar.show {
            bottom: 0;
        }
        #player-info {
            font-weight: bold;
        }
        #player-controls button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            margin-left: 15px;
        }
        #youtube-player {
            display: none;
        }

        footer {
            width: 100%;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            background-color: #e9ecef;
            color: #6c757d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>맥체인 성경읽기</h1>
            <h2>10월 1일</h2>
        </header>

        <main>
            <!-- Card 1: 1 Kings 3 -->
            <section class="chapter-card card-book1">
                <h3>열왕기상 3장: 지혜의 왕, 솔로몬</h3>
                <h4>개요</h4>
                <p>본 장은 솔로몬의 통치가 하나님의 특별한 은혜 아래 시작됨을 보여줍니다. 그는 기브온 산당에서 일천 번제를 드리는 열정을 보였고, 그날 밤 꿈에 나타나신 하나님께 부나 명예가 아닌 백성을 올바르게 재판할 수 있는 '듣는 마음', 즉 지혜를 구합니다. 하나님께서는 그의 기도를 기쁘게 여기시고 구하지 않은 부와 영광까지 약속하셨습니다. 이 지혜는 곧바로 두 창녀의 재판을 통해 온 이스라엘 앞에 증명되었고, 백성들은 왕을 두려워하며 그의 통치를 인정하게 됩니다.</p>

                <h4>신학적 해설</h4>
                <ol>
                    <li><strong>하나님 나라의 왕이 구해야 할 최우선 가치:</strong> 솔로몬이 구한 '듣는 마음'(히브리어 '레브 쇼메아')은 단순한 지능을 넘어섭니다. 이는 하나님의 말씀을 듣고 순종하여, 하나님의 뜻에 따라 선과 악을 분별하고 공의를 실현하는 통치자의 핵심 덕목입니다. 이는 신명기에서 왕에게 요구된 '평생 자기 옆에 두고 율법책을 읽어 하나님 경외하기를 배우는' 자세와 직결됩니다. 참된 리더십은 세상적 성공이 아니라, 하나님의 의를 이 땅에 구현하는 거룩한 책임감에서 비롯됨을 보여줍니다.</li>
                    <li><strong>언약의 신실하심과 하나님의 주권:</strong> 하나님께서 솔로몬에게 나타나시고 지혜를 주신 것은 그의 일천 번제에 대한 '보상'이 아닙니다. 이것은 전적으로 그의 아버지 다윗과 맺으신 언약에 기초한 하나님의 신실하심과 주권적인 은혜의 행위입니다. 하나님은 "네 아버지 다윗이 행함 같이..."(14절)라는 조건을 통해, 이 모든 복이 언약에 대한 순종 안에서 유지될 것임을 상기시키십니다. 우리의 구원과 모든 은사 역시 우리의 자격이 아닌, 그리스도 안에서 맺으신 새 언약에 근거한 하나님의 선물입니다.</li>
                    <li><strong>지혜의 실제적 적용으로서의 공의:</strong> '솔로몬의 재판'은 지혜가 추상적인 개념이 아님을 명확히 보여줍니다. 그의 판결은 단순한 심리적 트릭이 아니라, 생명을 존중하고 진실을 드러내는 하나님의 공의를 실현하는 과정입니다. 진짜 어머니의 모성애를 통해 생명을 구하고 거짓을 밝혀내는 이 판결은, 하나님의 지혜가 어떻게 혼란스러운 세상 속에서 질서를 회복하고 약자를 보호하는지를 보여주는 강력한 예시입니다.</li>
                </ol>

                <div class="button-group">
                    <button class="btn btn-view" data-book="열왕기상" data-chapter="3">본문 보기</button>
                    <button class="btn btn-listen" data-book="열왕기상" data-key="1KI_3">성경 듣기</button>
                </div>
            </section>

            <!-- Card 2: Ephesians 1 -->
            <section class="chapter-card card-book2">
                <h3>에베소서 1장: 창세 전의 선택과 구원의 찬미</h3>
                <h4>개요</h4>
                <p>사도 바울은 에베소서를 시작하며 하나님을 향한 장엄한 찬송(Doxology)을 쏟아냅니다. 이 찬송은 구원의 계획이 시간과 공간을 초월하여 영원 전부터 시작되었음을 밝힙니다. 성부 하나님은 창세 전에 그리스도 안에서 우리를 선택하셨고, 성자 예수님은 자신의 피로 우리를 구속(죄에서 건져내심)하셨으며, 성령 하나님은 약속의 보증으로 우리를 인치셨습니다. 이 삼위일체 하나님의 사역은 오직 '그의 은혜의 영광을 찬송'하게 하기 위함입니다.</p>

                <h4>신학적 해설</h4>
                <ol>
                    <li><strong>예정론과 하나님의 주권적 선택:</strong> 본문은 개혁주의 신학의 핵심인 '예정론'을 가장 명확하게 보여주는 부분입니다. 우리의 구원은 우연이나 인간의 결단에 의해 시작된 것이 아니라, "창세 전에 그리스도 안에서 우리를 택하사"(4절)라는 하나님의 절대적이고 주권적인 선택에서 비롯되었습니다. 이 선택의 기준은 우리의 어떠함(선행, 믿음 등)이 아니라 오직 "그 기쁘신 뜻대로"(5절) 행하시는 하나님의 자유로운 의지입니다. 이는 구원의 안정성과 확실성이 우리 자신에게 있지 않고, 영원하신 하나님께 있음을 선포하는 위대한 복음입니다.</li>
                    <li><strong>그리스도 중심적 구원 ('In Christ'):</strong> '그리스도 안에서', '그 안에서', '그를 통하여'라는 표현이 반복적으로 등장하며, 모든 구원의 역사가 오직 그리스도를 통해서만 이루어짐을 강조합니다. 우리는 그리스도 '안에서' 선택받았고, 그리스도 '안에서' 구속 곧 죄 사함을 받았으며, 그리스도 '안에서' 기업이 되었습니다. 그리스도와의 연합 없이는 그 어떤 영적인 복도 누릴 수 없습니다. 그리스도는 구원의 유일한 통로이자 내용 그 자체입니다.</li>
                    <li><strong>교회의 정체성과 목적:</strong> 하나님께서 이토록 장대한 구원의 계획을 이루신 궁극적인 목적은 인간의 행복을 넘어섭니다. 그 목적은 바로 "그의 은혜의 영광을 찬송하게 하려는 것"(6, 12, 14절)입니다. 즉, 구원받은 백성인 교회는 그 존재 자체로 하나님의 위대한 은혜와 지혜와 능력을 온 우주에 드러내는 전시품과 같습니다. 교회는 "만물 안에서 만물을 충만하게 하시는 이의 충만"(23절)으로서, 이 땅에서 그리스도의 통치를 대리하는 그의 몸입니다.</li>
                </ol>

                <div class="button-group">
                    <button class="btn btn-view" data-book="에베소서" data-chapter="1">본문 보기</button>
                    <button class="btn btn-listen" data-book="에베소서" data-key="EPH_1">성경 듣기</button>
                </div>
            </section>

            <!-- Card 3: Ezekiel 34 -->
            <section class="chapter-card card-book3">
                <h3>에스겔 34장: 거짓 목자와 참된 목자</h3>
                <h4>개요</h4>
                <p>하나님께서는 자기 양 떼를 돌보는 대신 자기 배만 채우고 양들을 흩어버린 이스라엘의 지도자들, 즉 '거짓 목자들'을 향해 불같은 심판을 선고하십니다. 그들의 직무유기로 인해 상처받고 길 잃은 양들을 향한 하나님의 긍휼은, 이제 하나님께서 "내가 친히 내 양의 목자가 되겠다"는 놀라운 선언으로 이어집니다. 더 나아가, 하나님은 장차 "내 종 다윗"이라 불리는 한 참된 목자를 세워 자기 백성을 영원한 평화와 풍요로 인도하실 것을 약속하십니다.</p>

                <h4>신학적 해설</h4>
                <ol>
                    <li><strong>언약 공동체 지도자의 책임:</strong> 이스라엘의 지도자들(왕, 제사장, 지도자들)은 하나님으로부터 양 떼를 위임받은 목자들이었습니다. 그들의 임무는 양들을 먹이고, 보호하며, 연약한 자를 돌보는 것이었습니다. 그러나 그들은 이 언약적 책임을 배반하고 양들을 착취의 대상으로 삼았습니다. 이는 하나님 나라의 모든 직분이 군림이 아닌 섬김을 위한 것임을 역설적으로 보여줍니다. 지도자의 실패는 공동체 전체를 위기로 몰아넣습니다.</li>
                    <li><strong>하나님의 목자 되심과 구원적 개입:</strong> 인간 지도자들의 완전한 실패와 배신 속에서 하나님의 구원 계획은 좌절되지 않습니다. 오히려 하나님은 더욱 선명하게 자신을 드러내십니다. "내가 친히... 찾고... 먹이고... 싸매어 주리라"는 선언은, 구원의 주도권이 인간에게 있지 않고 오직 자기 백성을 향한 하나님의 불같은 사랑과 신실하심에 있음을 보여줍니다. 하나님은 결코 자신의 양 떼를 포기하지 않으시는 선한 목자이십니다.</li>
                    <li><strong>메시아 예언으로서의 '한 목자':</strong> "내 종 다윗"을 세워 목자로 삼겠다는 약속(23절)은 단순히 과거 다윗 왕조의 회복을 의미하는 것을 넘어섭니다. 이는 다윗의 혈통에서 나올 궁극적인 목자, 즉 메시아이신 예수 그리스도를 가리키는 명백한 예언입니다. 예수님은 요한복음 10장에서 자신을 "나는 선한 목자라. 선한 목자는 양들을 위하여 목숨을 버리거니와"라고 선언하심으로써 이 에스겔의 예언을 온전히 성취하셨습니다.</li>
                </ol>

                <div class="button-group">
                    <button class="btn btn-view" data-book="에스겔" data-chapter="34">본문 보기</button>
                    <button class="btn btn-listen" data-book="에스겔" data-key="EZE_34">성경 듣기</button>
                </div>
            </section>

            <!-- Card 4: Psalms 83-84 -->
            <section class="chapter-card card-book4">
                <h3>시편 83-84편: 하나님의 이름을 위한 간구와 임재를 향한 갈망</h3>
                <h4>개요</h4>
                <p>오늘의 두 시편은 극적인 대조를 통해 성도의 내면과 외면의 싸움을 보여줍니다. 83편은 이스라엘을 멸절시키려는 적대 세력들의 연합 앞에서, 침묵하시는 것처럼 보이는 하나님께 "잠잠하지 마옵소서"라고 부르짖는 공동체의 절박한 탄원입니다. 반면, 84편은 그 모든 세상의 위협과 불안을 넘어, 오직 하나님의 집에 거하며 그분의 임재를 누리는 것이 최고의 복임을 노래하는 순례자의 뜨거운 사랑 고백입니다.</p>

                <h4>신학적 해설</h4>
                <ol>
                    <li><strong>하나님의 이름을 위한 기도(시 83편):</strong> 이 시편의 기도는 단순한 복수심의 발로가 아닙니다. 기도의 궁극적인 목적은 이방 민족들이 하나님의 심판을 통해 "여호와라 이름하신 주만 온 세계의 지존자로 알게 하소서"(83:18)라는 데 있습니다. 즉, 이 역사적 사건을 통해 하나님의 이름과 그분의 절대 주권이 온 세상에 선포되기를 간구하는 것입니다. 우리의 기도 또한 개인의 문제를 넘어, 모든 상황을 통해 하나님의 영광이 드러나기를 구하는 데까지 확장되어야 합니다.</li>
                    <li><strong>성전 중심의 신앙과 하나님의 임재(시 84편):</strong> 시인은 "내 영혼이 여호와의 궁정을 사모하여 쇠약함이여"라고 고백할 정도로 하나님의 집을 향한 불타는 갈망을 표현합니다. 구약 시대의 성전은 하나님께서 당신의 백성 가운데 특별히 임재하시는 가시적인 장소였습니다. 이 갈망은 궁극적으로 참된 성전이신 예수 그리스도를 통해 충족됩니다. 그리스도 안에서 우리는 시간과 장소에 구애받지 않고 언제나 은혜의 보좌 앞에 담대히 나아갈 수 있게 되었습니다.</li>
                    <li><strong>세상에서의 순례자와 '눈물 골짜기'(시 84편):</strong> 성도의 삶은 "눈물 골짜기"(바카 골짜기)를 통과하는 순례의 여정으로 묘사됩니다. 고난과 슬픔이 가득한 길입니다. 그러나 하나님께 힘을 얻는 자들은 그 눈물의 골짜기를 "많은 샘이 있는 곳"으로 변화시키는 능력을 경험합니다. 고난이 변하여 감사의 조건이 되고, 시련을 통과하며 더욱 강해져 마침내 시온에 계신 하나님 앞에 서게 될 것이라는 소망은, 이 땅을 살아가는 모든 성도에게 큰 위로와 용기를 줍니다.</li>
                </ol>

                <div class="button-group">
                    <button class="btn btn-view" data-book="시편" data-chapter="83">시편 83편 본문 보기</button>
                    <button class="btn btn-listen" data-book="시편" data-key="PSA_83">시편 83편 성경 듣기</button>
                    <button class="btn btn-view" data-book="시편" data-chapter="84">시편 84편 본문 보기</button>
                    <button class="btn btn-listen" data-book="시편" data-key="PSA_84">시편 84편 성경 듣기</button>
                </div>
            </section>
            
            <!-- Integration Card -->
            <section class="integration-card">
                <h3>통합 묵상: 하나님의 집, 하나님의 백성</h3>
                
                <h4>관통하는 주제</h4>
                <p>오늘의 본문들은 '하나님의 백성을 누가, 어떻게 다스리고 돌보는가'라는 하나의 거대한 주제를 중심으로 강력하게 연결됩니다. 열왕기상은 하나님 마음에 합한 지도자(솔로몬)가 구해야 할 것이 무엇인지를 보여주며, 그 지혜로운 통치를 통해 백성들이 안식을 누리는 하나님 나라의 이상적인 모습을 그립니다. 그러나 에스겔서는 인간 지도자들의 필연적인 실패와 타락을 고발하며, 그 실패를 뛰어넘어 하나님께서 친히 목자가 되시고 궁극적인 목자이신 메시아를 보내실 것을 약속합니다. 에베소서는 이 약속이 어떻게 성취되었는지를 보여주는 신학적 정점입니다. 구원은 인간 지도자의 역량에 달린 것이 아니라, 창세 전부터 계획하신 삼위 하나님의 주권적인 선택과 은혜의 사역임을 선포합니다. 마지막으로 시편은 이 모든 은혜를 받은 백성이 세상의 위협 속에서도(83편) 오직 하나님의 임재 안에 거하기를 갈망하는(84편) 마음의 중심을 노래합니다. 결국, 하나님의 백성은 불완전한 인간의 손이 아닌, 영원하고 신실하신 목자 하나님의 손에 의해, 그리고 그분의 아들 그리스도 안에서만 참된 안식과 보호를 누릴 수 있음을 오늘의 본문들은 웅변적으로 증언합니다.</p>

                <h4>핵심 단어 연구</h4>
                <p><strong>'택하사' (ἐκλέγομαι, 에클레고마이) - 에베소서 1:4</strong></p>
                <p>헬라어 '에클레고마이'는 단순히 여러 개 중 하나를 '고른다'는 의미를 훨씬 뛰어넘습니다. 이 단어는 '특별한 목적을 가지고, 신중하고 의도적으로 선택하여 자신의 소유로 삼는다'는 매우 깊은 의미를 내포하고 있습니다. 특히 본문에서 이 단어는 하나님의 주권적인 행위를 강조하는 중간태(middle voice)로 사용되어, 하나님께서 '자기 자신을 위하여' 우리를 선택하셨음을 분명히 합니다. 이 선택은 우리가 무엇을 할지 미리 보시고 결정하신 것이 아니라, 시간의 시작 이전에, 어떠한 조건도 없이, 오직 그분의 사랑과 기쁘신 뜻 안에서 이루어진 것입니다. 따라서 우리의 구원은 결코 흔들리거나 취소될 수 없는 영원한 반석 위에 서 있으며, 이 사실을 깨닫는 것이야말로 모든 신앙의 여정의 출발점이자 우리 존재의 이유가 '하나님의 영광을 찬송하는 것'임을 알게 하는 핵심 열쇠입니다.</p>

                <h4>본문 간 상호 참조</h4>
                <ul>
                    <li><strong>열왕기상 3:9 & 에스겔 34:15-16</strong><br>솔로몬은 백성을 "재판하여 선악을 분별하게" 해달라고 '듣는 마음'을 구합니다. 이는 목자의 핵심적인 역할입니다. 그러나 인간 왕은 불완전합니다. 에스겔에서 하나님은 "내가 친히 내 양의 목자가 되어... 잃어버린 자를 내가 찾으며 쫓기는 자를 내가 돌아오게 하며 상한 자를 내가 싸매 주며"라고 선언하심으로써, 인간 왕의 불완전함을 뛰어넘는 완전하고 개인적인 돌봄을 약속하십니다. 솔로몬의 기도는 참된 왕이신 그리스도의 통치에 대한 예표이며, 하나님은 그 기도를 통해 자신의 궁극적인 목자 되심을 계시합니다.</li>
                    <li><strong>에스겔 34:23 & 에베소서 1:22</strong><br>에스겔은 하나님께서 장차 "한 목자", 곧 "내 종 다윗"을 세워 자기 백성의 왕과 목자로 삼으실 것이라 예언합니다. 이 구약의 위대한 소망은 신약에서 예수 그리스도를 통해 성취됩니다. 에베소서는 하나님께서 그리스도를 죽은 자 가운데서 살리시고 "만물 위에 교회의 머리로 삼으셨느니라"고 선포합니다. 그리스도는 옛 다윗 왕조를 잇는 참된 왕이시며, 자기 목숨을 버려 양들을 구원하신 선한 목자이시며, 교회의 유일한 머리가 되십니다.</li>
                    <li><strong>시편 84:10 & 에베소서 1:3</strong><br>시편 기자는 "주의 궁정에서의 한 날이 다른 곳에서의 천 날보다 낫다"고 고백하며 하나님의 임재를 이 세상 최고의 가치로 노래합니다. 에베소서는 이 시인의 갈망이 어떻게 그리스도 안에서 상상 이상으로 성취되었는지를 보여줍니다. 우리는 이제 그리스도와의 연합을 통해 "하늘에 속한 모든 신령한 복"을 받은 자가 되었습니다. 지상의 특정 장소(성전)가 아니라, 하나님 보좌 우편에 앉으신 그리스도 안에서, 우리는 날마다 영적으로 하나님의 임재를 누리며 살아가는 특권을 얻었습니다.</li>
                </ul>

                <h4>묵상을 위한 질문</h4>
                <ol>
                    <li>나는 오늘 나의 삶의 문제들을 해결하기 위해 솔로몬처럼 세상의 부나 명예가 아닌, 하나님의 뜻을 분별하는 '듣는 마음(지혜)'을 최우선으로 구하고 있습니까? 나의 기도 제목은 무엇을 향하고 있습니까?</li>
                    <li>에베소서 1장이 선포하는 것처럼, 나의 구원이 나의 노력이 아닌 창세 전 하나님의 주권적 선택에 근거한다는 사실이 오늘 나에게 어떤 위로와 감격을 줍니까? 나는 그 은혜의 영광을 찬송하는 삶을 살고 있습니까, 아니면 여전히 나의 의를 드러내려 합니까?</li>
                    <li>혹시 나는 다른 사람을 돌보는 위치(가정, 교회, 직장)에서 양들을 착취했던 거짓 목자처럼 나의 유익을 먼저 구하지는 않았습니까? 상하고 잃어버린 자를 친히 찾아오시는 선한 목자 예수님의 마음을 어떻게 닮아갈 수 있을까요?</li>
                </ol>
            </section>
        </main>
    </div>

    <footer>
        <p>© 2025 KBD 맥체인 성경읽기 프로젝트</p>
    </footer>

    <!-- Modal -->
    <div id="bible-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title"></h3>
            <div class="modal-body">
                <div id="bible-text-content"></div>
            </div>
        </div>
    </div>
    
    <!-- Audio Player -->
    <div id="audio-player-bar">
        <div id="player-info"></div>
        <div id="player-controls">
            <button id="play-pause-btn">▶</button>
            <button id="close-player-btn">×</button>
        </div>
        <div id="youtube-player"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Bible data map
            const bibleData = {
                '창세기': { bookCode: 'GEN', testament: 'OT', totalChapters: 50, bookNum: '01' }, '출애굽기': { bookCode: 'EXO', testament: 'OT', totalChapters: 40, bookNum: '02' }, '레위기': { bookCode: 'LEV', testament: 'OT', totalChapters: 27, bookNum: '03' }, '민수기': { bookCode: 'NUM', testament: 'OT', totalChapters: 36, bookNum: '04' }, '신명기': { bookCode: 'DEU', testament: 'OT', totalChapters: 34, bookNum: '05' }, '여호수아': { bookCode: 'JOS', testament: 'OT', totalChapters: 24, bookNum: '06' }, '사사기': { bookCode: 'JDG', testament: 'OT', totalChapters: 21, bookNum: '07' }, '룻기': { bookCode: 'RUT', testament: 'OT', totalChapters: 4, bookNum: '08' }, '사무엘상': { bookCode: '1SA', testament: 'OT', totalChapters: 31, bookNum: '09' }, '사무엘하': { bookCode: '2SA', testament: 'OT', totalChapters: 24, bookNum: '10' }, '열왕기상': { bookCode: '1KI', testament: 'OT', totalChapters: 22, bookNum: '11' }, '열왕기하': { bookCode: '2KI', testament: 'OT', totalChapters: 25, bookNum: '12' }, '역대상': { bookCode: '1CH', testament: 'OT', totalChapters: 29, bookNum: '13' }, '역대하': { bookCode: '2CH', testament: 'OT', totalChapters: 36, bookNum: '14' }, '에스라': { bookCode: 'EZR', testament: 'OT', totalChapters: 10, bookNum: '15' }, '느헤미야': { bookCode: 'NEH', testament: 'OT', totalChapters: 13, bookNum: '16' }, '에스더': { bookCode: 'EST', testament: 'OT', totalChapters: 10, bookNum: '17' }, '욥기': { bookCode: 'JOB', testament: 'OT', totalChapters: 42, bookNum: '18' }, '시편': { bookCode: 'PSA', testament: 'OT', totalChapters: 150, bookNum: '19' }, '잠언': { bookCode: 'PRO', testament: 'OT', totalChapters: 31, bookNum: '20' }, '전도서': { bookCode: 'ECC', testament: 'OT', totalChapters: 12, bookNum: '21' }, '아가': { bookCode: 'SNG', testament: 'OT', totalChapters: 8, bookNum: '22' }, '이사야': { bookCode: 'ISA', testament: 'OT', totalChapters: 66, bookNum: '23' }, '예레미야': { bookCode: 'JER', testament: 'OT', totalChapters: 52, bookNum: '24' }, '예레미야애가': { bookCode: 'LAM', testament: 'OT', totalChapters: 5, bookNum: '25' }, '에스겔': { bookCode: 'EZE', testament: 'OT', totalChapters: 48, bookNum: '26' }, '다니엘': { bookCode: 'DAN', testament: 'OT', totalChapters: 12, bookNum: '27' }, '호세아': { bookCode: 'HOS', testament: 'OT', totalChapters: 14, bookNum: '28' }, '요엘': { bookCode: 'JOL', testament: 'OT', totalChapters: 3, bookNum: '29' }, '아모스': { bookCode: 'AMO', testament: 'OT', totalChapters: 9, bookNum: '30' }, '오바댜': { bookCode: 'OBA', testament: 'OT', totalChapters: 1, bookNum: '31' }, '요나': { bookCode: 'JON', testament: 'OT', totalChapters: 4, bookNum: '32' }, '미가': { bookCode: 'MIC', testament: 'OT', totalChapters: 7, bookNum: '33' }, '나훔': { bookCode: 'NAH', testament: 'OT', totalChapters: 3, bookNum: '34' }, '하박국': { bookCode: 'HAB', testament: 'OT', totalChapters: 3, bookNum: '35' }, '스바냐': { bookCode: 'ZEP', testament: 'OT', totalChapters: 3, bookNum: '36' }, '학개': { bookCode: 'HAG', testament: 'OT', totalChapters: 2, bookNum: '37' }, '스가랴': { bookCode: 'ZEC', testament: 'OT', totalChapters: 14, bookNum: '38' }, '말라기': { bookCode: 'MAL', testament: 'OT', totalChapters: 4, bookNum: '39' },
                '마태복음': { bookCode: 'MAT', testament: 'NT', totalChapters: 28, bookNum: '01' }, '마가복음': { bookCode: 'MRK', testament: 'NT', totalChapters: 16, bookNum: '02' }, '누가복음': { bookCode: 'LUK', testament: 'NT', totalChapters: 24, bookNum: '03' }, '요한복음': { bookCode: 'JHN', testament: 'NT', totalChapters: 21, bookNum: '04' }, '사도행전': { bookCode: 'ACT', testament: 'NT', totalChapters: 28, bookNum: '05' }, '로마서': { bookCode: 'ROM', testament: 'NT', totalChapters: 16, bookNum: '06' }, '고린도전서': { bookCode: '1CO', testament: 'NT', totalChapters: 16, bookNum: '07' }, '고린도후서': { bookCode: '2CO', testament: 'NT', totalChapters: 13, bookNum: '08' }, '갈라디아서': { bookCode: 'GAL', testament: 'NT', totalChapters: 6, bookNum: '09' }, '에베소서': { bookCode: 'EPH', testament: 'NT', totalChapters: 6, bookNum: '10' }, '빌립보서': { bookCode: 'PHP', testament: 'NT', totalChapters: 4, bookNum: '11' }, '골로새서': { bookCode: 'COL', testament: 'NT', totalChapters: 4, bookNum: '12' }, '데살로니가전서': { bookCode: '1TH', testament: 'NT', totalChapters: 5, bookNum: '13' }, '데살로니가후서': { bookCode: '2TH', testament: 'NT', totalChapters: 3, bookNum: '14' }, '디모데전서': { bookCode: '1TI', testament: 'NT', totalChapters: 6, bookNum: '15' }, '디모데후서': { bookCode: '2TI', testament: 'NT', totalChapters: 4, bookNum: '16' }, '디도서': { bookCode: 'TIT', testament: 'NT', totalChapters: 3, bookNum: '17' }, '빌레몬서': { bookCode: 'PHM', testament: 'NT', totalChapters: 1, bookNum: '18' }, '히브리서': { bookCode: 'HEB', testament: 'NT', totalChapters: 13, bookNum: '19' }, '야고보서': { bookCode: 'JAS', testament: 'NT', totalChapters: 5, bookNum: '20' }, '베드로전서': { bookCode: '1PE', testament: 'NT', totalChapters: 5, bookNum: '21' }, '베드로후서': { bookCode: '2PE', testament: 'NT', totalChapters: 3, bookNum: '22' }, '요한1서': { bookCode: '1JN', testament: 'NT', totalChapters: 5, bookNum: '23' }, '요한2서': { bookCode: '2JN', testament: 'NT', totalChapters: 1, bookNum: '24' }, '요한3서': { bookCode: '3JN', testament: 'NT', totalChapters: 1, bookNum: '25' }, '유다서': { bookCode: 'JUD', testament: 'NT', totalChapters: 1, bookNum: '26' }, '요한계시록': { bookCode: 'REV', testament: 'NT', totalChapters: 22, bookNum: '27' }
            };

            // Modal
            const modal = document.getElementById('bible-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('bible-text-content');
            
            document.querySelectorAll('.btn-view').forEach(button => {
                button.addEventListener('click', async () => {
                    const book = button.dataset.book;
                    const chapter = button.dataset.chapter;
                    const bookInfo = bibleData[book];
                    if (!bookInfo) return;

                    const chapterPadded = String(chapter).padStart(2, '0');
                    const fileName = `${bookInfo.testament}_${bookInfo.bookNum}_${bookInfo.bookCode}_${chapterPadded}.html`;
                    const filePath = `../bible_html/${bookInfo.testament}/${fileName}`;
                    
                    modalTitle.textContent = `${book} ${chapter}장`;
                    modalContent.innerHTML = '로딩 중...';
                    modal.style.display = 'block';

                    try {
                        const response = await fetch(filePath);
                        if (!response.ok) throw new Error('파일을 불러올 수 없습니다.');
                        const text = await response.text();
                        modalContent.innerHTML = text;
                    } catch (error) {
                        modalContent.innerHTML = '성경 본문을 불러오는 데 실패했습니다.';
                        console.error('Error fetching bible text:', error);
                    }
                });
            });

            window.addEventListener('click', (event) => {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            });

            // Audio Player
            const audioPlayerBar = document.getElementById('audio-player-bar');
            const playerInfo = document.getElementById('player-info');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const closePlayerBtn = document.getElementById('close-player-btn');
            let player;
            let audioLinks = {};
            let isPlaying = false;
            let currentBook = '';

            async function loadAudioLinks() {
                try {
                    const response = await fetch('../address/mcbible.txt');
                    if (!response.ok) throw new Error('오디오 주소 파일을 찾을 수 없습니다.');
                    const text = await response.text();
                    text.split('\n').forEach(line => {
                        if (line.trim()) {
                            const [key, url] = line.split(/\s+/);
                            const normalizedKey = key.replace(/^(OT_|NT_)/, '');
                            audioLinks[normalizedKey] = url;
                        }
                    });
                } catch (error) {
                    console.error("Error loading audio links:", error);
                    alert("오디오 주소 목록을 불러오는 데 실패했습니다.");
                }
            }

            function getYouTubeID(url) {
                let id = '';
                if (!url) return null;
                try {
                    const urlObj = new URL(url);
                    if (urlObj.hostname === 'youtu.be') {
                        id = urlObj.pathname.slice(1);
                    } else if (urlObj.hostname.includes('youtube.com')) {
                        id = urlObj.searchParams.get('v');
                    } else if (urlObj.hostname.includes('google.com') && urlObj.pathname.includes('search')) {
                        const youtubeUrl = new URL(urlObj.searchParams.get('q'));
                        id = youtubeUrl.searchParams.get('v');
                    }
                } catch(e) {
                    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
                    const match = url.match(regExp);
                    if (match && match[2].length == 11) {
                        id = match[2];
                    }
                }
                return id;
            }

            function onYouTubeIframeAPIReady() {
                player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    events: {
                        'onStateChange': onPlayerStateChange
                    }
                });
            }

            function onPlayerStateChange(event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    isPlaying = true;
                    playPauseBtn.textContent = '⏸';
                } else {
                    isPlaying = false;
                    playPauseBtn.textContent = '▶';
                }
            }
            
            if (window.YT && window.YT.Player) {
                onYouTubeIframeAPIReady();
            } else {
                const tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                const firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;
            }

            document.querySelectorAll('.btn-listen').forEach(button => {
                button.addEventListener('click', () => {
                    const book = button.dataset.book;
                    const key = button.dataset.key; 
                    const url = audioLinks[key];
                    
                    if (url) {
                        const videoId = getYouTubeID(url);
                        if (videoId) {
                            currentBook = `${book} ${key.split('_')[1]}장`;
                            playerInfo.textContent = currentBook;
                            if(player && typeof player.loadVideoById === 'function') {
                                player.loadVideoById(videoId);
                            }
                            audioPlayerBar.classList.add('show');
                        } else {
                            alert('유효한 YouTube 영상 ID를 찾을 수 없습니다.');
                        }
                    } else {
                        alert(`'${book} ${key.split('_')[1]}장'에 대한 오디오 링크를 찾을 수 없습니다.`);
                    }
                });
            });

            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            });

            closePlayerBtn.addEventListener('click', () => {
                player.stopVideo();
                audioPlayerBar.classList.remove('show');
            });
            
            loadAudioLinks();
        });
    </script>

</body>
</html>
