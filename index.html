<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 성경공부</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gradient-button {
            background: linear-gradient(135deg, var(--gradient-from), var(--gradient-to));
            border: none;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .gradient-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .gradient-button:hover::before {
            left: 100%;
        }
        
        .gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .icon-button {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .icon-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .modern-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .date-display {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .notification-card {
            background: linear-gradient(135deg, rgba(103, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border: 1px solid rgba(103, 126, 234, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .shine-effect {
            position: relative;
            overflow: hidden;
        }
        
        .shine-effect::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* 모바일 최적화 */
        @media (max-width: 640px) {
            .gradient-button {
                font-size: 0.9rem;
                padding: 0.875rem 1rem;
            }
            
            .floating-animation {
                animation: none;
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <!-- 배경 장식 -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-white opacity-5 rounded-full"></div>
        <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-white opacity-5 rounded-full"></div>
        <div class="absolute top-20 left-20 w-32 h-32 bg-white opacity-10 rounded-full floating-animation"></div>
        <div class="absolute bottom-20 right-20 w-24 h-24 bg-white opacity-10 rounded-full floating-animation" style="animation-delay: -3s;"></div>
    </div>

    <div class="modern-card rounded-3xl w-full max-w-sm sm:max-w-md lg:max-w-lg mx-auto relative z-10 overflow-hidden">
        <!-- 헤더 섹션 -->
        <header class="text-center p-6 sm:p-8 relative shine-effect">
            <div class="mb-6">
                <!-- 아이콘 -->
                <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl flex items-center justify-center">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                
                <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-2">오늘의 성경공부</h1>
                <p class="text-sm text-gray-500 font-light">Daily Bible Study</p>
            </div>
            
            <!-- 날짜 네비게이션 -->
            <div class="flex items-center justify-center space-x-4">
                <button id="prev-day" class="icon-button p-3 rounded-2xl">
                    <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>
                
                <div class="bg-white/50 backdrop-blur-sm rounded-2xl px-4 py-2 border border-white/30">
                    <p id="current-date" class="date-display text-lg sm:text-xl font-semibold text-center min-w-[160px] sm:min-w-[200px]"></p>
                </div>
                
                <button id="next-day" class="icon-button p-3 rounded-2xl">
                    <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </header>
        
        <!-- 메인 콘텐츠 -->
        <main class="p-6 sm:p-8 space-y-4">
            <!-- 맥체인 성경읽기 -->
            <div class="flex items-center space-x-3 link-container group" data-prefix="mc">
                <button class="gradient-button w-full text-white font-semibold py-4 px-6 rounded-2xl text-sm sm:text-base transition-all duration-300 relative overflow-hidden"
                        style="--gradient-from: #3b82f6; --gradient-to: #1d4ed8;">
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span>맥체인 성경읽기</span>
                    </div>
                </button>
                <a href="#" target="_blank" class="alternative-link icon-button p-3 rounded-2xl group-hover:scale-105 transition-all" title="대체 연결">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                    </svg>
                </a>
            </div>
            
            <!-- 매일성경 (새벽기도) -->
            <div class="flex items-center space-x-3 link-container group" data-prefix="db">
                <button class="gradient-button w-full text-white font-semibold py-4 px-6 rounded-2xl text-sm sm:text-base transition-all duration-300 relative overflow-hidden"
                        style="--gradient-from: #059669; --gradient-to: #047857;">
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <span>매일성경 (새벽기도)</span>
                    </div>
                </button>
                <a href="#" target="_blank" class="alternative-link icon-button p-3 rounded-2xl group-hover:scale-105 transition-all" title="대체 연결">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                    </svg>
                </a>
            </div>
            
            <!-- 날마다 교리 -->
            <div class="flex items-center space-x-3 link-container group" data-prefix="day">
                <button class="gradient-button w-full text-white font-semibold py-4 px-6 rounded-2xl text-sm sm:text-base transition-all duration-300 relative overflow-hidden"
                        style="--gradient-from: #7c3aed; --gradient-to: #5b21b6;">
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                        </svg>
                        <span>날마다 교리</span>
                    </div>
                </button>
                <a href="#" target="_blank" class="alternative-link icon-button p-3 rounded-2xl group-hover:scale-105 transition-all" title="대체 연결">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                    </svg>
                </a>
            </div>
            
            <!-- 주일설교말씀 -->
            <div class="flex items-center space-x-3 link-container group" data-prefix="ms">
                <button class="gradient-button w-full text-white font-semibold py-4 px-6 rounded-2xl text-sm sm:text-base transition-all duration-300 relative overflow-hidden"
                        style="--gradient-from: #dc2626; --gradient-to: #991b1b;">
                    <div class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                        </svg>
                        <span>주일설교말씀</span>
                    </div>
                </button>
                <a href="#" target="_blank" class="alternative-link icon-button p-3 rounded-2xl group-hover:scale-105 transition-all" title="대체 연결">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                    </svg>
                </a>
            </div>
        </main>
        
        <!-- 알림 카드 -->
        <footer class="p-6 sm:p-8 pt-0">
            <div class="notification-card p-4 rounded-2xl">
                <div class="flex items-start space-x-3">
                    <div class="flex-shrink-0 mt-0.5">
                        <svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm text-gray-700 leading-relaxed">
                            <span class="font-medium">연결 안내:</span> 메인 버튼이 열리지 않으면 옆의 
                            <svg class="w-4 h-4 inline-block mx-1 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                            </svg>
                            아이콘을 클릭해보세요.
                        </p>
                        <p class="text-xs text-gray-500 mt-1">
                            두 링크 모두 연결되지 않으면 이전 날짜를 확인해주세요.
                        </p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        let currentDate = new Date();
        let dateDisplay, prevDayBtn, nextDayBtn, linkContainers;

        function pad(num) {
            return num < 10 ? '0' + num : String(num);
        }

        function updatePageForDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const daysOfWeek = ["일", "월", "화", "수", "목", "금", "토"];
            const dayOfWeek = daysOfWeek[date.getDay()];
            const dayIndex = date.getDay(); // 0: 일요일, 1-5: 평일, 6: 토요일

            // DOM 요소가 존재하는지 확인
            if (!dateDisplay) {
                console.error('dateDisplay element not found');
                return;
            }

            // 날짜 표시 텍스트 설정
            if (window.innerWidth < 640) {
                dateDisplay.textContent = `${month}/${day} (${dayOfWeek})`;
            } else {
                dateDisplay.textContent = `${year}년 ${month}월 ${day}일 (${dayOfWeek})`;
            }

            // 날짜 컨테이너와 텍스트에 요일별 클래스 적용
            const dateContainer = document.getElementById('date-container');
            
            if (dateContainer && dateDisplay) {
                // 기존 클래스 제거
                dateDisplay.classList.remove('weekday', 'saturday', 'sunday');
                dateContainer.classList.remove('weekday', 'saturday', 'sunday');
                
                // 요일에 따른 클래스 추가
                if (dayIndex === 0) { // 일요일
                    dateDisplay.classList.add('sunday');
                    dateContainer.classList.add('sunday');
                } else if (dayIndex === 6) { // 토요일
                    dateDisplay.classList.add('saturday');
                    dateContainer.classList.add('saturday');
                } else { // 평일 (월-금)
                    dateDisplay.classList.add('weekday');
                    dateContainer.classList.add('weekday');
                }
            }

            // 링크 업데이트
            if (linkContainers) {
                linkContainers.forEach(container => {
                    const prefix = container.dataset.prefix;
                    const mainButton = container.querySelector('.gradient-button');
                    const altLink = container.querySelector('.alternative-link');
                    let dateSuffix;

                    if (prefix === 'ms') {
                        const lastSunday = new Date(date);
                        lastSunday.setDate(date.getDate() - date.getDay());
                        dateSuffix = `${pad(lastSunday.getMonth() + 1)}${pad(lastSunday.getDate())}`;
                    } else {
                        dateSuffix = `${pad(month)}${pad(day)}`;
                    }
                    
                    const primaryUrl = `https://kbd71.github.io/${prefix}${dateSuffix}`;
                    const secondaryUrl = `https://${prefix}${dateSuffix}.vercel.app`;
                    
                    if (mainButton) mainButton.dataset.url = primaryUrl;
                    if (altLink) altLink.href = secondaryUrl;
                });
            }
        }
        
        function handleResize() {
            updatePageForDate(currentDate);
        }
        
        function initializeApp() {
            // DOM 요소들을 가져오기
            dateDisplay = document.getElementById('current-date');
            prevDayBtn = document.getElementById('prev-day');
            nextDayBtn = document.getElementById('next-day');
            linkContainers = document.querySelectorAll('.link-container');

            // 요소들이 제대로 로드되었는지 확인
            if (!dateDisplay || !prevDayBtn || !nextDayBtn) {
                console.error('Required DOM elements not found');
                return;
            }

            // 초기 날짜 설정
            updatePageForDate(currentDate);

            // 이벤트 리스너 추가
            prevDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() - 1);
                updatePageForDate(currentDate);
            });

            nextDayBtn.addEventListener('click', () => {
                currentDate.setDate(currentDate.getDate() + 1);
                updatePageForDate(currentDate);
            });
            
            // 버튼 클릭 이벤트
            document.querySelectorAll('.gradient-button').forEach(button => {
                button.addEventListener('click', (event) => {
                    const url = event.currentTarget.dataset.url;
                    if (url) {
                        window.open(url, '_blank');
                    }
                });
            });

            // 리사이즈 이벤트
            window.addEventListener('resize', handleResize);
        }
        
        // DOM이 완전히 로드된 후 초기화
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
