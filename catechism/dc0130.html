<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 1월 30일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        .keep-all {
            word-break: keep-all;
            overflow-wrap: break-word;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="w-full max-w-3xl mb-10 text-center space-y-2">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-900 tracking-tight">1월 30일</h1>
        <p class="text-xl text-blue-600 font-bold">선택 작정의 이유와 목적</p>
    </header>

    <!-- Audio Player Section -->
    <div id="audio-player-container" class="w-full max-w-3xl mb-10 bg-white rounded-2xl shadow-sm border border-slate-200 p-6 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md">
        <div id="player-status" class="text-sm text-slate-500 mb-4 h-5 font-medium"></div>
        <button id="play-button" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-white bg-blue-600 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 active:scale-95" disabled aria-label="교리 오디오 재생 로딩 중">
            <span id="btn-text">로딩 중...</span>
            <svg id="icon-play" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <svg id="icon-pause" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>
        <div id="youtube-player" class="hidden"></div>
    </div>

    <!-- Main Content -->
    <main class="w-full max-w-3xl space-y-8">

        <!-- Catechism Section -->
        <section class="space-y-6">
            <!-- Westminster Confession of Faith -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex items-center">
                    <span class="bg-green-100 text-green-700 text-xs font-bold px-2.5 py-1 rounded-full mr-3">신앙고백서</span>
                    <h2 class="text-lg font-bold text-slate-800">제3장 5항</h2>
                </div>
                <div class="p-6 sm:p-8 space-y-4">
                    <div class="space-y-2">
                        <p class="text-slate-700 leading-relaxed keep-all pl-4 border-l-4 border-green-500 bg-green-50/50 py-2 pr-2 rounded-r-lg">
                            하나님께서, 인류 가운데 생명을 얻도록 예정된 사람들을 선택하시되, 세상의 기초가 놓이기 전에, 자신의 영원하며 변치 않는 목적 및 자신의 의지의 비밀한 경륜과 선한 기쁨을 따라서, 단지 값없이 주시는 은혜와 사랑만으로 영원한 영광에 이르도록 그리스도 안에서 선택하셨다. 이는 믿음이나 선행과 이것들 안에서의 견인, 또는 피조물 안에 있는 다른 어떤 것을 조건이나 원인으로 미리 보시어 그렇게 행하신 것이 아니다. 그리고 이 모든 것이 자신의 영광스러운 은혜를 찬송하는 것이 되도록 하셨다.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scripture Section -->
        <section class="bg-slate-800 rounded-2xl shadow-md overflow-hidden text-slate-100">
            <div class="px-6 py-4 border-b border-slate-700 flex items-center">
                <svg class="w-5 h-5 text-yellow-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h2 class="text-lg font-bold">말씀 요절</h2>
            </div>
            <div class="p-6 sm:p-8 space-y-6 text-sm sm:text-base leading-relaxed opacity-90">
                <div>
                    <strong class="text-yellow-400 block mb-1">에베소서 1:4, 9</strong>
                    <p class="keep-all">"곧 창세 전에 그리스도 안에서 우리를 택하사 우리로 사랑 안에서 그 앞에 거룩하고 흠이 없게 하시려고 ... 그 뜻의 비밀을 우리에게 알리신 것이요 그의 기뻐하심을 따라 그리스도 안에서 때가 찬 경륜을 위하여 예정하신 것이니"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">로마서 9:11, 13</strong>
                    <p class="keep-all">"...택하심을 따라 되는 하나님의 뜻이 행위로 말미암지 않고 오직 부르시는 이로 말미암아 서게 하려 하사 ... 기록된 바 내가 야곱은 사랑하고 에서는 미워하였다 하심과 같으니라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">에베소서 1:6, 12</strong>
                    <p class="keep-all">"이는 그가 사랑하시는 자 안에서 우리에게 거저 주시는 바 그의 은혜의 영광을 찬송하게 하려는 것이라 ... 이는 우리가 그리스도 안에서 전부터 바라던 그의 영광의 찬송이 되게 하려 하심이라"</p>
                </div>
            </div>
        </section>

        <!-- Exposition Section -->
        <section class="space-y-6">
            
            <!-- Card 1: Reason for Election -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">선택의 유일한 이유: 하나님의 기쁘신 사랑</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님께서 영원한 생명을 주시기 위해 사람을 선택하신 시점은 <strong class="text-blue-600">세상의 기초가 놓이기 전</strong>, 즉 시간과 공간이 창조되기도 전입니다.
                    </p>
                    <p>
                        우리가 선택받은 이유는 우리 안에 있는 사랑받을 만한 자격이나 조건 때문이 아닙니다. 사람의 판단으로는 이해할 수 없으나, 하나님께서는 단지 그분이 기뻐하시는 자를 선택하여 사랑하셨습니다.
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <p class="text-blue-900 text-sm sm:text-base font-medium italic">
                            "내가 너를 사랑하여 선택했다. 내가 너를 기뻐하여 선택하였거늘 다른 이유가 있어야 하는가?"
                        </p>
                    </div>
                    <p>
                        선택의 유일한 근거는 오직 선택받은 자를 향한 하나님 그분 자신의 값없는 사랑과 은혜뿐입니다.
                    </p>
                </div>
            </div>

            <!-- Card 2: Unconditional Election -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">조건 없는 은혜: 행위가 아닌 하나님의 주권</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님의 선택은 인간의 미래를 미리 보시고 행하신 것이 아닙니다. 하나님께서는 사람의 <strong class="text-red-500">믿음, 선행, 혹은 인내(견인)</strong>를 미리 보시고 그것을 조건으로 삼아 선택하신 것이 결코 아닙니다.
                    </p>
                    <ul class="list-none space-y-3 mt-4 bg-slate-50 p-5 rounded-xl">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-red-400 rounded-full mr-3"></span>
                            <span>만약 조건이 있다면, 구원은 은혜가 아닌 인간의 공로가 되며 사람은 자기 행위를 자랑하게 될 것입니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-red-400 rounded-full mr-3"></span>
                            <span>모든 인류는 죄를 범하여 하나님의 영광에 이르지 못하므로(롬 3:23), 인간 스스로의 조건으로는 아무도 선택받을 수 없습니다.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Card 3: In Christ, For His Glory -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">그리스도 안에서, 은혜의 영광을 찬송하게 하심</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        죄인이 생명을 얻는 길은 오직 <strong class="text-purple-600">"그리스도 안에서"</strong> 값없이 주시는 은혜뿐입니다. 하나님께서는 우리를 그리스도 안에서 선택하셨습니다.
                    </p>
                    <p>
                        이 모든 선택 작정의 궁극적인 목적은, 구원받은 자들이 자신의 공로가 아닌 <strong class="text-slate-900">하나님의 영광스러운 은혜를 찬송하게 하는 것</strong>입니다. 우리는 자격 없는 자에게 베풀어진 이 놀라운 사랑에 감격하며 오직 하나님께만 영광을 돌리게 됩니다.
                    </p>
                </div>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-16 mb-8 text-center text-slate-400 text-sm">
        <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Global variables required for the specific audio implementation
        window.player = null;
        const DCADDR_URL = '../address/dcaddr.txt';
        const TODAY_DATE = '0130'; // Updated Date

        // Load YouTube IFrame API asynchronously
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // Required API callback
        window.onYouTubeIframeAPIReady = function() {
            initAudioPlayer();
        };

        async function initAudioPlayer() {
            const playButton = document.getElementById('play-button');
            const btnText = document.getElementById('btn-text');
            const iconPlay = document.getElementById('icon-play');
            const iconPause = document.getElementById('icon-pause');
            const statusDiv = document.getElementById('player-status');

            try {
                // Fetch the address file
                const response = await fetch(DCADDR_URL);
                if (!response.ok) throw new Error('주소 파일을 불러오는데 실패했습니다.');
                
                const text = await response.text();
                const lines = text.split('\n');
                let videoId = null;

                // Find the line starting with today's date
                for (const line of lines) {
                    if (line.trim().startsWith(TODAY_DATE)) {
                        const match = line.match(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/);
                        if (match && match[1]) {
                            videoId = match[1];
                            break;
                        }
                    }
                }

                if (!videoId) {
                    playButton.disabled = true;
                    btnText.innerText = "재생 불가";
                    statusDiv.innerText = "오늘의 AI요약 음성은 아직 업로드 전입니다.";
                    playButton.setAttribute('aria-label', '오늘의 음성 업로드 전');
                    return;
                }

                // Initialize Global Player
                window.player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 0,
                        'disablekb': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

            } catch (error) {
                console.error('Audio initialization error:', error);
                playButton.disabled = true;
                btnText.innerText = "오류 발생";
                statusDiv.innerText = "오디오 정보를 불러올 수 없습니다.";
            }

            function onPlayerReady(event) {
                playButton.disabled = false;
                btnText.innerText = "교리 오디오 듣기";
                iconPlay.classList.remove('hidden');
                statusDiv.innerText = "";
                playButton.setAttribute('aria-label', '교리 오디오 재생');
            }

            function onPlayerStateChange(event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    btnText.innerText = "일시정지";
                    iconPlay.classList.add('hidden');
                    iconPause.classList.remove('hidden');
                    playButton.classList.replace('bg-blue-600', 'bg-slate-700');
                    playButton.classList.replace('hover:bg-blue-700', 'hover:bg-slate-800');
                    statusDiv.innerText = "재생 중...";
                    playButton.setAttribute('aria-label', '교리 오디오 일시정지');
                } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                    btnText.innerText = "교리 오디오 듣기";
                    iconPause.classList.add('hidden');
                    iconPlay.classList.remove('hidden');
                    playButton.classList.replace('bg-slate-700', 'bg-blue-600');
                    playButton.classList.replace('hover:bg-slate-800', 'hover:bg-blue-700');
                    statusDiv.innerText = event.data === YT.PlayerState.ENDED ? "재생 완료" : "일시정지됨";
                    playButton.setAttribute('aria-label', '교리 오디오 재생');
                }
            }

            playButton.addEventListener('click', function() {
                if (!window.player || typeof window.player.getPlayerState !== 'function') return;

                const state = window.player.getPlayerState();
                if (state === YT.PlayerState.PLAYING) {
                    window.player.pauseVideo();
                } else {
                    window.player.playVideo();
                }
            });
        }
    </script>
</body>
</html>
