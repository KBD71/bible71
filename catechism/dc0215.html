<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 2월 15일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        .keep-all {
            word-break: keep-all;
            overflow-wrap: break-word;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="w-full max-w-3xl mb-10 text-center space-y-2">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-900 tracking-tight">2월 15일</h1>
        <p class="text-xl text-blue-600 font-bold">‘신자의 죄’의 허용과 그 목적</p>
    </header>

    <!-- Audio Player Section -->
    <div id="audio-player-container" class="w-full max-w-3xl mb-10 bg-white rounded-2xl shadow-sm border border-slate-200 p-6 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md">
        <div id="player-status" class="text-sm text-slate-500 mb-4 h-5 font-medium"></div>
        <button id="play-button" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-white bg-blue-600 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 active:scale-95" disabled aria-label="교리 오디오 재생 로딩 중">
            <span id="btn-text">로딩 중...</span>
            <svg id="icon-play" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <svg id="icon-pause" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>
        <div id="youtube-player" class="hidden"></div>
    </div>

    <!-- Main Content -->
    <main class="w-full max-w-3xl space-y-8">

        <!-- Confession Section -->
        <section class="space-y-6">
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex items-center">
                    <span class="bg-green-100 text-green-700 text-xs font-bold px-2.5 py-1 rounded-full mr-3">신앙고백서 5.5</span>
                    <h2 class="text-lg font-bold text-slate-800">신자의 일시적 타락과 섭리</h2>
                </div>
                <div class="p-6 sm:p-8 space-y-4">
                    <p class="text-slate-700 leading-relaxed keep-all pl-4 border-l-4 border-green-500 bg-green-50/50 py-2 pr-2 rounded-r-lg">
                        지극히 지혜로우시고, 의로우시고, 은혜로우신 하나님께서 종종 그분 자신의 자녀들을 다양한 유혹과 마음의 부패에 얼마 동안 그대로 두신다. 이것은 이전에 범한 죄 때문에 이들을 징계하시기 위한 것이거나, 이들의 마음의 부패와 거짓됨의 숨은 힘을 이들이 발견하도록 하시어 이들이 겸비해지도록 하기 위함이다. 그리고 이들이 도움을 바라며 하나님을 더욱 가까이, 그리고 끊임없이 의지하도록 이들을 자라게 하시기 위함이다. 또한 이들로 하여금 죄를 범할 수 있는 모든 장래의 기회에 대비하여 더욱 경계하고, 여러 가지 다른 의롭고도 거룩한 목적에 대하여 더욱 유의하도록 하시기 위함이다.
                    </p>
                </div>
            </div>
        </section>

        <!-- Scripture Section -->
        <section class="bg-slate-800 rounded-2xl shadow-md overflow-hidden text-slate-100">
            <div class="px-6 py-4 border-b border-slate-700 flex items-center">
                <svg class="w-5 h-5 text-yellow-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h2 class="text-lg font-bold">말씀 요절</h2>
            </div>
            <div class="p-6 sm:p-8 space-y-6 text-sm sm:text-base leading-relaxed opacity-90">
                <div>
                    <strong class="text-yellow-400 block mb-1">역대하 32:25-26, 31</strong>
                    <p class="keep-all">"...하나님이 히스기야를 떠나시고 그의 심중에 있는 것을 다 알고자 하사 시험하셨더라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">고린도후서 12:7, 9</strong>
                    <p class="keep-all">"...너무 자만하지 않게 하시려고 내 육체에 가시 ... 주셨으니 ... 나에게 이르시기를 내 은혜가 네게 족하도다 이는 내 능력이 약한 데서 온전하여짐이라 하신지라"</p>
                </div>
            </div>
        </section>

        <!-- Exposition Section -->
        <section class="space-y-6">
            
            <!-- Card 1: Discipline and Awareness -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">죄의 허용 목적 (1): 징계와 자각</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님께서는 때때로 자녀들이 유혹에 빠지는 것을 허용하십니다. 이는 방관이 아니라 <strong class="text-blue-600">지혜로운 섭리</strong>의 결과입니다.
                    </p>
                    <ul class="list-disc list-inside space-y-3 bg-slate-50 p-5 rounded-xl">
                        <li><strong class="text-slate-900">징계의 도구:</strong> 이전의 죄를 깨닫게 하시고, 죄로 인한 형벌이 얼마나 큰 수치와 고통을 주는지 배우게 하십니다.</li>
                        <li><strong class="text-slate-900">히스기야의 예:</strong> 마음이 교만해졌을 때 하나님은 그를 잠시 떠나 심중을 시험하셨고, 이를 통해 그는 교만을 뉘우치는 영적 교훈을 얻었습니다.</li>
                    </ul>
                </div>
            </div>

            <!-- Card 2: Self-Discovery and Humility -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">죄의 허용 목적 (2): 부패 발견과 겸비</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        신자는 범죄를 통해 자신의 내면에 숨겨진 <strong class="text-red-600">부패한 마음과 위선의 힘</strong>을 직시하게 됩니다. 겉으로는 경건해 보일지라도 환경이 주어지면 언제든 무너질 수 있는 존재임을 깨닫는 것입니다.
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <p class="text-blue-900 text-sm sm:text-base font-medium">
                            "다윗은 간음과 살인이라는 극악한 죄를 통해 자신의 근본이 얼마나 악한지를 자각했고, 이를 통해 시편 51편과 같은 처절한 회개와 겸비를 남겼습니다."
                        </p>
                    </div>
                </div>
            </div>

            <!-- Card 3: Dependence on God -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">죄의 허용 목적 (3): 절대적 의존성 강화</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        자신의 무능력을 처절하게 깨달은 신자는 더 이상 자신을 신뢰하지 않고 <strong class="text-blue-600">하나님을 더욱 가까이 의지</strong>하게 됩니다.
                    </p>
                    <ul class="list-none space-y-3 mt-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-indigo-500 rounded-full mr-3"></span>
                            <span>베드로는 장담했으나 주님을 부인했습니다. 이 수치를 통해 그는 오직 주의 은혜만을 붙드는 자가 되었습니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-indigo-500 rounded-full mr-3"></span>
                            <span>우리는 <strong class="text-slate-900">"선 줄로 생각하는 자는 넘어질까 조심하라"</strong>는 말씀을 가슴 깊이 새기게 됩니다.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Card 4: Future Vigilance -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">죄의 허용 목적 (4): 장래에 대한 경계</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        과거의 실수는 장래에 다가올 더 큰 유혹에 대비하는 <strong class="text-green-600">영적 예방주사</strong>가 됩니다. 신자는 죄의 기회에 더욱 유의하며, 거룩한 삶의 목적에 집중하게 됩니다.
                    </p>
                    <p>
                        바울은 자신의 약함과 가시를 통해 그리스도의 능력이 머무는 법을 배웠습니다. <strong class="text-slate-900">"고난당한 것이 내게 유익이라"</strong>는 고백은 작정을 통해 신자를 연단하시는 하나님의 선하신 성품을 찬송하는 최고의 고백입니다.
                    </p>
                </div>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-16 mb-8 text-center text-slate-400 text-sm">
        <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
    </footer>

    <!-- Scripts -->
    <script>
        window.player = null;
        const DCADDR_URL = '../address/dcaddr.txt';
        const TODAY_DATE = '0215';

        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        window.onYouTubeIframeAPIReady = function() {
            initAudioPlayer();
        };

        async function initAudioPlayer() {
            const playButton = document.getElementById('play-button');
            const btnText = document.getElementById('btn-text');
            const iconPlay = document.getElementById('icon-play');
            const iconPause = document.getElementById('icon-pause');
            const statusDiv = document.getElementById('player-status');

            try {
                const response = await fetch(DCADDR_URL);
                if (!response.ok) throw new Error();
                
                const text = await response.text();
                const lines = text.split('\n');
                let videoId = null;

                for (const line of lines) {
                    if (line.trim().startsWith(TODAY_DATE)) {
                        const match = line.match(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/);
                        if (match && match[1]) {
                            videoId = match[1];
                            break;
                        }
                    }
                }

                if (!videoId) {
                    playButton.disabled = true;
                    btnText.innerText = "재생 불가";
                    statusDiv.innerText = "오늘의 AI요약 음성은 아직 업로드 전입니다.";
                    playButton.setAttribute('aria-label', '오늘의 음성 업로드 전');
                    return;
                }

                window.player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 0,
                        'disablekb': 1
                    },
                    events: {
                        'onReady': (event) => {
                            playButton.disabled = false;
                            btnText.innerText = "교리 오디오 듣기";
                            iconPlay.classList.remove('hidden');
                            statusDiv.innerText = "";
                            playButton.setAttribute('aria-label', '교리 오디오 재생');
                        },
                        'onStateChange': (event) => {
                            if (event.data === YT.PlayerState.PLAYING) {
                                btnText.innerText = "일시정지";
                                iconPlay.classList.add('hidden');
                                iconPause.classList.remove('hidden');
                                playButton.classList.replace('bg-blue-600', 'bg-slate-700');
                                statusDiv.innerText = "재생 중...";
                            } else {
                                btnText.innerText = "교리 오디오 듣기";
                                iconPause.classList.add('hidden');
                                iconPlay.classList.remove('hidden');
                                playButton.classList.replace('bg-slate-700', 'bg-blue-600');
                                statusDiv.innerText = event.data === YT.PlayerState.ENDED ? "재생 완료" : "일시정지됨";
                            }
                        }
                    }
                });

            } catch (error) {
                playButton.disabled = true;
                btnText.innerText = "오류 발생";
                statusDiv.innerText = "파일 로드에 실패했습니다.";
            }

            playButton.addEventListener('click', () => {
                if (!window.player) return;
                const state = window.player.getPlayerState();
                if (state === YT.PlayerState.PLAYING) {
                    window.player.pauseVideo();
                } else {
                    window.player.playVideo();
                }
            });
        }
    </script>
</body>
</html>
