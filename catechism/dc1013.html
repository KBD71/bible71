<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10월 13일 | 날마다 읽는 교리</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            word-break: keep-all;
        }
        .card-icon {
            font-size: 2rem;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 lg:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-2xl font-bold text-gray-600">10월 13일</h1>
            <p class="text-3xl sm:text-4xl font-extrabold text-gray-900 mt-2">합법한 혼인의 요건과 개혁교회 교인의 혼인의 제한</p>
            <h2 class="text-xl font-semibold text-blue-600 mt-3">신앙고백서 24.3</h2>
        </header>

        <main class="space-y-6">

            <section id="player-container" class="bg-white p-5 rounded-xl shadow-md">
                <div id="player-ui" class="flex items-center justify-between">
                    <h3 class="text-lg font-bold text-gray-800">오늘의 교리 듣기</h3>
                    <button id="play-pause-button" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center w-28 transition-colors duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-wait" disabled aria-label="교리 오디오 로딩 중">
                        로딩 중...
                    </button>
                </div>
                <div id="error-message" class="hidden text-center text-red-600 font-semibold py-4"></div>
                <div id="player" class="hidden"></div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-start space-x-4">
                    <div class="card-icon">📜</div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">신앙고백서</h3>
                        <p class="text-base leading-relaxed">
                            분별하여 동의할 능력을 가진 모든 사람의 혼인은 합법하다." 그럼에도 주 안에서만 혼인하는 것이 그리스도인의 의무이다. 그러므로 참되며 개혁된 신앙을 고백하는 사람이라면 불신자, 천주교인, 또는 우상숭배자와 혼인해서는 안 된다. 또한 경건한 사람이라면 생활에 있어 사악하다고 잘 알려진 자나 저주받을 이단을 주장하는 자와 혼인함으로써 서로 맞지 않는 멍에를 함께 메어서는 안 된다.
                        </p>
                    </div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-start space-x-4">
                    <div class="card-icon">⚖️</div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">혼인의 합법성: 분별과 동의</h3>
                        <p class="text-base leading-relaxed">
                            신앙고백서는 혼인의 합법성은 민족, 인종, 사회적 신분 등 외적인 조건에 의해 제한되지 않는다고 가르칩니다. 합법적인 혼인을 위한 유일한 조건은 당사자들이 '분별하여 동의할 능력'을 갖추는 것입니다. 이는 강요나 약물의 영향, 혹은 정신적 미성숙이나 장애로 인해 사리 분별이 어려운 상태에서 이루어진 결혼은 합법성을 인정받기 어렵다는 의미를 담고 있습니다. 특히 신자의 혼인은 하나님 앞에서 배우자에게 신실할 것을 약속하는 언약적 행위이므로, 건강한 판단력이 반드시 요구됩니다. 이러한 능력을 바탕으로 상호 동의가 이루어졌다면 그 혼인은 합법적입니다.
                        </p>
                    </div>
                </div>
            </section>
            
            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-start space-x-4">
                    <div class="card-icon">🙏</div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">그리스도인의 의무: 주 안에서의 결혼</h3>
                        <p class="text-base leading-relaxed">
                            그리스도인은 합법적인 혼인을 넘어 '주 안에서만' 혼인할 의무가 있습니다. 이는 단순히 신앙이 없는 사람과 결혼하지 말라는 의미를 넘어서는 것입니다. '주 안에서'라는 말은 부부 모두가 주님 안에 있을 때라야만 혼인의 본질인 언약적 사랑을 올바로 이해하고 실천할 수 있음을 뜻합니다. 이를 통해 부부는 돕는 배필로서 서로를 도우며, 자녀를 낳아 거룩한 자손으로 양육하여 교회를 세워나가는 혼인의 목적을 선하게 성취할 수 있습니다.
                        </p>
                    </div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-start space-x-4">
                    <div class="card-icon">🚫</div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">결혼이 금지되는 관계</h3>
                        <p class="text-base leading-relaxed">
                            '주 안에서' 혼인할 의무에 따라, 개혁 신앙을 고백하는 성도는 불신자, 우상 숭배자, 그리고 천주교인과 혼인해서는 안 됩니다. 천주교회는 부패한 교리를 가르치고 마리아나 성인을 의지하게 함으로써 우상숭배와 신성모독의 죄를 범하게 하는 거짓 교회의 특성을 드러내기 때문입니다. 또한, 생활이 사악하다고 알려진 자나 삼위일체, 성육신 등 핵심 교리를 왜곡하는 이단과 결혼하는 것도 금지됩니다. 이러한 이들과 '멍에를 함께 메는 것'은 하나님과의 언약을 배반하는 행위가 될 수 있습니다. 그러므로 성도는 배우자를 선택할 때 단순히 '교회 다니는 사람'이라는 외적 조건을 넘어, 실제적인 신앙 고백과 삶의 열매를 신중히 살펴야 합니다.
                        </p>
                    </div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-md">
                <div class="flex items-start space-x-4">
                    <div class="card-icon">🤔</div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-2">적용 질문</h3>
                        <ol class="list-decimal list-inside space-y-4 text-base leading-relaxed">
                            <li>왜 신앙고백서는 혼인의 합법성의 조건을 “분별하여 동의할 능력" 으로만 한정하며, 민족·인종·사회적 지위와 같은 외적 조건은 혼인의 정당성에 영향을 주지 않는다고 가르칩니까? 여러분은 혹시 결혼을 생각하거나 평가할 때, 신앙이나 인격보다 외적인 조건을 지나치게 중요시한 적이 있습니까? 하나님 앞에서 합법적이고 경건한 혼인의 기준을 어떻게 다시 점검하겠습니까?</li>
                            <li>"주 안에서만 혼인한다"라는 말이 단순히 불신자와의 결혼을 피하라는 것을 넘어, 왜 두 사람이 모두 신앙 안에 있어야 한다는 의미를 포함한다고 설명합니까? 여러분의 가정이나 주변의 결혼 관계 안에서, 배우자가 함께 "주 안에서" 언약적 사랑을 이해하고 실행하도록 돕기 위해 무엇을 실천할 수 있겠습니까?</li>
                            <li>신앙고백서는 왜 참된 개혁 신앙을 고백하는 그리스도인이 불신자, 천주교인, 우상숭배자와 결혼해서는 안 된다고 강조합니까? 여러분은 배우자를 선택할 때 신앙의 고백과 종교적 배경이 가정과 신앙생활에 끼칠 영향을 진지하게 고려하고 있습니까? 혹은 이미 결혼한 경우, 서로 다른 신앙적 배경 속에서 어떻게 참된 개혁 신앙을 지켜나갈 수 있겠습니까?</li>
                            <li>신앙고백서는 왜 생활이 사악하거나 저주받을 이단을 주장하는 자와의 혼인을 "맞지 않는 멍에"라고 규정하며, 이것이 하나님과의 언약을 배반하는 것이 될 수 있다고 경고합니까? 여러분은 배우자의 외형적 신앙고백만 보지 않고 실제 삶의 열매와 신앙의 순전성을 살피고 있습니까? 오늘의 교훈을 여러분의 결혼관이나 가정생활 속에 어떻게 반영하겠습니까?</li>
                        </ol>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-10">
            <p class="text-sm text-gray-500">교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </div>

    <script>
        // Global variables for player and state
        let player;
        let isPlaying = false;
        const playPauseButton = document.getElementById('play-pause-button');
        const playerUi = document.getElementById('player-ui');
        const errorMessageDiv = document.getElementById('error-message');

        // 1. Asynchronously load the YouTube IFrame Player API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 2. This function creates an <iframe> (and YouTube player) after the API code downloads.
        function onYouTubeIframeAPIReady() {
            fetchAudioAddressAndCreatePlayer();
        }

        // 3. Fetch address, parse it, and create the player
        async function fetchAudioAddressAndCreatePlayer() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) {
                    throw new Error('오디오 주소 파일을 불러오는 데 실패했습니다.');
                }
                const text = await response.text();
                
                const date = new Date();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const today = `${month}${day}`;

                const lines = text.split('\n');
                const todayLine = lines.find(line => line.startsWith(today));

                if (!todayLine) {
                    throw new Error('오늘 날짜에 해당하는 오디오를 찾을 수 없습니다.');
                }
                
                const url = todayLine.substring(today.length).trim();
                const videoId = parseYouTubeVideoId(url);

                if (!videoId) {
                    throw new Error('유효하지 않은 YouTube 주소입니다.');
                }

                createPlayer(videoId);

            } catch (error) {
                console.error('Error:', error);
                displayError(error.message);
            }
        }

        function parseYouTubeVideoId(url) {
            if (!url) return null;
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            return (match && match[1].length === 11) ? match[1] : null;
        }

        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            playPauseButton.disabled = false;
            playPauseButton.textContent = '▶ 재생';
            playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            playPauseButton.addEventListener('click', togglePlayPause);
        }
        
        // 5. Player state change handler
        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                isPlaying = true;
                playPauseButton.textContent = '⏸️ 일시정지';
                playPauseButton.setAttribute('aria-label', '교리 오디오 일시정지');
            } else {
                isPlaying = false;
                playPauseButton.textContent = '▶ 재생';
                playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            }
        }
        
        // 6. UI interaction logic
        function togglePlayPause() {
            if (isPlaying) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        }

        function displayError(message) {
            playerUi.classList.add('hidden');
            errorMessageDiv.textContent = `오류: ${message}`;
            errorMessageDiv.classList.remove('hidden');
        }

    </script>

</body>
</html>
