<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11월 29일: 주의 만찬의 시행</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <main class="max-w-3xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
        
        <header class="text-center space-y-2">
            <div class="text-sm font-bold text-blue-600 tracking-wide uppercase">11월 29일</div>
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight">주의 만찬의 시행</h1>
            <p class="text-gray-500 text-sm sm:text-base">대요리문답 169</p>
        </header>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
            <h2 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                AI요약 듣기
            </h2>
            <div id="audio-player-container" class="aspect-video bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden">
                <div id="player-status" class="text-gray-500 text-sm">로딩 중...</div>
                <div id="youtube-player"></div>
            </div>
            <div id="error-message" class="hidden mt-4 p-4 bg-yellow-50 text-yellow-800 rounded-lg text-sm"></div>
        </section>

        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 border-blue-600">
            <div class="p-6 sm:p-8">
                <h2 class="text-xl font-bold text-gray-900 mb-4 border-b pb-2">대요리문답 169</h2>
                <div class="prose prose-blue max-w-none text-gray-700 leading-relaxed">
                    <p>
                        <span class="font-bold text-blue-700">문169.</span> 그리스도께서는 주의 만찬의 성례에서 어떻게 빵과 포도주를 주고받으라고 명령하셨습니까?<br>
                        <span class="font-bold text-blue-700">답.</span> 그리스도께서 주의 만찬의 성례를 시행함에 있어서 자신의 말씀의 사역자들에게 명령하여 성찬 제정의 말씀과 감사와 기도로 빵과 포도주를 일반적 용도와 달리 구별하고, 빵을 취하여 떼고, 빵과 포도주 모두를 수찬자들에게 나누어주도록 하셨습니다. 또한 수찬자들은, 동일한 주님의 명령을 따라 그리스도의 몸이 자신들을 위해 찢기고 주어졌으며 그분의 피가 흘려진 것을 감사히 기억하면서, 빵을 취하여 먹고, 포도주를 마시라고 하셨습니다.<sup>1)</sup>
                    </p>
                    <div class="mt-4 text-sm text-gray-500 bg-gray-50 p-3 rounded">
                        <p>1) 고전 11:23-24; 마 26:26-28; 눅 22:19-20.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-blue-50 rounded-2xl shadow-sm border border-blue-100 p-6">
            <h3 class="text-lg font-bold text-blue-900 mb-3 flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                관련 말씀
            </h3>
            <ul class="space-y-3 text-gray-700 leading-relaxed">
                <li>
                    <span class="font-semibold text-blue-800">고전 11:23-24</span> "내가 너희에게 전한 것은 주께 받은 것이니 곧 주 예수께서 잡히시던 밤에 빵을 가지사 축사하시고 떼어 이르시되 이것은 너희를 위하는 내 몸이니 이것을 행하여 나를 기념하라 하시고"
                </li>
                <li>
                    <span class="font-semibold text-blue-800">마 26:26-28</span> "그들이 먹을 때에 예수께서 빵을 가지사 축복하시고 떼어 제자들에게 주시며 이르시되 받아서 먹으라 이것은 내 몸이니라 하시고 또 잔을 가지사 감사 기도 하시고 그들에게 주시며 이르시되 너희가 다 이것을 마시라 이것은 죄 사함을 얻게 하려고 많은 사람을 위하여 흘리는 바 나의 피 곧 언약의 피니라"
                </li>
                <li>
                    <span class="font-semibold text-blue-800">눅 22:19-20</span> "또 빵을 가져 감사 기도 하시고 떼어 그들에게 주시며 이르시되 이것은 너희를 위하여 주는 내 몸이라 너희가 이를 행하여 나를 기념하라 하시고 저녁 먹은 후에 잔도 그와 같이 하여 이르시되 이 잔은 내 피로 세우는 새 언약이니 곧 너희를 위하여 붓는 것이라"
                </li>
            </ul>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 sm:p-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6 border-b pb-2">교리 해설</h3>
            <div class="prose prose-lg max-w-none text-gray-700 space-y-6">
                <p>
                    오늘 읽는 대요리문답 169항은 성찬을 집례하는 말씀 사역자들의 역할과, 성찬에 참여하는 수찬자들이 가져야 할 합당한 태도와 방식을 그리스도의 제정 명령에 따라 상세히 교훈합니다. 이 내용은 성찬의 본질을 훼손하는 로마 가톨릭의 관행을 배격하고, 성경적 원리를 확립하는 데 중요한 기준이 됩니다.
                </p>

                <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-400">
                    <h4 class="font-bold text-gray-900 mb-2">1. "자신의 말씀의 사역자들에게 명령하여" (집례의 권한)</h4>
                    <p class="mb-2">
                        성찬을 집례할 권한은 오직 <strong class="text-blue-600">합법적으로 임직받은 말씀의 사역자(목사)</strong>에게 주어집니다. 이는 그리스도께서 성례를 교회에 맡기셨고, 성례가 '보이는 말씀'으로서 말씀 선포와 불가분의 관계에 있기 때문입니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>공적 질서:</strong> 성찬은 개인적 행사가 아니므로, 교회의 공적 예배와 분리되어서는 안 되며, 주님의 명령에 따라 세워진 질서 안에서 시행되어야 합니다.</li>
                        <li><strong>그리스도의 대리:</strong> 목사는 성찬을 집례할 때 자신의 권위가 아니라 그리스도의 명령을 받들어 행하는 것입니다.</li>
                    </ul>
                </div>

                <div class="bg-blue-50 p-5 rounded-lg border-l-4 border-blue-400">
                    <h4 class="font-bold text-gray-900 mb-2">2. "성찬 제정의 말씀과 감사와 기도로... 구별하고" (성별)</h4>
                    <p class="mb-2">
                        성찬의 빵과 포도주는 본래 일반적인 음식이지만, <strong class="text-blue-600">제정의 말씀 선포와 감사 기도</strong>를 통해 거룩한 용도로 구별(consecration)됩니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>용도의 변화:</strong> 이것은 빵과 포도주의 물질 자체가 변하는 것(화체설)이 아니라, 그 용도와 목적이 거룩하게 성별됨을 의미합니다.</li>
                        <li><strong>성령의 역사:</strong> 말씀과 기도를 통해 성령 하나님께서 이 외적 요소들을 사용하시어, 신자들이 믿음으로 그리스도의 몸과 피에 참여하게 하십니다.</li>
                    </ul>
                </div>

                <div class="bg-yellow-50 p-5 rounded-lg border-l-4 border-yellow-400">
                    <h4 class="font-bold text-gray-900 mb-2">3. "빵을 취하여 떼고... 모두를 나누어주도록" (시행 방식)</h4>
                    <p class="mb-2">
                        대요리문답은 그리스도께서 행하신 성찬의 동작 하나하나에 중요한 의미를 부여합니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>빵을 뗌(Breaking):</strong> 빵을 떼는 행위는 그리스도의 몸이 십자가에서 찢기신 고난을 생생하게 보여주는 표징입니다. 또한 한 빵을 떼어 나눔으로써 성도들이 그리스도 안에서 한 몸 됨을 확인합니다.</li>
                        <li><strong>양형 배찬(Giving Both):</strong> "빵과 포도주 모두를" 나누어 주라는 명령은 매우 중요합니다. 이는 로마 가톨릭이 평신도에게 잔을 주지 않는 '일종 배영(Communion under one kind)'을 비판하고, 주님의 명령대로 모든 성도가 떡과 잔을 모두 받아야 함(양형 배찬)을 확립합니다.</li>
                    </ul>
                </div>

                <div class="bg-green-50 p-5 rounded-lg border-l-4 border-green-400">
                    <h4 class="font-bold text-gray-900 mb-2">4. "감사히 기억하면서, 먹고 마시라고" (수찬자의 참여)</h4>
                    <p class="mb-2">
                        신자들은 단지 입으로 빵과 포도주를 먹는 것에 그쳐서는 안 됩니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>믿음의 섭취:</strong> 십자가에서 찢기신 주님의 몸과 흘리신 피를 감사함으로 기억하며, <strong class="text-blue-600">믿음으로 영적인 양식을 먹고 마셔야</strong> 합니다.</li>
                        <li><strong>실제적 공급:</strong> 이를 통해 신자는 그리스도와 연합하고, 죄 사함과 생명의 은혜를 실제로 공급받아 영적으로 자라나게 됩니다.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-yellow-200 p-6">
            <h3 class="text-lg font-bold text-yellow-800 mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                적용 질문
            </h3>
            <ul class="space-y-4">
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">1. 왜 성찬을 집례할 권한이 오직 합법적으로 임직 받은 말씀의 사역자에게만 주어지는 것입니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 성찬이 개인의 경건 행위나 단순한 공동 식사가 아니라, 그리스도께서 교회에 위탁하신 공적 은혜의 수단임을 기억하며, 교회의 질서 속에서 말씀과 성례를 통해 임하시는 주님의 은혜를 신실히 사모하고 계십니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">2. 성찬에서 사용되는 빵과 포도주가 제정의 말씀과 감사와 기도로 거룩한 용도로 구별될 때, 그것은 어떤 의미를 가지게 됩니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 성찬의 외적 요소를 단순한 상징으로 여기지 않고, 성령께서 그 표징을 사용하셔서 믿음으로 그리스도의 은혜에 참여하게 하신다는 사실을 믿음으로 받아들이며, 성찬 때마다 하늘에 계신 그리스도와의 교통을 깊이 누리고 계십니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">3. 성찬에서 빵을 떼어 나누는 행위는 어떤 의미를 나타냅니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 한 떡을 나누는 이 성찬 행위가 그리스도의 찢기신 몸을 기념하고, 동시에 우리가 한 몸 됨을 확인하는 것임을 이해하고 신앙에 적용하고 계십니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">4. 신자들이 참으로 성찬에 참여할 때, 단지 외적으로만 먹고 마시는 것이 아니라면, 어떻게 먹고 마시는 것입니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 성찬에 참여할 때 그리스도의 살과 피를 믿음으로 영적으로 먹고 마심으로써, 죄 사함과 은혜의 성장을 실제로 경험하며, 받은 은혜에 감사함으로 자신을 주님께 헌신하는 삶을 살아가고 계십니까?</p>
                </li>
            </ul>
        </section>

        <footer class="text-center text-gray-500 text-xs sm:text-sm mt-8 pb-8">
            교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다
        </footer>
    </main>

    <script>
        // Constants
        const ADDRESS_FILE_URL = '../address/dcaddr.txt';
        const DATE_KEY = '1129'; // MMDD format for November 29

        // State
        window.player = null;

        // DOM Elements
        const playerContainer = document.getElementById('audio-player-container');
        const playerStatus = document.getElementById('player-status');
        const errorMessage = document.getElementById('error-message');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadVideoConfig();
        });

        async function loadVideoConfig() {
            try {
                const response = await fetch(ADDRESS_FILE_URL);
                if (!response.ok) throw new Error('주소 파일을 불러올 수 없습니다.');
                
                const text = await response.text();
                const lines = text.split('\n');
                const targetLine = lines.find(line => line.trim().startsWith(DATE_KEY));

                if (!targetLine) {
                    showError('오늘의 AI요약 음성은 아직 업로드 전입니다.');
                    return;
                }

                // Extract Video ID
                const parts = targetLine.split(/\s+/);
                if (parts.length < 2) throw new Error('비디오 주소 형식이 잘못되었습니다.');
                
                const url = parts[1];
                const videoId = extractVideoId(url);

                if (!videoId) throw new Error('유효한 비디오 ID를 찾을 수 없습니다.');

                initializePlayer(videoId);

            } catch (error) {
                console.error('Configuration Error:', error);
                showError(error.message || '오디오 설정을 불러오는 중 오류가 발생했습니다.');
            }
        }

        function extractVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function initializePlayer(videoId) {
            // Load YouTube IFrame API
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

            window.onYouTubeIframeAPIReady = function() {
                player = new YT.Player('youtube-player', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 1,
                        'modestbranding': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onError': onPlayerError
                    }
                });
            };
        }

        function onPlayerReady(event) {
            playerStatus.style.display = 'none';
            const iframe = event.target.getIframe();
            iframe.setAttribute('aria-label', '교리 오디오 재생');
        }

        function onPlayerError(event) {
            showError('오디오 재생 중 오류가 발생했습니다. (YouTube Error Code: ' + event.data + ')');
        }

        function showError(message) {
            playerContainer.style.display = 'none';
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
        }
    </script>
</body>
</html>
