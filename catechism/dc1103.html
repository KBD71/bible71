<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11월 3일: 구원을 효과 있게 하는 말씀</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <main class="max-w-3xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
        
        <header class="text-center space-y-2">
            <div class="text-sm font-bold text-blue-600 tracking-wide uppercase">11월 3일</div>
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight">구원을 효과 있게 하는 말씀</h1>
            <p class="text-gray-500 text-sm sm:text-base">소요리문답 89, 대요리문답 155</p>
        </header>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
            <h2 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2 text-red-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                AI요약 듣기
            </h2>
            <div id="audio-player-container" class="aspect-video bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden">
                <div id="player-status" class="text-gray-500 text-sm">로딩 중...</div>
                <div id="youtube-player"></div>
            </div>
            <div id="error-message" class="hidden mt-4 p-4 bg-yellow-50 text-yellow-800 rounded-lg text-sm"></div>
        </section>

        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 border-blue-600">
            <div class="p-6 sm:p-8">
                <div class="mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4 border-b pb-2">소요리문답 89</h2>
                    <div class="prose prose-blue max-w-none text-gray-700 leading-relaxed">
                        <p>
                            <span class="font-bold text-blue-700">문89.</span> 말씀이 어떻게 구원을 얻는 데 효과 있게 됩니까?<br>
                            <span class="font-bold text-blue-700">답.</span> 성령 하나님께서는 말씀을 읽는 것, 특별히 말씀의 선포를 효과 있는 수단으로 사용하셔서, 죄책을 드러내시고 죄인을 회개시키시고, 믿음을 통해 거룩함과 위로 가운데 굳게 세우셔서 구원에 이르게 하십니다.<sup>1)</sup>
                        </p>
                        <div class="mt-2 text-sm text-gray-500 bg-gray-50 p-2 rounded">
                            1) 느 8:8; 고전 14:24~25; 행 26:18; 시 19:8; 행 20:32; 롬 15:4; 딤후 3:15~17; 롬 10:13~17; 1:16.
                        </div>
                    </div>
                </div>

                <div>
                    <h2 class="text-xl font-bold text-gray-900 mb-4 border-b pb-2">대요리문답 155</h2>
                    <div class="prose prose-blue max-w-none text-gray-700 leading-relaxed">
                        <p>
                            <span class="font-bold text-blue-700">문155.</span> 말씀이 어떻게 구원을 얻는 데 효과 있게 됩니까?<br>
                            <span class="font-bold text-blue-700">답.</span> 성령 하나님께서는 말씀을 읽는 것, 특별히 말씀의 선포를 효과 있는 수단으로 사용하셔서,<sup>1)</sup> 죄인들의 마음을 밝히시고 죄책을 드러내시며 겸손하게 하시고,<sup>2)</sup> 이들을 자신에게서 끌어내 그리스도에게로 나아가도록 하시고,<sup>3)</sup> 그리스도의 형상을 본받게 하시며<sup>4)</sup> 그분의 뜻에 복종하게 하시고,<sup>5)</sup> 이들이 유혹과 부패에 빠지지 않도록 강하게 하시며,<sup>6)</sup> 은혜 안에서 자라게 하시고<sup>7)</sup> 믿음을 통해 이들의 마음을 거룩함과 위로 가운데 굳게 세우셔서 구원에 이르게 하십니다.<sup>8)</sup>
                        </p>
                        <div class="mt-2 text-sm text-gray-500 bg-gray-50 p-2 rounded">
                            1) 느 8:8; 행 26:18; 시 19:8.<br>
                            2) 고전 14:24-25; 대하 34:18-19, 26-28.<br>
                            3) 행 2:37, 41; 8:27-39.<br>
                            4) 고후 3:18.<br>
                            5) 고후 10:4-6; 롬 6:17.<br>
                            6) 마 4:4, 7, 10; 엡 6:16-17; 시 19:11; 고전 10:11.<br>
                            7) 행 20:32; 딤후 3:15-17.<br>
                            8) 롬 16:25; 살전 3:2, 10-11, 13; 롬 15:4; 10:13-17; 1:16.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-blue-50 rounded-2xl shadow-sm border border-blue-100 p-6">
            <h3 class="text-lg font-bold text-blue-900 mb-3 flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                관련 말씀
            </h3>
            <ul class="space-y-3 text-gray-700 leading-relaxed">
                <li>
                    <span class="font-semibold text-blue-800">느 8:8</span> "하나님의 율법책을 낭독하고 그 뜻을 해석하여 백성에게 그 낭독하는 것을 다 깨닫게 하니"
                </li>
                <li>
                    <span class="font-semibold text-blue-800">행 26:18</span> "그 눈을 뜨게 하여 어둠에서 빛으로, 사탄의 권세에서 하나님께로 돌아오게 하고 죄 사함과 나를 믿어 거룩하게 된 무리 가운데서 기업을 얻게 하리라 하더이다"
                </li>
                <li>
                    <span class="font-semibold text-blue-800">고후 3:18</span> "우리가 다 수건을 벗은 얼굴로 거울을 보는 것 같이 주의 영광을 보매 그와 같은 형상으로 변화하여 영광에서 영광에 이르니 곧 주의 영으로 말미암음이니라"
                </li>
                <li>
                    <span class="font-semibold text-blue-800">롬 6:17</span> "하나님께 감사하리로다 너희가 본래 죄의 종이더니 너희에게 전하여 준 바 교훈의 본을 마음으로 순종하여"
                </li>
            </ul>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 sm:p-8">
            <h3 class="text-xl font-bold text-gray-900 mb-6 border-b pb-2">교리 해설</h3>
            <div class="prose prose-lg max-w-none text-gray-700 space-y-6">
                <p>
                    은혜의 수단인 말씀, 특히 말씀의 선포가 어떻게 구원의 효과를 내는지를 설명합니다. 말씀 자체가 자동적으로 구원을 주는 것이 아니라, <strong class="text-blue-600">성령 하나님</strong>께서 말씀을 도구로 사용하실 때 그 효력이 나타납니다.
                </p>

                <div class="bg-gray-50 p-5 rounded-lg border-l-4 border-gray-400">
                    <h4 class="font-bold text-gray-900 mb-2">1. 주체: 성령 하나님의 사역</h4>
                    <p class="mb-2">
                        말씀이 선포될 때, 어떤 이는 은혜를 받고 어떤 이는 받지 못하는 이유는 말씀 자체의 기계적 능력이 아니라 성령님의 주권적 역사 때문입니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>성령의 조명:</strong> 성경이 하나님의 말씀임을 깨닫게 하시고, 그 내용을 이해하고 믿게 하시는 분은 성령님이십니다. 이를 성령의 조명(illumination)이라고 합니다.</li>
                        <li><strong>말씀과 함께(Cum Verbo):</strong> 성령님께서는 '말씀과 함께' 역사하십니다. 말씀 없는 신비주의나 성령 없는 지성주의 모두 경계해야 합니다.</li>
                    </ul>
                </div>

                <div class="bg-blue-50 p-5 rounded-lg border-l-4 border-blue-400">
                    <h4 class="font-bold text-gray-900 mb-2">2. 과정: 구원의 효력이 나타나는 단계</h4>
                    <p class="mb-2">
                        성령님께서 말씀을 통해 우리 안에서 행하시는 일은 다음과 같이 구체적입니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>죄를 깨닫게 하심:</strong> 죄인들의 마음을 밝혀 죄책을 드러내고, 하나님 앞에서 자신의 비참함을 깨닫게 하여 <strong class="text-blue-600">겸손</strong>하게 만듭니다.</li>
                        <li><strong>그리스도께로 이끄심:</strong> 자신의 의를 포기하고 오직 그리스도만이 구원의 소망임을 알게 하여 자신에게서 끌어내어 <strong class="text-blue-600">그리스도에게로</strong> 나아가게 하십니다.</li>
                        <li><strong>성화와 보존:</strong> 그리스도의 형상을 본받게 하시고, 유혹과 부패에 빠지지 않도록 강하게 하시며, 은혜 안에서 자라게 하십니다.</li>
                    </ul>
                </div>

                <div class="bg-yellow-50 p-5 rounded-lg border-l-4 border-yellow-400">
                    <h4 class="font-bold text-gray-900 mb-2">3. 목표: 구원에 이르게 하심</h4>
                    <p class="mb-2">
                        말씀 사역의 최종 목표는 영혼의 구원입니다.
                    </p>
                    <ul class="list-disc list-inside space-y-1 ml-2">
                        <li><strong>믿음의 생성과 강화:</strong> 구원은 믿음으로 말미암아 주어지며, 이 믿음은 성령님께서 말씀을 통해 일으키시는 은혜입니다. 말씀은 믿음을 창조할 뿐만 아니라 강화합니다.</li>
                        <li><strong>거룩함과 위로:</strong> 성령님은 말씀을 통해 신자의 마음을 거룩함과 위로 가운데 굳게 세워 끝까지 견디게 하십니다.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-yellow-200 p-6">
            <h3 class="text-lg font-bold text-yellow-800 mb-4 flex items-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                적용 질문
            </h3>
            <ul class="space-y-4">
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">1. 성령 하나님께서 말씀이 효과 있게 역사하시지 않는다면 왜 동일한 설교를 들어도 사람마다 전혀 다른 반응을 보이는 것입니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 말씀을 단순한 지식이나 교양으로 받아들이는 것이 아니라, 성령 하나님의 조명하심을 구하며 그분의 은혜 가운데 말씀을 깨닫고 믿음으로 반응하고 있습니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">2. 성령 하나님께서 말씀을 통해 죄인을 어떻게 겸손하게 하시며, 왜 이것이 회개와 복음으로 나아가는 출발점이 됩니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 말씀을 들을 때마다 자신을 의롭다 여기던 교만을 버리고, 죄인으로서 하나님 앞에 무릎 꿇으며 긍휼을 간구하는 겸손으로 나아가고 있습니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">3. 성령 하나님께서 죄인을 자신에게서 끌어내어 오직 그리스도께로 나아가게 하신다는 것은 어떤 의미입니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 여전히 자신이 쌓은 의나 공로를 붙드는 것이 아니라, 오직 그리스도만을 구원의 소망으로 의지하며 그분께 나아가고 있습니까?</p>
                </li>
                <li class="bg-yellow-50 p-4 rounded-lg">
                    <span class="font-bold text-yellow-900 block mb-1">4. 말씀이 성도를 유혹과 부패에서 지켜내며, 은혜 안에서 자라게 하여 거룩함과 위로 가운데 굳게 세운다는 것은 어떤 방식으로 이루어집니까?</span>
                    <p class="text-gray-700 text-sm">여러분은 말씀을 꾸준히 가까이하며, 그 말씀 안에서 죄와 싸우는 힘과 장차 누릴 영광의 소망을 얻어 실제로 거룩함과 위로 가운데 굳게 서고 있습니까?</p>
                </li>
            </ul>
        </section>

        <footer class="text-center text-gray-500 text-xs sm:text-sm mt-8 pb-8">
            교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다
        </footer>
    </main>

    <script>
        // Constants
        const ADDRESS_FILE_URL = '../address/dcaddr.txt';
        const DATE_KEY = '1103'; // MMDD format for November 3rd

        // State
        window.player = null;

        // DOM Elements
        const playerContainer = document.getElementById('audio-player-container');
        const playerStatus = document.getElementById('player-status');
        const errorMessage = document.getElementById('error-message');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadVideoConfig();
        });

        async function loadVideoConfig() {
            try {
                const response = await fetch(ADDRESS_FILE_URL);
                if (!response.ok) throw new Error('주소 파일을 불러올 수 없습니다.');
                
                const text = await response.text();
                const lines = text.split('\n');
                const targetLine = lines.find(line => line.trim().startsWith(DATE_KEY));

                if (!targetLine) {
                    showError('오늘의 AI요약 음성은 아직 업로드 전입니다.');
                    return;
                }

                // Extract Video ID
                const parts = targetLine.split(/\s+/);
                if (parts.length < 2) throw new Error('비디오 주소 형식이 잘못되었습니다.');
                
                const url = parts[1];
                const videoId = extractVideoId(url);

                if (!videoId) throw new Error('유효한 비디오 ID를 찾을 수 없습니다.');

                initializePlayer(videoId);

            } catch (error) {
                console.error('Configuration Error:', error);
                showError(error.message || '오디오 설정을 불러오는 중 오류가 발생했습니다.');
            }
        }

        function extractVideoId(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function initializePlayer(videoId) {
            // Load YouTube IFrame API
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

            window.onYouTubeIframeAPIReady = function() {
                player = new YT.Player('youtube-player', {
                    height: '100%',
                    width: '100%',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 1,
                        'modestbranding': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onError': onPlayerError
                    }
                });
            };
        }

        function onPlayerReady(event) {
            playerStatus.style.display = 'none';
            const iframe = event.target.getIframe();
            iframe.setAttribute('aria-label', '교리 오디오 재생');
        }

        function onPlayerError(event) {
            showError('오디오 재생 중 오류가 발생했습니다. (YouTube Error Code: ' + event.data + ')');
        }

        function showError(message) {
            playerContainer.style.display = 'none';
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
        }
    </script>
</body>
</html>
