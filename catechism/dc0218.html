<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 2월 18일</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 leading-relaxed">

    <div class="max-w-4xl mx-auto px-4 py-12 md:py-20">
        <!-- Header -->
        <header class="text-center mb-16">
            <p class="text-blue-600 font-bold tracking-widest uppercase mb-2">February 18</p>
            <h1 class="text-4xl md:text-5xl font-black text-slate-900 mb-6">죄의 정의</h1>
            <div class="h-1.5 w-24 bg-blue-600 mx-auto rounded-full"></div>
            
            <!-- Audio Player Controller -->
            <div id="audio-player-container" class="mt-8 flex flex-col items-center">
                <div id="yt-player-hidden" class="hidden"></div>
                <button id="audio-control-btn" disabled 
                    class="flex items-center gap-3 px-8 py-3 bg-slate-900 text-white rounded-full hover:bg-slate-800 transition-all shadow-lg disabled:opacity-50 disabled:cursor-wait"
                    aria-label="교리 오디오 로딩 중">
                    <span id="btn-icon">
                        <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </span>
                    <span id="btn-text">교리 오디오 로딩 중</span>
                </button>
                <div id="player-error-msg" class="text-red-500 mt-3 text-sm hidden"></div>
            </div>
        </header>

        <!-- Catechism Section -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
            <!-- Shorter Catechism -->
            <div class="bg-white border-l-4 border-blue-500 p-8 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                <h3 class="text-blue-600 font-bold mb-4 flex items-center gap-2">
                    <span class="px-2 py-1 bg-blue-50 text-xs rounded">원문</span>
                    소요리문답 14
                </h3>
                <p class="font-bold text-lg mb-3">문14. 죄는 무엇입니까?</p>
                <p class="text-slate-700">답: 죄는 하나님의 율법을 순종함에 있어서 부족한 것이나 어기는 것입니다.</p>
            </div>
            <!-- Larger Catechism -->
            <div class="bg-white border-l-4 border-indigo-500 p-8 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
                <h3 class="text-indigo-600 font-bold mb-4 flex items-center gap-2">
                    <span class="px-2 py-1 bg-indigo-50 text-xs rounded">원문</span>
                    대요리문답 24
                </h3>
                <p class="font-bold text-lg mb-3">문24. 죄는 무엇입니까?</p>
                <p class="text-slate-700">답: 죄는 이성적 피조물에게 규범으로 주어진 하나님의 율법을 순종함에 있어서 부족한 것이나 그 법의 하나라도 어기는 것입니다.</p>
            </div>
        </div>

        <!-- Scripture Section -->
        <div class="bg-slate-900 text-white p-8 rounded-3xl mb-12 shadow-xl">
            <h3 class="text-slate-400 font-bold mb-6 flex items-center gap-2 uppercase tracking-tighter">
                Scripture Reading
            </h3>
            <ul class="space-y-6">
                <li class="border-l border-slate-700 pl-4">
                    <span class="block text-blue-400 font-semibold mb-2 italic">요한일서 3:4</span>
                    “죄를 짓는 자마다 불법을 행하나니 죄는 불법이라”
                </li>
                <li class="border-l border-slate-700 pl-4">
                    <span class="block text-blue-400 font-semibold mb-2 italic">갈라디아서 3:10-12</span>
                    “무릇 율법 행위에 속한 자들은 저주 아래에 있나니 기록된 바 누구든지 율법 책에 기록된 대로 모든 일을 항상 행하지 아니하는 자는 저주 아래에 있는 자라 하였음이라... 율법은 믿음에서 난 것이 아니니 율법을 행하는 자는 그 가운데서 살리라 하였느니라”
                </li>
            </ul>
        </div>

        <!-- Deep Exposition -->
        <div class="space-y-8">
            <h2 class="text-2xl font-black text-slate-800 mb-8 border-b pb-2">심층 해설</h2>

            <!-- Card 1 -->
            <section class="bg-emerald-50 border border-emerald-100 p-8 rounded-3xl relative overflow-hidden group">
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-emerald-200/20 rounded-full group-hover:scale-110 transition-transform"></div>
                <h3 class="text-emerald-800 font-black text-xl mb-4 flex items-center gap-2">
                    1. 죄를 판단하는 절대적인 기준: 하나님의 율법
                </h3>
                <div class="text-emerald-900/80 space-y-4">
                    <p>죄는 사회적인 법이나 도덕적 관습 이전에 <strong class="text-emerald-700">하나님의 율법</strong>을 범하는 것입니다. 창조주이자 입법자이신 하나님께서는 이성적 피조물인 천사와 사람에게 지켜야 할 법을 제정하셨습니다.</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li>이 법은 비록 흐릿할지라도 인간의 <strong>양심</strong> 속에 새겨져 있습니다.</li>
                        <li>가장 명백하고 충분한 법의 계시는 오직 <strong>성경</strong>을 통해 주어집니다.</li>
                        <li>성경의 법은 성격상 세 가지로 나뉩니다.
                            <ul class="list-circle pl-6 mt-2 space-y-1">
                                <li><strong>시민법:</strong> 구약 이스라엘 국가에 한정된 사회법.</li>
                                <li><strong>의식법:</strong> 그리스도의 구속 사역을 예표하는 제사법(그리스도 안에서 폐기됨).</li>
                                <li><strong class="text-emerald-700">도덕법:</strong> 십계명으로 대표되며, 영원히 복종해야 할 보편적 법.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- Card 2 -->
            <section class="bg-blue-50 border border-blue-100 p-8 rounded-3xl relative overflow-hidden group">
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-blue-200/20 rounded-full group-hover:scale-110 transition-transform"></div>
                <h3 class="text-blue-800 font-black text-xl mb-4">
                    2. 순종함에 부족한 죄 (불순응)
                </h3>
                <div class="text-blue-900/80 space-y-4">
                    <p>죄의 첫 번째 정의는 하나님의 기준에 미치지 못하는 <strong class="text-blue-700">불순응</strong>입니다. 이는 단순히 나쁜 행동을 하는 것뿐만 아니라, 마땅히 행해야 할 상태와 행동의 결핍을 포함합니다.</p>
                    <ul class="list-disc pl-5 space-y-3">
                        <li><strong>원죄:</strong> 아담의 타락 이후 모든 인간은 본성적으로 하나님의 법을 적대합니다. 로마서 8장 7절은 육신의 생각이 하나님과 원수가 되어 굴복하지 않는 상태를 증언합니다.</li>
                        <li><strong>태만의 죄:</strong> 하나님이 명하신 것을 행하지 않는 모든 태도가 죄입니다. 하나님을 전심으로 사랑하고 이웃을 자신처럼 사랑해야 할 의무를 소홀히 하는 것이 곧 죄의 본질적인 양상입니다.</li>
                    </ul>
                </div>
            </section>

            <!-- Card 3 -->
            <section class="bg-amber-50 border border-amber-100 p-8 rounded-3xl relative overflow-hidden group">
                <div class="absolute -right-4 -top-4 w-24 h-24 bg-amber-200/20 rounded-full group-hover:scale-110 transition-transform"></div>
                <h3 class="text-amber-800 font-black text-xl mb-4">
                    3. 율법을 어기는 죄 (불법)
                </h3>
                <div class="text-amber-900/80 space-y-4">
                    <p>죄의 두 번째 정의는 율법이 정한 한계를 넘어서는 <strong class="text-amber-700">불법</strong>입니다. 하나님께서 명시적으로 혹은 간접적으로 금지하신 경계선을 침범하는 행위입니다.</p>
                    <ul class="list-disc pl-5 space-y-3">
                        <li><strong>한계를 넘는 행위:</strong> 성경은 "죄는 불법이라"고 단정합니다. 하나님이 그으신 선을 넘는 모든 주관적인 욕망과 행위는 죄가 됩니다.</li>
                        <li><strong>금지 명령의 위반:</strong> 십계명의 "...하지 말라"는 명령들을 어기는 것이 대표적입니다. 이처럼 하나님의 법에 어긋나지 않는 일은 자유이나, 법을 어기는 순간 그것은 곧 하나님을 거역하는 죄로 간주됩니다.</li>
                    </ul>
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="mt-24 pb-12 text-center border-t border-slate-200 pt-8">
            <p class="text-slate-400 text-sm">
                교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다
            </p>
        </footer>
    </div>

    <script>
        // Global variables
        window.player = null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'catechism-app';
        const controlBtn = document.getElementById('audio-control-btn');
        const btnIcon = document.getElementById('btn-icon');
        const btnText = document.getElementById('btn-text');
        const errorMsg = document.getElementById('player-error-msg');

        // Function to extract Video ID
        function extractVideoId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length == 11) ? match[7] : false;
        }

        // Load YouTube API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        window.onYouTubeIframeAPIReady = function() {
            initAudio();
        };

        async function initAudio() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) throw new Error('파일을 불러올 수 없습니다.');
                const data = await response.text();
                
                const today = "0218"; // February 18
                const lines = data.split('\n');
                let videoUrl = '';
                
                for (const line of lines) {
                    if (line.trim().startsWith(today)) {
                        videoUrl = line.split(' ')[1] || line.split('\t')[1];
                        break;
                    }
                }

                if (!videoUrl) {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                    return;
                }

                const videoId = extractVideoId(videoUrl);
                if (!videoId) throw new Error('유효하지 않은 주소 형식입니다.');

                window.player = new YT.Player('yt-player-hidden', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
            } catch (error) {
                showError("오디오 정보를 가져오는 중 오류가 발생했습니다.");
                console.error(error);
            }
        }

        function onPlayerReady(event) {
            controlBtn.disabled = false;
            updateBtnUI('paused');
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                updateBtnUI('playing');
            } else {
                updateBtnUI('paused');
            }
        }

        function updateBtnUI(state) {
            if (state === 'playing') {
                btnIcon.innerHTML = `<svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;
                btnText.innerText = "교리 오디오 일시정지";
                controlBtn.setAttribute('aria-label', '교리 오디오 일시정지');
            } else {
                btnIcon.innerHTML = `<svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>`;
                btnText.innerText = "교리 오디오 재생";
                controlBtn.setAttribute('aria-label', '교리 오디오 재생');
            }
        }

        function showError(msg) {
            controlBtn.classList.add('hidden');
            errorMsg.innerText = msg;
            errorMsg.classList.remove('hidden');
        }

        controlBtn.addEventListener('click', () => {
            if (!window.player) return;
            const state = window.player.getPlayerState();
            if (state == YT.PlayerState.PLAYING) {
                window.player.pauseVideo();
            } else {
                window.player.playVideo();
            }
        });
    </script>
</body>
</html>
