<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 1월 31일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        .keep-all {
            word-break: keep-all;
            overflow-wrap: break-word;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="w-full max-w-3xl mb-10 text-center space-y-2">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-900 tracking-tight">1월 31일</h1>
        <p class="text-xl text-blue-600 font-bold">선택 작정의 실행 방편들과 이의 실행에 따른 결과들</p>
    </header>

    <!-- Audio Player Section -->
    <div id="audio-player-container" class="w-full max-w-3xl mb-10 bg-white rounded-2xl shadow-sm border border-slate-200 p-6 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md">
        <div id="player-status" class="text-sm text-slate-500 mb-4 h-5 font-medium"></div>
        <button id="play-button" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-white bg-blue-600 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 active:scale-95" disabled aria-label="교리 오디오 재생 로딩 중">
            <span id="btn-text">로딩 중...</span>
            <svg id="icon-play" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <svg id="icon-pause" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>
        <div id="youtube-player" class="hidden"></div>
    </div>

    <!-- Main Content -->
    <main class="w-full max-w-3xl space-y-8">

        <!-- Catechism Section -->
        <section class="space-y-6">
            <!-- Westminster Confession of Faith -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex items-center">
                    <span class="bg-green-100 text-green-700 text-xs font-bold px-2.5 py-1 rounded-full mr-3">신앙고백서</span>
                    <h2 class="text-lg font-bold text-slate-800">제3장 6항</h2>
                </div>
                <div class="p-6 sm:p-8 space-y-4">
                    <div class="space-y-2">
                        <p class="text-slate-700 leading-relaxed keep-all pl-4 border-l-4 border-green-500 bg-green-50/50 py-2 pr-2 rounded-r-lg">
                            하나님께서 선택하신 사람들을 영광에 이르도록 결정하셨듯이, 자신의 의지의 영원하며 지극히 자유로운 목적에 의해 영광에 이르게 하는 모든 방편을 미리 정하셨다. 그런 까닭에, 선택된 사람들은, 아담 안에서 타락한 이후, 그리스도에 의해 구속을 받고, 적절한 때에 역사하시는 그분의 성령에 의하여 그리스도를 믿는 믿음에 이르도록 효과 있게 부르심을 받고, 의롭다 하심을 받으며, 양자가 되고, 거룩하게 되며, 그분의 능력에 의해 믿음으로 말미암아 구원에 이르도록 보호를 받는다. 선택된 사람들 이외에 누구도 그리스도에 의하여 구속을 받거나, 효과 있게 부르심을 받거나, 의롭다 하심을 받거나, 양자가 되거나, 거룩하게 되거나, 구원받지 못한다.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scripture Section -->
        <section class="bg-slate-800 rounded-2xl shadow-md overflow-hidden text-slate-100">
            <div class="px-6 py-4 border-b border-slate-700 flex items-center">
                <svg class="w-5 h-5 text-yellow-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h2 class="text-lg font-bold">말씀 요절</h2>
            </div>
            <div class="p-6 sm:p-8 space-y-6 text-sm sm:text-base leading-relaxed opacity-90">
                <div>
                    <strong class="text-yellow-400 block mb-1">데살로니가후서 2:13</strong>
                    <p class="keep-all">"주께서 사랑하시는 형제들아 우리가 항상 너희에 관하여 마땅히 하나님께 감사할 것은 하나님이 처음부터 너희를 택하사 성령의 거룩하게 하심과 진리를 믿음으로 구원을 받게 하심이니"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">데살로니가전서 5:9-10</strong>
                    <p class="keep-all">"하나님이 우리를 세우심은 노하심에 이르게 하심이 아니요 오직 우리 주 예수 그리스도로 말미암아 구원을 받게 하심이라..."</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">로마서 8:30</strong>
                    <p class="keep-all">"또 미리 정하신 그들을 또한 부르시고 부르신 그들을 또한 의롭다 하시고 의롭다 하신 그들을 또한 영화롭게 하셨느니라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">베드로전서 1:5</strong>
                    <p class="keep-all">"너희는 말세에 나타내기로 예비하신 구원을 얻기 위하여 믿음으로 말미암아 하나님의 능력으로 보호하심을 받았느니라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">요한복음 17:9</strong>
                    <p class="keep-all">"내가 그들을 위하여 비옵나니 내가 비옵는 것은 세상을 위함이 아니요 내게 주신 자들을 위함이니이다 그들은 아버지의 것이로소이다"</p>
                </div>
            </div>
        </section>

        <!-- Exposition Section -->
        <section class="space-y-6">
            
            <!-- Card 1: Ordained Means -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">목적뿐만 아니라 방편도 정하심</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님께서는 '선택'이라는 작정을 통해 단순히 최종 목적지인 '영광'만을 결정하신 것이 아닙니다. 그 목적에 이르게 하는 <strong class="text-blue-600">모든 실행 방편(means)</strong>들 또한 하나님의 지극히 자유롭고 지혜로운 의지에 따라 미리 정하셨습니다.
                    </p>
                    <p>
                        그러므로 선택받은 성도라 할지라도 이 방편을 무시해서는 안 됩니다. 하나님의 특별한 선택을 받은 사람은 자신을 영생으로 부르시는 구원의 방편을 따라 신실하게 살아가도록 노력해야 합니다. 선택 작정을 핑계로 신앙생활의 의무를 소홀히 하는 것은 하나님의 뜻을 오해하는 것입니다.
                    </p>
                </div>
            </div>

            <!-- Card 2: Order of Salvation -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">구원의 서정: 정해진 질서와 과정</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님께서 정하신 구원의 방편은 논리적이고 질서 있는 과정을 따릅니다.
                    </p>
                    <ul class="list-none space-y-3 mt-4 bg-slate-50 p-5 rounded-xl text-sm sm:text-base">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 font-bold rounded-full mr-3 text-xs">1</span>
                            <span><strong>그리스도에 의한 구속:</strong> 아담 안에서 타락한 자들을 위해 그리스도의 속죄 사역이 먼저 전제됩니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 font-bold rounded-full mr-3 text-xs">2</span>
                            <span><strong>효과적인 부르심:</strong> 적절한 때에 성령 하나님께서 역사하여 그리스도를 믿는 믿음으로 이끄십니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 font-bold rounded-full mr-3 text-xs">3</span>
                            <span><strong>칭의와 양자됨:</strong> 믿음으로 의롭다 하심을 받고 하나님의 자녀가 되는 신분을 얻습니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center bg-blue-100 text-blue-600 font-bold rounded-full mr-3 text-xs">4</span>
                            <span><strong>성화와 보호:</strong> 거룩하게 변화되어 가며, 하나님의 능력으로 끝까지 보호를 받습니다.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Card 3: Responsibility and Protection -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">인격적 순종과 성령의 보호</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님의 작정은 결코 운명론이나 기계적인 결정론이 아닙니다. 구원의 과정에는 선택받은 사람의 <strong class="text-purple-600">인격적 순종과 경건의 노력</strong>이 필수적인 방편으로 포함되어 있습니다.
                    </p>
                    <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                        <p class="text-purple-900 text-sm sm:text-base font-medium">
                            "사람은 전적으로 부패하여 스스로 영적 선을 행할 수 없으나, 성령 하나님께서 그분의 능력으로 선택된 자들을 끝까지 보호하시고 견인하십니다."
                        </p>
                    </div>
                    <p class="mt-4 text-sm text-slate-500">
                        *참고: 선택받지 못한 자들은 이러한 은혜의 보호를 받지 못하며, 구속, 소명, 칭의, 양자됨, 성화의 과정에 참여할 수 없습니다.
                    </p>
                </div>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-16 mb-8 text-center text-slate-400 text-sm">
        <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Global variables required for the specific audio implementation
        window.player = null;
        const DCADDR_URL = '../address/dcaddr.txt';
        const TODAY_DATE = '0131'; // Date to look for

        // Load YouTube IFrame API asynchronously
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // Required API callback
        window.onYouTubeIframeAPIReady = function() {
            initAudioPlayer();
        };

        async function initAudioPlayer() {
            const playButton = document.getElementById('play-button');
            const btnText = document.getElementById('btn-text');
            const iconPlay = document.getElementById('icon-play');
            const iconPause = document.getElementById('icon-pause');
            const statusDiv = document.getElementById('player-status');

            try {
                // Fetch the address file
                const response = await fetch(DCADDR_URL);
                if (!response.ok) throw new Error('주소 파일을 불러오는데 실패했습니다.');
                
                const text = await response.text();
                const lines = text.split('\n');
                let videoId = null;

                // Find the line starting with today's date
                for (const line of lines) {
                    if (line.trim().startsWith(TODAY_DATE)) {
                        const match = line.match(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/);
                        if (match && match[1]) {
                            videoId = match[1];
                            break;
                        }
                    }
                }

                if (!videoId) {
                    playButton.disabled = true;
                    btnText.innerText = "재생 불가";
                    statusDiv.innerText = "오늘의 AI요약 음성은 아직 업로드 전입니다.";
                    playButton.setAttribute('aria-label', '오늘의 음성 업로드 전');
                    return;
                }

                // Initialize Global Player
                window.player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 0,
                        'disablekb': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

            } catch (error) {
                console.error('Audio initialization error:', error);
                playButton.disabled = true;
                btnText.innerText = "오류 발생";
                statusDiv.innerText = "오디오 정보를 불러올 수 없습니다.";
            }

            function onPlayerReady(event) {
                playButton.disabled = false;
                btnText.innerText = "교리 오디오 듣기";
                iconPlay.classList.remove('hidden');
                statusDiv.innerText = "";
                playButton.setAttribute('aria-label', '교리 오디오 재생');
            }

            function onPlayerStateChange(event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    btnText.innerText = "일시정지";
                    iconPlay.classList.add('hidden');
                    iconPause.classList.remove('hidden');
                    playButton.classList.replace('bg-blue-600', 'bg-slate-700');
                    playButton.classList.replace('hover:bg-blue-700', 'hover:bg-slate-800');
                    statusDiv.innerText = "재생 중...";
                    playButton.setAttribute('aria-label', '교리 오디오 일시정지');
                } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                    btnText.innerText = "교리 오디오 듣기";
                    iconPause.classList.add('hidden');
                    iconPlay.classList.remove('hidden');
                    playButton.classList.replace('bg-slate-700', 'bg-blue-600');
                    playButton.classList.replace('hover:bg-slate-800', 'hover:bg-blue-700');
                    statusDiv.innerText = event.data === YT.PlayerState.ENDED ? "재생 완료" : "일시정지됨";
                    playButton.setAttribute('aria-label', '교리 오디오 재생');
                }
            }

            playButton.addEventListener('click', function() {
                if (!window.player || typeof window.player.getPlayerState !== 'function') return;

                const state = window.player.getPlayerState();
                if (state === YT.PlayerState.PLAYING) {
                    window.player.pauseVideo();
                } else {
                    window.player.playVideo();
                }
            });
        }
    </script>
</body>
</html>
