<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 09월 23일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f4f8;
        }
        .infographic-card {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 20px;
            border-left: 5px solid #4a5568;
        }
        .infographic-card .icon {
            width: 48px;
            height: 48px;
            margin-right: 16px;
            color: #4a5568;
        }
        .infographic-card h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
        }
        .infographic-card p, .infographic-card li {
            font-size: 1rem;
            line-height: 1.7;
            color: #4a5568;
        }
        .audio-player-container {
            background-color: #2d3748;
            color: white;
            border-radius: 8px;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .audio-player-button {
            background-color: #4a5568;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        .audio-player-button:hover {
            background-color: #718096;
        }
        .audio-player-button svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto max-w-3xl p-4 sm:p-6">

        <header class="text-center my-8">
            <h1 class="text-4xl font-extrabold text-gray-800">다섯째 간구에서 구하는 기도</h1>
            <p class="text-lg text-gray-500 mt-2">소요리문답 105, 대요리문답 194</p>
        </header>

        <main>
            <div class="audio-player-container">
                <div id="player" class="hidden"></div>
                <button id="play-pause-button" class="audio-player-button">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 hidden">
                        <path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-1.5 0v-12a.75.75 0 0 1 .75-.75Zm9 0a.75.75 0 0 1 .75.75v12a.75.75 0 0 1-1.5 0v-12a.75.75 0 0 1 .75-.75Z" clip-rule="evenodd" />
                    </svg>
                    <span id="button-text">교리 듣기</span>
                </button>
            </div>

            <section class="infographic-card" style="border-color: #6366f1;">
                <div class="flex items-start">
                    <div class="icon" style="color: #6366f1;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                        </svg>
                    </div>
                    <div>
                        <h2>소요리문답 105문</h2>
                        <p class="font-semibold">"우리가 우리에게 죄 지은 자를 사하여 준 것 같이 우리 죄를 사하여 주시옵고"라는 다섯째 간구에서 우리는 하나님께서 그리스도로 인하여 우리의 모든 죄를 값없이 용서해주시기를 기도합니다. 우리가 이렇게 더욱 용기 내어 구할 수 있는 것은 우리가 하나님의 은혜로 다른 사람들을 진심으로 용서할 수 있기 때문입니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card" style="border-color: #ec4899;">
                <div class="flex items-start">
                    <div class="icon" style="color: #ec4899;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
                        </svg>
                    </div>
                    <div>
                        <h2>죄의 빚과 용서의 필요성</h2>
                        <p>다섯째 간구는 죄인이 하나님께 지고 있는 죄책을 법적 채무, 즉 '빚'으로 표현합니다. 이것은 경제적 빚이 아니라, 원죄와 자범죄로 인해 하나님의 공의에 따라 형벌을 받아야 할 책임을 의미합니다. 죄로 오염된 인간은 스스로의 순종으로 과거의 죗값을 치를 수 없으므로, 모든 죄책의 대가를 고스란히 받을 수밖에 없음을 인정하며 죄 사함을 구하는 것입니다.</p>
                    </div>
                </div>
            </section>
            
            <section class="infographic-card" style="border-color: #8b5cf6;">
                <div class="flex items-start">
                    <div class="icon" style="color: #8b5cf6;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m9-9H3" />
                        </svg>
                    </div>
                    <div>
                        <h2>그리스도를 통한 값없는 은혜</h2>
                        <p>죄인 스스로는 죄 사함을 받을 길이 없기에, 삼위 하나님의 긍휼을 구합니다. 우리는 하나님 아버지의 "값없는 은혜"와 "그리스도의 순종과 속상(贖償)"을 의지하여 죄 사함을 구합니다. 그리스도의 순종은 율법의 모든 의를 이루신 것과 십자가에서 형벌을 받으신 두 측면을 가집니다. 그가 치르신 죗값, 즉 '속상'을 통해 죄책과 형벌이 면제되며, 이는 성령께서 주시는 믿음을 통해 우리에게 적용됩니다. 이 믿음은 그리스도의 의를 붙드는 도구일 뿐, 그 자체에 공로는 없습니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card" style="border-color: #10b981;">
                <div class="flex items-start">
                    <div class="icon" style="color: #10b981;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.092 1.21-.138 2.43-.138 3.662a48.678 48.678 0 0 0 0 7.324 4.006 4.006 0 0 0 3.7 3.7 48.678 48.678 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.092-1.21.138-2.43.138-3.662Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>
                    </div>
                    <div>
                        <h2>일상의 죄와 관계의 회복</h2>
                        <p>신자는 그리스도를 믿을 때 과거, 현재, 미래의 모든 죄책을 사함 받고 의롭다 선언된 하나님의 자녀입니다. 그럼에도 날마다 죄 사함을 구하는 이유는, 의롭다 함을 받은 후에도 여전히 죄를 범하기 때문입니다. 일상의 죄가 구원을 잃게 하지는 않지만, 하나님 아버지와의 영적 교제를 흐리게 만듭니다. 우리는 이러한 허물을 고백하고 용서를 구함으로써 아버지와 자녀의 관계를 회복하고, 용서의 확신과 구원의 평안과 기쁨을 더욱 크게 경험하기 위해 기도해야 합니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card" style="border-color: #f97316;">
                <div class="flex items-start">
                    <div class="icon" style="color: #f97316;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z" />
                        </svg>
                    </div>
                    <div>
                        <h2>용서의 증거와 담대한 간구</h2>
                        <p>"우리가 우리에게 죄 지은 자를 사하여 준 것같이"라는 구절은 우리의 용서가 하나님께 용서를 구하는 조건이나 공로가 아님을 의미합니다. 성경은 "주께서 너희를 용서하신 것 같이 너희도 그리하고"라고 가르칩니다. 다른 사람을 마음으로부터 용서하는 것은 본래 인간의 능력이 아니라, 하나님의 용서를 받은 자에게서 나타나는 성령의 열매입니다. 이 용서는 소극적으로 보복하지 않는 것을 넘어, 복수심을 버리고 화해를 도모하는 적극적인 사랑의 행위입니다. 따라서 우리가 다른 이를 용서하는 것은, 우리가 이미 하나님의 자녀가 되었음을 확신하는 증거가 되며, 이 확신 위에서 날마다의 죄에 대한 용서를 더욱 담대히 구할 수 있게 합니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card" style="border-color: #0ea5e9;">
                <div class="flex items-start">
                    <div class="icon" style="color: #0ea5e9;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
                        </svg>
                    </div>
                    <div>
                        <h2>적용 질문</h2>
                        <ol class="list-decimal list-inside space-y-4">
                            <li>다섯째 간구에서 "빛"이라는 용어는 어떤 의미를 표현합니까? 이것이 경제적 채무를 가리킵니까?</li>
                            <li>"우리가 우리에게 죄 지은 자를 사하여 준 것같이"라는 표현이 하나님께 죄 사함을 구하는 조건이나 공로가 될 수 없는 이유는 무엇입니까?</li>
                            <li>날마다 범하는 죄로 인해 여러분은 혹시 이미 의롭다 하심을 받은 사실에 의심이 들어 불안해한 적은 없습니까? 하나님과의 교제가 약화될 때, 여러분은 어떤 방식으로 회복을 구하며 기도하십니까?</li>
                            <li>"우리가 우리에게 죄 지은 자를 사하여 준 것같이"라는 표현이 하나님께 죄 사함을 구하는 조건이나 공로가 될 수 없는 이유는 무엇입니까? 다른 사람을 '마음으로부터' 용서하는 것이 자신이 하나님의 용서를 받은 자임을 증거한다는 사실을 기억할 때, 여러분은 지금 누구를 용서해야 합니까?</li>
                        </ol>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center text-sm text-gray-500 my-8">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>
    </div>

    <script>
        const DATE_MMDD = "0923";

        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        let isVideoLoaded = false; // 비디오 로드 상태를 추적하는 변수
        const playPauseButton = document.getElementById('play-pause-button');
        const buttonText = document.getElementById('button-text');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        function onPlayerReady(event) {
            loadAudioForDate(DATE_MMDD);
        }

        function loadAudioForDate(mmdd) {
            // 파일명을 dcaddr.txt로 수정
            fetch('../address/dcaddr.txt')
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.text();
                })
                .then(text => {
                    const lines = text.split('\n');
                    const line = lines.find(l => l.trim().startsWith(mmdd));

                    if (line) {
                        const parts = line.split(/\s+/);
                        const url = parts[1];
                        const videoId = parseYouTubeUrl(url);

                        if (videoId) {
                            player.videoId = videoId; // 비디오 ID를 player 객체에 저장
                            playPauseButton.addEventListener('click', togglePlayPause);
                        } else {
                            alert('유효한 YouTube URL이 아닙니다.');
                        }
                    } else {
                        alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching audio address file:', error);
                    alert('오디오 주소 파일(dcaddr.txt)을 찾을 수 없습니다.');
                });
        }

        function parseYouTubeUrl(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        // *** 로직 수정 ***
        function togglePlayPause() {
            // 비디오가 아직 로드되지 않았다면
            if (!isVideoLoaded) {
                if (player && player.videoId) {
                    player.loadVideoById(player.videoId);
                    // playVideo()는 onStateChange에서 BUFFERING 후 자동으로 처리되도록 두는 것이 안정적일 수 있으나
                    // 사용자 경험을 위해 즉시 호출합니다.
                    player.playVideo(); 
                    isVideoLoaded = true; // 로드되었음을 표시
                }
            } 
            // 비디오가 이미 로드되었다면
            else {
                const playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            }
        }

        function onPlayerStateChange(event) {
            switch (event.data) {
                case YT.PlayerState.PLAYING:
                    buttonText.textContent = '일시 정지';
                    playIcon.classList.add('hidden');
                    pauseIcon.classList.remove('hidden');
                    break;
                case YT.PlayerState.PAUSED:
                    buttonText.textContent = '계속 듣기';
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                    break;
                case YT.PlayerState.ENDED:
                    buttonText.textContent = '다시 듣기';
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                    // 재생이 끝나면 isVideoLoaded를 다시 false로 만들어 다음 클릭 시 새로 로드하도록 할 수 있으나,
                    // 사용자가 다시듣기를 누를 것을 대비해 상태를 유지하고 seekTo(0)만 하는 것이 나을 수 있음
                    break;
                case YT.PlayerState.BUFFERING:
                    buttonText.textContent = '로딩 중...';
                    break;
                default:
                    // 초기 상태 또는 중지 상태
                    buttonText.textContent = '교리 듣기';
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                    break;
            }
        }
    </script>
</body>
</html>
