<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10월 3일: 맹세로 인해 부과되는 의무</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f2f5;
            color: #1a202c;
        }
        .infographic-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            padding: 2rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .card-icon {
            flex-shrink: 0;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background-color: #e0e7ff;
            color: #4338ca;
        }
        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e3a8a;
        }
        .catechism-body {
            color: #374151;
            padding-left: 1rem;
            border-left: 3px solid #6366f1;
            line-height: 1.7;
        }
        .sub-heading {
            font-weight: 700;
            color: #1e40af;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        #player {
            display: none;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-2">맹세로 인해 부과되는 의무</h1>
            <p class="text-lg md:text-xl text-gray-500">신앙고백서 22장 4항</p>
            <div class="mt-6 flex justify-center">
                <button id="audio-toggle" class="flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span id="button-text">AI 요약</span>
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                    </div>
                    <h2 class="card-title">신앙고백서 제22장 4항</h2>
                </div>
                <div class="catechism-body">
                    <p>맹세는 모호함이나 의중을 감추는 일 없이 명백하며 평범한 의미를 가진 말로 해야 한다. 맹세가 죄짓는 일을 지킬 의무를 부과하지는 않는다. 그러나 죄가 아닌 일에 대해 맹세했다면, 자신에게 해가 될지라도 지켜야만 하며, 또한 이단이나 불신자에게 맹세한 것일지라도 어겨서는 안 된다.</p>
                </div>
            </section>
            
            <section class="infographic-card">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" /></svg>
                    </div>
                    <h2 class="card-title">맹세의 방식과 무효</h2>
                </div>
                <div class="space-y-4 text-gray-600">
                    <div>
                        <h3 class="sub-heading">명백하고 정직하게</h3>
                        <p>맹세는 하나님을 증인으로 부르는 예배적 행위이므로, 모호한 표현으로 속뜻을 감추거나 이중 해석이 가능한 말로 책임을 회피해서는 안 됩니다. 누구든지 알아들을 수 있도록 명백하고 평범한 의미로 말해야 하며, 내용의 투명성과 마음의 정직성을 갖추어야 합니다.</p>
                    </div>
                    <div>
                        <h3 class="sub-heading">죄를 짓는 맹세는 무효</h3>
                        <p>맹세는 결코 죄를 행할 의무를 부과할 수 없습니다. 맹세의 내용이 하나님의 법에 불순종하는 것이라면, 그 맹세는 처음부터 구속력이 없습니다. 다윗이 나발의 집안을 멸하겠다고 분노하며 맹세했지만 아비가일의 간청을 듣고 돌이킨 것처럼, 죄악된 맹세는 지키지 않는 것이 옳습니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>
                    </div>
                    <h2 class="card-title">반드시 지켜야 할 의무</h2>
                </div>
                <div class="space-y-4 text-gray-600">
                    <div>
                        <h3 class="sub-heading">자신에게 해가 될지라도</h3>
                        <p>맹세의 내용이 죄가 아니라면, 설령 그것을 지킴으로써 자신에게 손해가 따르더라도 반드시 지켜야 합니다. 이는 하나님 앞에서 행한 것이므로, 하나님께 대한 진실함과 신실함을 보일 의무가 있기 때문입니다. (시 15:4)</p>
                    </div>
                    <div>
                        <h3 class="sub-heading">상대가 누구이든</h3>
                        <p>맹세의 의무는 맹세의 상대가 이단이나 불신자라는 이유로 면제되지 않습니다. 여호수아가 속임수로 언약한 기브온 족속에게 한 맹세를 지킨 것처럼, 하나님의 이름으로 한 맹세는 상대가 누구이든 상관없이 하나님 앞에서 반드시 지켜야 합니다. 이를 통해 하나님의 신실하심이 드러납니다.</p>
                    </div>
                </div>
            </section>
            
            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2M12 12h.01M12 12a2 2 0 100 4 2 2 0 000-4z"/></svg>
                    </div>
                    <h2 class="card-title">적용 질문</h2>
                </div>
                <ul class="list-decimal pl-5 space-y-3 text-gray-700">
                    <li>왜 신앙고백서는 맹세가 "명백하고 통상적인 의미"(the plain and common sense)로 말해야 한다고 강조합니까? 이것이 하나님 이름의 거룩성과 어떤 관련이 있습니까? 혹시 여러분은 일상에서 자신의 말이 모호하거나 속뜻을 숨기려 했던 경험이 있습니까? 오늘 교훈을 통해 여러분은 어떤 변화를 결심하십니까?</li>
                    <li>맹세가 죄를 행하도록 요구할 때, 왜 그것은 도덕적 의무가 되지 않습니까? 다윗과 아비가일의 사건(삼상 25장)은 이를 어떻게 보여줍니까? 여러분은 잘못된 맹세를 하신 적이 있습니까? 이러한 불법적 맹세 때문에 어려움을 겪으신 일이 있습니까?</li>
                    <li>손해가 따를지라도 신실하게 약속을 지켜야 한다는 원리는 오늘날 여러분의 직장, 가정, 교회 관계 속에서 어떻게 적용될 수 있습니까?</li>
                    <li>여호수아가 기브온 사람들과 속임수로 맺은 언약(수 9장)을 깨뜨리지 않은 사건은 이단이나 불신자와의 맹세를 어떻게 대해야 하는지를 어떤 방식으로 교훈합니까?</li>
                </ul>
            </section>

        </main>
        
        <div id="player"></div>

        <footer class="text-center text-sm text-gray-500 mt-12 py-4 border-t">
            교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.
        </footer>

    </div>

    <script>
        // YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        let playerState;

        const audioToggleButton = document.getElementById('audio-toggle');
        const buttonText = document.getElementById('button-text');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        // YouTube API가 준비되면 이 함수가 호출됨
        function onYouTubeIframeAPIReady() {
            // 플레이어는 버튼 클릭 시 생성되므로 여기서는 비워둠
        }

        function onPlayerReady(event) {
            // 플레이어가 준비되면 즉시 재생
            event.target.playVideo();
        }

        function onPlayerStateChange(event) {
            playerState = event.data;
            updateButtonUI(playerState);
        }

        function updateButtonUI(state) {
            if (state === YT.PlayerState.PLAYING) {
                buttonText.textContent = '일시정지';
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else { // PAUSED, ENDED, CUED 등
                buttonText.textContent = 'AI 요약';
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        }
        
        function extractVideoID(url) {
            // 다양한 YouTube URL 형식에서 비디오 ID를 추출하는 정규식
            const regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (audioToggleButton) {
                audioToggleButton.addEventListener('click', () => {
                    // 플레이어가 있고, 재생 중이거나 버퍼링 중이면 일시정지
                    if (player && (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING)) {
                        player.pauseVideo();
                    } 
                    // 플레이어가 있고, 일시정지 상태이면 다시 재생
                    else if (player && playerState === YT.PlayerState.PAUSED) {
                        player.playVideo();
                    } 
                    // 플레이어가 없는 경우, 새로 생성
                    else {
                        const audioFilePath = '../address/1003.txt';
                        
                        fetch(audioFilePath)
                            .then(response => {
                                if (!response.ok) {
                                    // 404 Not Found 등 파일 접근 실패
                                    throw new Error('404');
                                }
                                return response.text();
                            })
                            .then(url => {
                                if (!url || url.trim() === '') {
                                    alert('유효한 오디오 주소가 파일에 없습니다.');
                                    return;
                                }

                                const videoId = extractVideoID(url.trim());

                                if (!videoId) {
                                    alert('유효한 YouTube URL이 아닙니다.');
                                    return;
                                }

                                if (player) {
                                    // 기존 플레이어가 있다면 비디오만 로드
                                    player.loadVideoById(videoId);
                                } else {
                                    // 새 플레이어 생성
                                    player = new YT.Player('player', {
                                        height: '0',
                                        width: '0',
                                        videoId: videoId,
                                        playerVars: {
                                            'playsinline': 1
                                        },
                                        events: {
                                            'onReady': onPlayerReady,
                                            'onStateChange': onPlayerStateChange
                                        }
                                    });
                                }
                            })
                            .catch(error => {
                                if (error.message === '404') {
                                    alert('아직 업로드 전입니다.');
                                } else {
                                    console.error('오디오 파일 로드 중 오류 발생:', error);
                                }
                            });
                    }
                });
            }
        });
    </script>

</body>
</html>
