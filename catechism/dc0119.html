<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 1월 19일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .prose-custom {
            line-height: 1.75;
            word-break: keep-all;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center py-8 px-4">

    <main class="w-full max-w-2xl space-y-6">

        <header class="text-center space-y-2 mb-8">
            <span class="inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold tracking-wide">1월 19일</span>
            <h1 class="text-3xl font-bold text-gray-900 break-keep">공유적 속성: 전능성, 지혜, 거룩, 사랑, 공의</h1>
        </header>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
                AI요약 듣기
            </h2>
            
            <div id="audio-player-container" class="space-y-4">
                <div id="youtube-player" class="w-full aspect-video rounded-lg overflow-hidden hidden"></div>
                
                <div id="player-controls" class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-xl">
                    <button id="play-button" disabled class="group relative flex items-center justify-center w-16 h-16 bg-white border-2 border-blue-500 rounded-full shadow-md hover:bg-blue-50 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="교리 오디오 재생/일시정지">
                        <svg id="play-icon" class="w-8 h-8 text-blue-600 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        <svg id="loading-icon" class="w-8 h-8 text-blue-600 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <p id="player-status" class="mt-3 text-sm text-gray-500 font-medium">오디오 로딩 중...</p>
                </div>

                <div id="error-message" class="hidden p-4 bg-red-50 text-red-600 text-sm rounded-lg text-center"></div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">말씀 요절</h2>
            <div class="space-y-4 text-gray-700 prose-custom">
                <div class="p-4 bg-gray-50 rounded-lg">
                    <p class="font-serif">"지혜로우신 하나님께 예수 그리스도로 말미암아 영광이 세세무궁하도록 있을지어다 아멘"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 로마서 16:27</p>
                </div>
                <div>
                    <p class="font-serif">"오직 우리 하나님은 하늘에 계셔서 원하시는 모든 것을 행하셨나이다"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 시편 115:3</p>
                </div>
                <div>
                    <p class="font-serif">"여호와라 여호와라 자비롭고 은혜롭고 노하기를 더디하고 인자와 진실이 많은 하나님이라 인자를 천대까지 베풀며 악과 과실과 죄를 용서하리라 그러나 벌을 면제하지는 아니하고 아버지의 악행을 자손 삼사 대까지 보응하리라"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 출애굽기 34:6-7</p>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">신앙고백서</h2>
            
            <div class="space-y-6">
                <div class="bg-indigo-50 p-5 rounded-xl">
                    <h3 class="font-bold text-indigo-900 mb-2">신앙고백서 2.1.b</h3>
                    <div class="prose-custom text-gray-700 space-y-2">
                        <p>전능하시고, 지극히 지혜로우시며, 지극히 거룩하시고, 지극히 자유로우시며, 지극히 절대적이시다. 그분 자신의 변치 않으며 지극히 의로운 의지의 경륜에 따라 모든 일을 자신의 영광을 위하여 행하신다. 지극히 사랑하시고, 은혜로우시며, 긍휼이 많으시고, 오래 참으시며, 선과 진실함이 풍성하시고, 불의와 범죄와 죄를 용서하신다. 그리고 그분 자신을 부지런히 찾는 자에게 상을 주신다. 그러면서도 <strong class="text-red-600">그분의 심판에 있어서 지극히 공의로우시며 지극히 무서우시다.</strong> 모든 죄를 미워하시며 죄를 범한 자를 결단코 면죄하지 않으신다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">교리 해설</h2>
            <div class="prose-custom text-gray-700 space-y-4">
                
                <h3 class="font-bold text-lg text-gray-900 mt-2">1. 전능하심과 자유로우심: 뜻하신 바를 이루심</h3>
                <p>
                    하나님은 <strong class="text-blue-600">전능(Omnipotence)</strong>하십니다. 하나님께서는 원하시는 모든 일을 자유롭게 행하시며, 어떤 피조물도 하나님의 뜻을 막을 수 없습니다. 그러나 '전능하다'는 것은 논리적으로 모순되거나 하나님의 본성에 어긋나는 일(예: 거짓말, 악을 행함, 스스로 존재하지 않게 됨 등)을 하신다는 뜻은 아닙니다. 이는 능력이 부족해서가 아니라, 하나님이 완전하시고 참되신 분이기 때문입니다. 악인을 영생으로 이끄는 일처럼 당신의 공의로운 뜻과 정반대되는 일은 행하지 않으십니다.
                </p>

                <h3 class="font-bold text-lg text-gray-900 mt-4">2. 고난 속에서 빛나는 지혜와 선하심</h3>
                <p>
                    우리가 살아가면서 겪는 고난과 어려움 앞에서 우리는 종종 "왜 하나님께서 보호해주지 않으시는가?"라고 묻게 됩니다. 이때 우리는 하나님의 <strong class="text-indigo-700">지혜와 선하심</strong>을 기억해야 합니다.
                </p>
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400 mt-2">
                    <p class="text-sm">
                        "고난에도 불구하고 하나님의 선하심과 은혜로우심을 붙들어야 합니다. 하나님께서는 당신의 영광과 택함 받은 자들의 구원을 위하여 <strong class="text-blue-600">가장 합당하고 지혜로운 방식</strong>으로 고난조차 허락하시고 사용하십니다."
                    </p>
                </div>

                <h3 class="font-bold text-lg text-gray-900 mt-4">3. 사랑과 공의의 조화</h3>
                <p>
                    하나님은 지극히 사랑하시고 은혜로우시며, 죄를 용서하십니다. 때로 악인에 대한 심판이 지체되는 것처럼 보일 때가 있는데, 이는 하나님의 무능함이 아니라 죄인들이 회개하기를 기다리시는 <strong class="text-blue-600">오래 참으심</strong> 때문입니다. 그러나 동시에 하나님은 지극히 공의로우십니다. 끝까지 회개하지 않고 죄 가운데 머무는 자를 결단코 면죄하지 않으시며, 마지막 날에 지극히 무서운 공의로 심판하십니다. 신자는 이 하나님의 엄위하신 공의와 풍성하신 사랑을 동시에 믿고 경외해야 합니다.
                </p>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">적용 질문</h2>
            <ul class="list-none space-y-4 text-gray-700">
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">1.</span>
                    <p>여러분이 그토록 바라며 기도해온 일이 이루어지지 않을 경우, 여러분을 향한 하나님의 선하심이나 사랑을 의심한 적은 없습니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">2.</span>
                    <p>자연재해나 사람의 악으로 인하여 큰 재난과 고통을 당하는 경우를 볼 때, 여러분은 하나님께 대하여 어떤 질문들을 듣습니까? 그 질문에 대한 여러분의 답은 무엇입니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">3.</span>
                    <p>악인을 현세에서 바로 심판하지 않으시는 하나님에 대해 불만을 표한 적이 있습니까? 여러분은 하나님께서 여러분의 허물을 어떻게 대해주시기를 바랍니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">4.</span>
                    <p>하나님께서 악인에게 영원한 형벌을 내리시는 일이 공의롭다고 생각하십니까? 여러분이 그 악인에게 악한 일을 당했다고 가정한다면, 여러분의 판단은 어떠하시겠습니까?</p>
                </li>
            </ul>
        </section>

        <footer class="text-center text-xs text-gray-400 mt-8 pb-4">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </main>

    <script>
        // --- Configuration ---
        const DATE_ID = "0119"; // January 19th
        const ADDR_FILE = "../address/dcaddr.txt";
        
        // --- Elements ---
        const playerContainer = document.getElementById('youtube-player');
        const playButton = document.getElementById('play-button');
        const playIcon = document.getElementById('play-icon');
        const loadingIcon = document.getElementById('loading-icon');
        const statusText = document.getElementById('player-status');
        const errorMsg = document.getElementById('error-message');
        const controlsDiv = document.getElementById('player-controls');

        window.player = null;
        let videoId = null;
        let isPlayerReady = false;

        // --- Logic ---

        // 1. Fetch Video ID
        async function fetchVideoId() {
            try {
                const response = await fetch(ADDR_FILE);
                if (!response.ok) throw new Error("주소 파일을 불러올 수 없습니다.");
                
                const text = await response.text();
                const lines = text.split('\n');
                const todayLine = lines.find(line => line.trim().startsWith(DATE_ID));
                
                if (!todayLine) {
                    throw new Error("TODAY_NOT_FOUND");
                }

                // Extract URL (assuming format: MMDD URL)
                const urlPart = todayLine.replace(DATE_ID, '').trim();
                
                // Parse Video ID using Regex
                const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                const match = urlPart.match(regExp);

                if (match && match[1]) {
                    return match[1];
                } else {
                    throw new Error("INVALID_URL");
                }

            } catch (error) {
                console.error("Video Fetch Error:", error);
                if (error.message === "TODAY_NOT_FOUND") {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                } else {
                    showError("오디오 정보를 불러오는 중 오류가 발생했습니다.");
                }
                return null;
            }
        }

        // 2. UI Helper Functions
        function showError(msg) {
            statusText.style.display = 'none';
            playButton.style.display = 'none';
            errorMsg.textContent = msg;
            errorMsg.classList.remove('hidden');
        }

        function setButtonLoading(isLoading) {
            playButton.disabled = isLoading;
            if (isLoading) {
                playIcon.classList.add('hidden');
                loadingIcon.classList.remove('hidden');
                statusText.textContent = "플레이어 준비 중...";
            } else {
                playIcon.classList.remove('hidden');
                loadingIcon.classList.add('hidden');
                statusText.textContent = "재생하기";
            }
        }

        // 3. Initialize YouTube API
        function loadYoutubeAPI() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // 4. Player Setup (Called by API)
        function onYouTubeIframeAPIReady() {
            if (!videoId) return;

            window.player = new YT.Player('youtube-player', {
                height: '360',
                width: '640',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1,
                    'controls': 1,
                    'modestbranding': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            isPlayerReady = true;
            setButtonLoading(false);
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // Pause icon
                statusText.textContent = "재생 중";
                playButton.setAttribute('aria-label', '일시정지');
                
                // Show player, hide large button if desired, or keep as toggle
                playerContainer.classList.remove('hidden');
                controlsDiv.classList.add('hidden'); // Hide big button once playing starts
            } else if (event.data == YT.PlayerState.PAUSED) {
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>'; // Play icon
                statusText.textContent = "일시정지됨";
                playButton.setAttribute('aria-label', '재생');
            }
        }

        // 5. Main Execution
        (async function init() {
            setButtonLoading(true);
            videoId = await fetchVideoId();
            
            if (videoId) {
                loadYoutubeAPI();
                
                playButton.addEventListener('click', () => {
                    if (isPlayerReady) {
                        playerContainer.classList.remove('hidden');
                        window.player.playVideo();
                    }
                });
            }
        })();

    </script>
</body>
</html>
