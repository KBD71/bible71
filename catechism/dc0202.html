<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 2월 2일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        .keep-all {
            word-break: keep-all;
            overflow-wrap: break-word;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <header class="w-full max-w-3xl mb-10 text-center space-y-2">
        <h1 class="text-3xl sm:text-4xl font-extrabold text-slate-900 tracking-tight">2월 2일</h1>
        <p class="text-xl text-blue-600 font-bold">예정 교리의 신비와 목회적 신중성</p>
    </header>

    <!-- Audio Player Section -->
    <div id="audio-player-container" class="w-full max-w-3xl mb-10 bg-white rounded-2xl shadow-sm border border-slate-200 p-6 flex flex-col items-center justify-center transition-all duration-300 hover:shadow-md">
        <div id="player-status" class="text-sm text-slate-500 mb-4 h-5 font-medium"></div>
        <button id="play-button" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-white bg-blue-600 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-blue-600/30 hover:shadow-blue-600/40 active:scale-95" disabled aria-label="교리 오디오 재생 로딩 중">
            <span id="btn-text">로딩 중...</span>
            <svg id="icon-play" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            <svg id="icon-pause" class="w-5 h-5 ml-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
        </button>
        <div id="youtube-player" class="hidden"></div>
    </div>

    <!-- Main Content -->
    <main class="w-full max-w-3xl space-y-8">

        <!-- Catechism Section -->
        <section class="space-y-6">
            <!-- Westminster Confession of Faith -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 px-6 py-4 border-b border-slate-100 flex items-center">
                    <span class="bg-green-100 text-green-700 text-xs font-bold px-2.5 py-1 rounded-full mr-3">신앙고백서</span>
                    <h2 class="text-lg font-bold text-slate-800">제3장 8항</h2>
                </div>
                <div class="p-6 sm:p-8 space-y-4">
                    <div class="space-y-2">
                        <p class="text-slate-700 leading-relaxed keep-all pl-4 border-l-4 border-green-500 bg-green-50/50 py-2 pr-2 rounded-r-lg">
                            예정이라는 이 심오한 신비에 관한 교리는 특별히 신중하고 주의 깊게 다루어야 한다. 그리하여 하나님의 말씀에 계시된 그분의 뜻에 집중하며 이것에 순종하는 사람들이, 효과 있는 부르심의 확실성에서, 자신들의 영원한 선택을 확신하도록 해야 한다. 이렇게 함으로써 이 교리는, 복음을 진실하게 복종하는 모든 사람에게, 하나님을 찬양하고 경외하며 경배할 근거와 겸비와 근면과 풍성한 위로의 근거를 제공할 것이다.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scripture Section -->
        <section class="bg-slate-800 rounded-2xl shadow-md overflow-hidden text-slate-100">
            <div class="px-6 py-4 border-b border-slate-700 flex items-center">
                <svg class="w-5 h-5 text-yellow-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h2 class="text-lg font-bold">말씀 요절</h2>
            </div>
            <div class="p-6 sm:p-8 space-y-6 text-sm sm:text-base leading-relaxed opacity-90">
                <div>
                    <strong class="text-yellow-400 block mb-1">신명기 29:29</strong>
                    <p class="keep-all">"감추어진 일은 우리 하나님 여호와께 속하였거니와 나타난 일은 영원히 우리와 우리 자손에게 속하였나니 이는 우리에게 이 율법의 모든 말씀을 행하게 하심이니라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">로마서 11:33</strong>
                    <p class="keep-all">"깊도다 하나님의 지혜와 지식의 풍성함이여, 그의 판단은 헤아리지 못할 것이며 그의 길은 찾지 못할 것이로다"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">베드로후서 1:10</strong>
                    <p class="keep-all">"그러므로 형제들아 더욱 힘써 너희 부르심과 택하심을 굳게 하라 너희가 이것을 행한즉 언제든지 실족하지 아니하리라"</p>
                </div>
                <div>
                    <strong class="text-yellow-400 block mb-1">로마서 8:28, 38-39</strong>
                    <p class="keep-all">"우리가 알거니와 하나님을 사랑하는 자 곧 그의 뜻대로 부르심을 입은 자들에게는 모든 것이 합력하여 선을 이루느니라 ... 어떤 피조물이라도 우리를 우리 주 그리스도 예수 안에 있는 하나님의 사랑에서 끊을 수 없으리라"</p>
                </div>
            </div>
        </section>

        <!-- Exposition Section -->
        <section class="space-y-6">
            
            <!-- Card 1: Mystery and Caution -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">신비로운 교리와 신중한 접근</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        하나님의 선택과 간과라는 예정 교리는 지극히 신비롭고 비밀한 영역입니다. 부패한 본성을 가진 인간은 명확히 계시된 진리조차 오해하기 쉽고, 자기 생각을 기준으로 하나님을 판단하려는 경향이 있습니다.
                    </p>
                    <p>
                        따라서 온갖 오류와 이단, 잘못된 철학이 난무하는 세상 속에서, 하나님의 신비로운 작정을 다룰 때는 <strong class="text-blue-600">특별한 신중함</strong>이 요구됩니다. 함부로 판단하거나 이성으로 재단하려 해서는 안 됩니다.
                    </p>
                </div>
            </div>

            <!-- Card 2: Faith Beyond Reason -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">이성을 넘어선 신앙의 고백</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        예정 교리는 이성으로 시시비비를 가릴 사안이 아니라, <strong class="text-purple-600">신앙으로 받아들여야 할 진리</strong>입니다. 이 교리는 창조주 하나님의 절대 주권, 능력, 긍휼, 그리고 공의를 가장 분명하게 드러냅니다.
                    </p>
                    <div class="bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg">
                        <p class="text-purple-900 text-sm sm:text-base font-medium">
                            "하나님의 절대 주권을 겸손히 인정하고, 오직 하나님의 은혜만이 살 길임을 고백하는 것이 신앙의 정수입니다."
                        </p>
                    </div>
                </div>
            </div>

            <!-- Card 3: Right Response -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">예정 교리에 대한 올바른 반응</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        이 교리는 우리를 하나님에게서 멀어지게 하는 것이 아니라, 도리어 <strong class="text-blue-600">하나님께 나아가 엎드리게 합니다.</strong> 우리는 긍휼을 구하며 죄를 고백하고, 복음의 약속을 붙들어야 합니다.
                    </p>
                    <p>
                        하나님을 판단하거나 저항하는 대신, 말씀에 순종하며 성령의 도우심을 구할 때, 우리는 비로소 내가 선택받은 자임을 확신하게 됩니다. 공의를 부정하는 것은 곧 긍휼의 은혜마저 부정하는 것임을 기억해야 합니다.
                    </p>
                </div>
            </div>

            <!-- Card 4: Comfort and Assurance -->
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 sm:p-8">
                <h3 class="text-xl font-bold text-slate-800 mb-4 pb-2 border-b border-slate-100">성도에게 주는 유익과 위로</h3>
                <div class="text-slate-700 space-y-4 leading-relaxed keep-all">
                    <p>
                        예정 교리는 신비롭고 때론 오해를 불러일으킬 위험이 있지만, 참된 성도에게는 비교할 수 없는 영적 은택을 줍니다.
                    </p>
                    <ul class="list-none space-y-3 mt-4 bg-slate-50 p-5 rounded-xl text-sm sm:text-base">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-green-500 rounded-full mr-3"></span>
                            <span><strong>확신과 찬양:</strong> 영원 전부터 나를 사랑하셨음을 깨닫고 하나님을 경외하며 찬양하게 합니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-green-500 rounded-full mr-3"></span>
                            <span><strong>겸비와 근면:</strong> 나의 공로가 아님을 알기에 겸손해지며, 은혜에 보답하기 위해 더욱 성실히 살게 합니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-1.5 h-1.5 mt-2.5 bg-green-500 rounded-full mr-3"></span>
                            <span><strong>풍성한 위로:</strong> 어떤 시련 속에서도 하나님의 사랑에서 끊어질 수 없다는 사실이 인생의 끝까지 우리를 위로합니다.</span>
                        </li>
                    </ul>
                </div>
            </div>

        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-16 mb-8 text-center text-slate-400 text-sm">
        <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
    </footer>

    <!-- Scripts -->
    <script>
        // Global variables required for the specific audio implementation
        window.player = null;
        const DCADDR_URL = '../address/dcaddr.txt';
        const TODAY_DATE = '0202'; // Updated Date

        // Load YouTube IFrame API asynchronously
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // Required API callback
        window.onYouTubeIframeAPIReady = function() {
            initAudioPlayer();
        };

        async function initAudioPlayer() {
            const playButton = document.getElementById('play-button');
            const btnText = document.getElementById('btn-text');
            const iconPlay = document.getElementById('icon-play');
            const iconPause = document.getElementById('icon-pause');
            const statusDiv = document.getElementById('player-status');

            try {
                // Fetch the address file
                const response = await fetch(DCADDR_URL);
                if (!response.ok) throw new Error('주소 파일을 불러오는데 실패했습니다.');
                
                const text = await response.text();
                const lines = text.split('\n');
                let videoId = null;

                // Find the line starting with today's date
                for (const line of lines) {
                    if (line.trim().startsWith(TODAY_DATE)) {
                        const match = line.match(/(?:v=|\/)([0-9A-Za-z_-]{11}).*/);
                        if (match && match[1]) {
                            videoId = match[1];
                            break;
                        }
                    }
                }

                if (!videoId) {
                    playButton.disabled = true;
                    btnText.innerText = "재생 불가";
                    statusDiv.innerText = "오늘의 AI요약 음성은 아직 업로드 전입니다.";
                    playButton.setAttribute('aria-label', '오늘의 음성 업로드 전');
                    return;
                }

                // Initialize Global Player
                window.player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1,
                        'controls': 0,
                        'disablekb': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

            } catch (error) {
                console.error('Audio initialization error:', error);
                playButton.disabled = true;
                btnText.innerText = "오류 발생";
                statusDiv.innerText = "오디오 정보를 불러올 수 없습니다.";
            }

            function onPlayerReady(event) {
                playButton.disabled = false;
                btnText.innerText = "교리 오디오 듣기";
                iconPlay.classList.remove('hidden');
                statusDiv.innerText = "";
                playButton.setAttribute('aria-label', '교리 오디오 재생');
            }

            function onPlayerStateChange(event) {
                if (event.data === YT.PlayerState.PLAYING) {
                    btnText.innerText = "일시정지";
                    iconPlay.classList.add('hidden');
                    iconPause.classList.remove('hidden');
                    playButton.classList.replace('bg-blue-600', 'bg-slate-700');
                    playButton.classList.replace('hover:bg-blue-700', 'hover:bg-slate-800');
                    statusDiv.innerText = "재생 중...";
                    playButton.setAttribute('aria-label', '교리 오디오 일시정지');
                } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                    btnText.innerText = "교리 오디오 듣기";
                    iconPause.classList.add('hidden');
                    iconPlay.classList.remove('hidden');
                    playButton.classList.replace('bg-slate-700', 'bg-blue-600');
                    playButton.classList.replace('hover:bg-slate-800', 'hover:bg-blue-700');
                    statusDiv.innerText = event.data === YT.PlayerState.ENDED ? "재생 완료" : "일시정지됨";
                    playButton.setAttribute('aria-label', '교리 오디오 재생');
                }
            }

            playButton.addEventListener('click', function() {
                if (!window.player || typeof window.player.getPlayerState !== 'function') return;

                const state = window.player.getPlayerState();
                if (state === YT.PlayerState.PLAYING) {
                    window.player.pauseVideo();
                } else {
                    window.player.playVideo();
                }
            });
        }
    </script>
</body>
</html>
