<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 1월 20일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .prose-custom {
            line-height: 1.75;
            word-break: keep-all;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center py-8 px-4">

    <main class="w-full max-w-2xl space-y-6">

        <header class="text-center space-y-2 mb-8">
            <span class="inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold tracking-wide">1월 20일</span>
            <h1 class="text-2xl font-bold text-gray-900 break-keep">하나님의 충분성, 영광, 존재의 근원, 주권, 전지성, 거룩성, 예배 받으심의 합당성</h1>
        </header>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
                AI요약 듣기
            </h2>
            
            <div id="audio-player-container" class="space-y-4">
                <div id="youtube-player" class="w-full aspect-video rounded-lg overflow-hidden hidden"></div>
                
                <div id="player-controls" class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-xl">
                    <button id="play-button" disabled class="group relative flex items-center justify-center w-16 h-16 bg-white border-2 border-blue-500 rounded-full shadow-md hover:bg-blue-50 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="교리 오디오 재생/일시정지">
                        <svg id="play-icon" class="w-8 h-8 text-blue-600 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        <svg id="loading-icon" class="w-8 h-8 text-blue-600 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <p id="player-status" class="mt-3 text-sm text-gray-500 font-medium">오디오 로딩 중...</p>
                </div>

                <div id="error-message" class="hidden p-4 bg-red-50 text-red-600 text-sm rounded-lg text-center"></div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">말씀 요절</h2>
            <div class="space-y-4 text-gray-700 prose-custom">
                <div class="p-4 bg-gray-50 rounded-lg">
                    <p class="font-serif">"아버지께서 자기 속에 생명이 있음 같이 아들에게도 생명을 주어 그 속에 있게 하셨고"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 요한복음 5:26</p>
                </div>
                <div>
                    <p class="font-serif">"주는 선하사 선을 행하시오니 주의 율례들로 나를 가르치소서"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 시편 119:68</p>
                </div>
                <div>
                    <p class="font-serif">"깊도다 하나님의 지혜와 지식의 풍성함이여... 이는 만물이 주에게서 나오고 주로 말미암고 주에게로 돌아감이라 그에게 영광이 세세에 있을지어다 아멘"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 로마서 11:33, 36</p>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">신앙고백서</h2>
            
            <div class="space-y-6">
                <div class="bg-indigo-50 p-5 rounded-xl">
                    <h3 class="font-bold text-indigo-900 mb-2">신앙고백서 2.2</h3>
                    <div class="prose-custom text-gray-700 space-y-2">
                        <p>하나님께서 그분 스스로 자신 안에 모든 생명과 영광과 선과 복을 가지고 계신다. 하나님께서 또한 그분만으로 <strong class="text-blue-600">스스로 완전히 충분하시며</strong>, 그분이 만드신 그 어떤 피조물도 필요하지 않으시고, 어떤 영광도 이것들에게서 얻지 않으시며, 오히려 자신의 영광을 이것들 안에, 이것들로써, 이것들에, 이것들 위에 나타내실 뿐이다. 하나님께서 모든 존재의 유일한 근원이시며, 만물이 그에게서 나오고, 그로 말미암으며, 그에게로 돌아간다.</p>
                        <p>그리고 하나님께서 기뻐하시는 것은 무엇이든지 만물에 의하여, 만물을 위하여, 만물에 행하실 <strong class="text-indigo-700">최고의 주권적인 권세</strong>를 만물에 대하여 가지고 계신다. 하나님의 눈앞에 만물은 드러나 있으며 명백하다. 하나님의 지식은 무한하며, 오류가 없고, 피조물에게 의존하지 않는다. 그리하여 하나님께는 어떤 것도 우연하거나 불확실하지 않다. 하나님께서 자신의 모든 계획과 모든 일과 모든 명령에 있어서 지극히 거룩하시다. 천사들과 사람들과 다른 모든 피조물에게 요구하기를 기뻐하시는 어떤 예배와 섬김과 복종이라도 이 모든 것을 하나님께서 받으시기에 합당하시다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">교리 해설</h2>
            <div class="prose-custom text-gray-700 space-y-4">
                
                <h3 class="font-bold text-lg text-gray-900 mt-2">1. 하나님의 자족성(Self-Sufficiency): 스스로 충분하신 분</h3>
                <p>
                    하나님은 스스로 존재하시며, 그분 자신 안에 생명과 영광과 선과 복을 충만하게 가지고 계십니다. 하나님은 절대적으로 필연적인 존재이시며, 그분이 만드신 어떤 피조물도 필요로 하지 않으십니다. 흔히 창조의 목적이 '하나님의 영광을 위하여'라고 할 때, 하나님께서 영광이 부족하여 피조물을 통해 영광을 얻으셔야 하는 것처럼 오해해서는 안 됩니다. 창조는 하나님께서 본래 가지고 계신 <strong class="text-blue-600">자신의 영광을 피조물에게 나타내 보이시는 은혜의 행위</strong>입니다.
                </p>

                <h3 class="font-bold text-lg text-gray-900 mt-4">2. 만물의 근원이자 최고의 주권자</h3>
                <p>
                    모든 만물은 하나님에게서 나오고, 하나님으로 말미암아 존재하며, 마침내 하나님에게로 돌아갑니다. 그러므로 어떤 피조물도 하나님보다 우위에 있는 권세를 주장할 수 없습니다. 하나님은 모든 가치와 윤리의 기준이시며, 옳고 그름의 척도이십니다. 하나님의 말씀이 곧 선이며, 하나님의 행하심이 곧 의입니다. 만물의 위치와 목적을 정하실 <strong class="text-indigo-700">최고의 주권적 권세</strong>는 오직 하나님께 있습니다.
                </p>

                <h3 class="font-bold text-lg text-gray-900 mt-4">3. 사탄의 시험과 하나님의 선하심</h3>
                <p>
                    사탄은 끊임없이 하나님의 주권과 선하심을 의심하게 만듭니다. 에덴동산에서 사탄은 아담과 하와에게 선악과 금령을 왜곡하여, 하나님이 마치 인간이 잘되는 것을 시기하거나 두려워하는 분인 것처럼 속였습니다.
                </p>
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400 mt-2">
                    <p class="text-sm">
                        "이러한 시험에 빠져 <strong class="text-red-600">하나님의 선하심을 의심</strong>하게 되면, 사람은 타락하여 자신의 부패한 욕망을 만족시키는 것을 복으로 착각하게 됩니다. 그러나 하나님만이 사람의 최고의 기쁨이자 최상의 복입니다."
                    </p>
                </div>

                <h3 class="font-bold text-lg text-gray-900 mt-4">4. 전지하심과 예배 받으시기에 합당하심</h3>
                <p>
                    하나님의 지식은 무한하고 오류가 없으시며, 피조물의 행동에 의존하지 않으십니다. 하나님 앞에서는 어떤 것도 우연이거나 불확실하지 않습니다. 모든 것을 아시고 계획하시며 실행하시는 하나님께서는 지극히 거룩하시기에, 모든 피조물로부터 예배와 순종을 받으시기에 합당하십니다. 예배는 하나님께서 기뻐하시는 일이며, 사람이 행해야 할 가장 중요하고 복된 의무입니다.
                </p>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">적용 질문</h2>
            <ul class="list-none space-y-4 text-gray-700">
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">1.</span>
                    <p>하나님께 만물이 속하여 있으며 그분으로 말미암아 존재하고 마침내 그분에게로 돌아간다는 하나님의 충분성은 여러분의 삶에 어떤 의미로 다가옵니까? 인생의 의미를 하나님과 상관없이 찾을 수 있을까요? 여러분은 자신의 인생의 의미를 무엇을 통해 무슨 기준으로 찾으십니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">2.</span>
                    <p>여러분은 과연 하나님께서 유일한 선이시며 궁극적인 복이심을 믿으십니까? 여러분의 슬픔과 고통의 경험 속에서도 이 고백을 하실 수 있습니까? 세상에서 일어나고 있는 전쟁과 재해에도 불구하고 이 고백을 하실 수 있습니까? 어떻게 그러하십니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">3.</span>
                    <p>하나님께는 우연적인 것이나 불확실한 것이 없다는 사실은 하나님의 어떤 속성에서 비롯되는 것입니까? 하나님의 눈길 아래서 살아가는 인생이라는 의식을 가진 적이 있습니까? 그런 의식을 특별히 경험한 때를 말씀해보시기 바랍니다.</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">4.</span>
                    <p>하나님을 예배하는 것이 사람이 누릴 가장 큰 축복이라는 말에 대해 여러분의 판단은 어떠하십니까? 실제로 예배하는 가운데 여러분이 복되다는 각성의 경험이 있습니까?</p>
                </li>
            </ul>
        </section>

        <footer class="text-center text-xs text-gray-400 mt-8 pb-4">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </main>

    <script>
        // --- Configuration ---
        const DATE_ID = "0120"; // January 20th
        const ADDR_FILE = "../address/dcaddr.txt";
        
        // --- Elements ---
        const playerContainer = document.getElementById('youtube-player');
        const playButton = document.getElementById('play-button');
        const playIcon = document.getElementById('play-icon');
        const loadingIcon = document.getElementById('loading-icon');
        const statusText = document.getElementById('player-status');
        const errorMsg = document.getElementById('error-message');
        const controlsDiv = document.getElementById('player-controls');

        window.player = null;
        let videoId = null;
        let isPlayerReady = false;

        // --- Logic ---

        // 1. Fetch Video ID
        async function fetchVideoId() {
            try {
                const response = await fetch(ADDR_FILE);
                if (!response.ok) throw new Error("주소 파일을 불러올 수 없습니다.");
                
                const text = await response.text();
                const lines = text.split('\n');
                const todayLine = lines.find(line => line.trim().startsWith(DATE_ID));
                
                if (!todayLine) {
                    throw new Error("TODAY_NOT_FOUND");
                }

                // Extract URL (assuming format: MMDD URL)
                const urlPart = todayLine.replace(DATE_ID, '').trim();
                
                // Parse Video ID using Regex
                const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                const match = urlPart.match(regExp);

                if (match && match[1]) {
                    return match[1];
                } else {
                    throw new Error("INVALID_URL");
                }

            } catch (error) {
                console.error("Video Fetch Error:", error);
                if (error.message === "TODAY_NOT_FOUND") {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                } else {
                    showError("오디오 정보를 불러오는 중 오류가 발생했습니다.");
                }
                return null;
            }
        }

        // 2. UI Helper Functions
        function showError(msg) {
            statusText.style.display = 'none';
            playButton.style.display = 'none';
            errorMsg.textContent = msg;
            errorMsg.classList.remove('hidden');
        }

        function setButtonLoading(isLoading) {
            playButton.disabled = isLoading;
            if (isLoading) {
                playIcon.classList.add('hidden');
                loadingIcon.classList.remove('hidden');
                statusText.textContent = "플레이어 준비 중...";
            } else {
                playIcon.classList.remove('hidden');
                loadingIcon.classList.add('hidden');
                statusText.textContent = "재생하기";
            }
        }

        // 3. Initialize YouTube API
        function loadYoutubeAPI() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // 4. Player Setup (Called by API)
        function onYouTubeIframeAPIReady() {
            if (!videoId) return;

            window.player = new YT.Player('youtube-player', {
                height: '360',
                width: '640',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1,
                    'controls': 1,
                    'modestbranding': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            isPlayerReady = true;
            setButtonLoading(false);
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // Pause icon
                statusText.textContent = "재생 중";
                playButton.setAttribute('aria-label', '일시정지');
                
                // Show player, hide large button if desired, or keep as toggle
                playerContainer.classList.remove('hidden');
                controlsDiv.classList.add('hidden'); // Hide big button once playing starts
            } else if (event.data == YT.PlayerState.PAUSED) {
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>'; // Play icon
                statusText.textContent = "일시정지됨";
                playButton.setAttribute('aria-label', '재생');
            }
        }

        // 5. Main Execution
        (async function init() {
            setButtonLoading(true);
            videoId = await fetchVideoId();
            
            if (videoId) {
                loadYoutubeAPI();
                
                playButton.addEventListener('click', () => {
                    if (isPlayerReady) {
                        playerContainer.classList.remove('hidden');
                        window.player.playVideo();
                    }
                });
            }
        })();

    </script>
</body>
</html>
