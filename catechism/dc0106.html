<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 1월 6일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .prose-custom {
            line-height: 1.75;
            word-break: keep-all;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col items-center py-8 px-4">

    <main class="w-full max-w-2xl space-y-6">

        <header class="text-center space-y-2 mb-8">
            <span class="inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold tracking-wide">1월 6일</span>
            <h1 class="text-3xl font-bold text-gray-900 break-keep">성경 계시의 권위</h1>
        </header>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                </svg>
                AI요약 듣기
            </h2>
            
            <div id="player-container" class="space-y-4">
                <div id="youtube-player" class="w-full aspect-video rounded-lg overflow-hidden hidden"></div>
                
                <div id="player-controls" class="flex flex-col items-center justify-center p-4 bg-gray-50 rounded-xl">
                    <button id="play-button" disabled class="group relative flex items-center justify-center w-16 h-16 bg-white border-2 border-blue-500 rounded-full shadow-md hover:bg-blue-50 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="교리 오디오 재생/일시정지">
                        <svg id="play-icon" class="w-8 h-8 text-blue-600 ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                        <svg id="loading-icon" class="w-8 h-8 text-blue-600 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </button>
                    <p id="player-status" class="mt-3 text-sm text-gray-500 font-medium">오디오 로딩 중...</p>
                </div>

                <div id="error-message" class="hidden p-4 bg-red-50 text-red-600 text-sm rounded-lg text-center"></div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">말씀 요절</h2>
            <div class="space-y-4 text-gray-700 prose-custom">
                <div class="p-4 bg-gray-50 rounded-lg">
                    <p class="font-serif">"예언은 언제든지 사람의 뜻으로 낸 것이 아니요 오직 성령의 감동하심을 받은 사람들이 하나님께 받아 말한 것임이라"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 베드로후서 1:21</p>
                </div>
                <div>
                    <p class="font-serif">"만일 우리가 사람들의 증언을 받을진대 하나님의 증거는 더욱 크도다 하나님의 증거는 이것이니 그의 아들에 대하여 증언하신 것이니라"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 요한일서 5:9</p>
                </div>
                <div>
                    <p class="font-serif">"이러므로 우리가 하나님께 끊임없이 감사함은 너희가 우리에게 들은 바 하나님의 말씀을 받을 때에 사람의 말로 받지 아니하고 하나님의 말씀으로 받음이니 진실로 그러하도다 이 말씀이 또한 너희 믿는 자 가운데에서 역사하느니라"</p>
                    <p class="text-right text-sm font-bold text-gray-500 mt-2">- 데살로니가전서 2:13</p>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">신앙고백서</h2>
            
            <div class="space-y-6">
                <div class="bg-indigo-50 p-5 rounded-xl">
                    <h3 class="font-bold text-indigo-900 mb-2">신앙고백서 1.4</h3>
                    <p class="text-gray-700 leading-relaxed mb-2">
                        성경의 권위는 우리가 성경을 믿고 순종해야 하는 이유이다. 이 성경의 권위는 어떤 사람이나 교회의 증언에 의존하는 것이 아니며(진리 자체이자) <strong class="text-indigo-700">성경의 저자이신 하나님께만 전적으로 의존한다.</strong>
                    </p>
                    <p class="text-gray-700 leading-relaxed">
                        그러므로 우리는 성경을 받아들여야 한다. 왜냐하면 <strong class="text-red-600">성경은 하나님의 말씀이기 때문이다.</strong>
                    </p>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">교리 해설</h2>
            <div class="prose-custom text-gray-700 space-y-4">
                
                <h3 class="font-bold text-lg text-gray-900 mt-2">1. 권위의 원천: 교회가 아닌 하나님</h3>
                <p>
                    성경은 하나님의 말씀이므로 그 자체로 절대적인 권위를 갖습니다. 우리가 성경에 순종하는 이유는 교회가 "이 책이 성경이다"라고 공포했기 때문이 아닙니다. 로마 가톨릭 교회는 교회가 정경을 결정했으므로 교회가 성경보다 우위의 권위 혹은 동등한 권위를 가진다고 주장하지만, 개혁교회는 이를 거부합니다. <strong class="text-blue-600">성경의 권위는 오직 저자이신 하나님께로부터 나옵니다.</strong>
                </p>

                <h3 class="font-bold text-lg text-gray-900 mt-4">2. 교회의 역할: 결정자가 아닌 증언자</h3>
                <p>
                    교회의 역할은 권위를 부여하는 것이 아니라, 이미 존재하는 하나님의 권위를 <strong class="text-indigo-700">발견하고 고백하는 것</strong>입니다. 성령 하나님께서 주시는 영적 감동과 성경 교훈의 탁월성으로 인해, 교회는 "이것이 참된 하나님의 말씀이구나"라고 인정하고 선포할 따름입니다. 금을 금이라고 알아본다고 해서 그 사람이 금을 만든 것이 아니듯, 교회가 성경을 알아본다고 해서 성경의 권위가 교회에게 의존하는 것은 아닙니다.
                </p>
                <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-gray-400 mt-2">
                    <p class="text-sm">
                        "성경은 교회에 의하여 인정받지 못한다고 하여도 <strong class="text-red-600">여전히 하나님의 말씀</strong>입니다."
                    </p>
                </div>

                <h3 class="font-bold text-lg text-gray-900 mt-4">3. 예수님과 성경의 권위</h3>
                <p>
                    예수님께서는 "천지가 없어지기 전에는 율법의 일점일획도 결코 없어지지 아니하고 다 이룰 것"(마 5:18)이라고 말씀하시며 성경의 권위를 확증하셨습니다. 하나님의 아들이신 예수님은 지식에 오류가 없으십니다. 따라서 예수 그리스도를 믿는 믿음은 그분이 증거하신 <strong class="text-blue-600">성경의 권위</strong>를 수용하는 것으로 이어집니다. 예수님의 신적 권위와 성경의 신적 권위는 뗄 수 없이 연결되어 있습니다.
                </p>
            </div>
        </section>

        <section class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4 pb-2 border-b border-gray-100">적용 질문</h2>
            <ul class="list-none space-y-4 text-gray-700">
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">1.</span>
                    <p>여러분은 성경이 하나님의 말씀이라고 믿으십니까? 여러분은 성경의 교훈에 대하여 어떠한 태도로 반응하십니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">2.</span>
                    <p>만일 어떤 사람이 많은 사람이 기대한 바와는 다르게 도덕적으로 큰 실망을 준다면, 여러분은 그 사람의 가르침에 대하여 어떠한 평가를 내리시겠습니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">3.</span>
                    <p>만일 도덕적으로 실망을 주거나 오류를 옳다고 우기는 고집을 부리는 어떤 사람이 성경을 하나님의 말씀이라고 말한다면 여러분은 그 사람이 말한 바대로 성경을 하나님의 말씀이라고 믿을 수 있습니까?</p>
                </li>
                <li class="flex gap-3">
                    <span class="font-bold text-blue-600 flex-shrink-0">4.</span>
                    <p>사람이나 교회의 증언이 아니라 성경 스스로 하나님의 말씀의 권위를 나타낸다는 말을 인정하십니까? 여러분은 어떻게 그러한지 설명하시기 바랍니다.</p>
                </li>
            </ul>
        </section>

        <footer class="text-center text-xs text-gray-400 mt-8 pb-4">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </main>

    <script>
        // --- Configuration ---
        const DATE_ID = "0106"; // January 6th
        const ADDR_FILE = "../address/dcaddr.txt";
        
        // --- Elements ---
        const playerContainer = document.getElementById('youtube-player');
        const playButton = document.getElementById('play-button');
        const playIcon = document.getElementById('play-icon');
        const loadingIcon = document.getElementById('loading-icon');
        const statusText = document.getElementById('player-status');
        const errorMsg = document.getElementById('error-message');
        const controlsDiv = document.getElementById('player-controls');

        let player;
        let videoId = null;
        let isPlayerReady = false;

        // --- Logic ---

        // 1. Fetch Video ID
        async function fetchVideoId() {
            try {
                const response = await fetch(ADDR_FILE);
                if (!response.ok) throw new Error("주소 파일을 불러올 수 없습니다.");
                
                const text = await response.text();
                const lines = text.split('\n');
                const todayLine = lines.find(line => line.trim().startsWith(DATE_ID));
                
                if (!todayLine) {
                    throw new Error("TODAY_NOT_FOUND");
                }

                // Extract URL (assuming format: MMDD URL)
                const urlPart = todayLine.replace(DATE_ID, '').trim();
                
                // Parse Video ID using Regex
                const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
                const match = urlPart.match(regExp);

                if (match && match[1]) {
                    return match[1];
                } else {
                    throw new Error("INVALID_URL");
                }

            } catch (error) {
                console.error("Video Fetch Error:", error);
                if (error.message === "TODAY_NOT_FOUND") {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                } else {
                    showError("오디오 정보를 불러오는 중 오류가 발생했습니다.");
                }
                return null;
            }
        }

        // 2. UI Helper Functions
        function showError(msg) {
            statusText.style.display = 'none';
            playButton.style.display = 'none';
            errorMsg.textContent = msg;
            errorMsg.classList.remove('hidden');
        }

        function setButtonLoading(isLoading) {
            playButton.disabled = isLoading;
            if (isLoading) {
                playIcon.classList.add('hidden');
                loadingIcon.classList.remove('hidden');
                statusText.textContent = "플레이어 준비 중...";
            } else {
                playIcon.classList.remove('hidden');
                loadingIcon.classList.add('hidden');
                statusText.textContent = "재생하기";
            }
        }

        // 3. Initialize YouTube API
        function loadYoutubeAPI() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // 4. Player Setup (Called by API)
        function onYouTubeIframeAPIReady() {
            if (!videoId) return;

            player = new YT.Player('youtube-player', {
                height: '360',
                width: '640',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1,
                    'controls': 1,
                    'modestbranding': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            isPlayerReady = true;
            setButtonLoading(false);
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // Pause icon
                statusText.textContent = "재생 중";
                playButton.setAttribute('aria-label', '일시정지');
                
                // Show player, hide large button if desired, or keep as toggle
                playerContainer.classList.remove('hidden');
                controlsDiv.classList.add('hidden'); // Hide big button once playing starts
            } else if (event.data == YT.PlayerState.PAUSED) {
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>'; // Play icon
                statusText.textContent = "일시정지됨";
                playButton.setAttribute('aria-label', '재생');
            }
        }

        // 5. Main Execution
        (async function init() {
            setButtonLoading(true);
            videoId = await fetchVideoId();
            
            if (videoId) {
                loadYoutubeAPI();
                
                playButton.addEventListener('click', () => {
                    if (isPlayerReady) {
                        playerContainer.classList.remove('hidden');
                        player.playVideo();
                    }
                });
            }
        })();

    </script>
</body>
</html>
