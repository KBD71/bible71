<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 25일: '주님께서 가르치신 기도'의 결론</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f2f5;
            color: #1a202c;
        }
        .infographic-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            padding: 2rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .card-icon {
            flex-shrink: 0;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background-color: #e0e7ff;
            color: #4338ca;
        }
        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e3a8a;
        }
        .catechism-q {
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }
        .catechism-a {
            color: #374151;
            padding-left: 1rem;
            border-left: 3px solid #6366f1;
        }
        #player {
            display: none;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-2">'주님께서 가르치신 기도'의 결론</h1>
            <p class="text-lg md:text-xl text-gray-500">소요리문답 107문 & 대요리문답 196문</p>
            <div class="mt-6 flex justify-center">
                <button id="audio-toggle" class="flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span id="button-text">AI 요약</span>
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                    </div>
                    <h2 class="card-title">소요리문답 제107문</h2>
                </div>
                <div>
                    <p class="catechism-q">문: 주님의 기도의 결론이 우리에게 가르치는 것은 무엇입니까?</p>
                    <p class="catechism-a">답: "나라와 권세와 영광이 아버지께 영원히 있사옵나이다 아멘"이라는 주님의 기도의 결론은 우리가 기도할 때 오직 하나님에게서만 용기를 얻을 것과, 나라와 권세와 영광을 하나님께 돌리며 하나님을 찬양할 것을 가르칩니다. 그리고 우리의 간구와 확신을 들어주실 것임을 증언하기 위하여 우리는 이렇게 말합니다. "아멘."</p>
                </div>
            </section>
            
            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/></svg>
                    </div>
                    <h2 class="card-title">대요리문답 제196문</h2>
                </div>
                <div>
                    <p class="catechism-q">문: '주님의 기도'의 결론이 우리에게 가르치는 것은 무엇입니까?</p>
                    <p class="catechism-a">답: "'나라와 권세와 영광이 아버지께 영원히 있사옵나이다 아멘'이라는 '주님의 기도'의 결론은 우리는 우리 자신이나 다른 어떤 피조물 안에 있는 어떤 합당함에 근거하지 않고, 오직 하나님에게서만 나온 근거로 우리의 간구를 강화할 것을 가르칩니다. 또한 오직 하나님께만 영원한 주권과 전능과 영화로운 탁월성을 돌리는 찬양과 함께 드리는 기도로 우리의 간구를 강화할 것을 가르칩니다. 그리고 이런 가르침을 고려할 때, 하나님께서 우리를 도우실 수 있고, 또 돕고자 하시기 때문에 우리는 우리의 요청을 이루어 주시기를 믿음으로 담대히 호소하며, 우리의 요청을 이루실 하나님을 잠잠히 신뢰할 수 있습니다. 이것이 우리의 원하는 바이며 확신임을 증언하기 위하여 우리는 이렇게 말합니다. '아멘.'"</p>
                </div>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg>
                    </div>
                    <h2 class="card-title">교리 해설: 송영의 의미</h2>
                </div>
                <div class="space-y-6 text-gray-600">
                    <p>'주님의 기도'의 결론인 송영(頌榮)은 기도의 모든 근거가 하나님의 주권과 권세와 영광에 있음을 선언하는 찬양입니다. 대요리문답은 이 송영이 우리의 기도를 어떻게 강화하는지 네 가지로 설명합니다.</p>
                    <div class="space-y-4">
                        <div>
                            <h3 class="font-bold text-lg text-indigo-700">1. 기도의 근거는 오직 하나님입니다.</h3>
                            <p>우리의 기도가 응답받을 것이라는 확신은 우리 자신이나 다른 어떤 피조물의 가치에 있지 않습니다. 그 근거는 오직 언약에 신실하시고 사랑과 긍휼이 풍성하신 하나님의 성품에 있습니다.</p>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-indigo-700">2. 찬양으로 간구를 강화합니다.</h3>
                            <p>송영으로 기도를 마치는 것은 단순한 간구를 넘어 하나님의 주권, 전능, 영광을 찬송하는 예배 행위입니다. 이는 하나님 나라의 왕이신 주님을 높이는 것입니다.</p>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-indigo-700">3. 담대한 신뢰를 갖게 합니다.</h3>
                            <p>송영은 기도의 신학적 근거가 하나님께 있음을 고백하게 합니다. 이를 통해 그리스도 안에서 우리를 자녀 삼으신 하나님께서 우리를 도우실 능력과 의지가 있으심을 확신하며 담대히 나아갈 수 있습니다.</p>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg text-indigo-700">4. '아멘'으로 확신을 증언합니다.</h3>
                            <p>"아멘"은 "진실로 그러합니다", "그대로 이루어질 것입니다"라는 의미입니다. 이는 하나님의 나라와 권세와 영광이 영원함을 고백하며, 우리의 간구를 들으시고 도우실 것을 진실히 믿는다는 확신의 표현입니다.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2M12 12h.01M12 12a2 2 0 100 4 2 2 0 000-4z"/></svg>
                    </div>
                    <h2 class="card-title">적용 질문</h2>
                </div>
                <ul class="list-decimal pl-5 space-y-3 text-gray-700">
                    <li>'주님의 기도'의 송영이 원래 기도문의 일부가 아니라는 주장은 무엇 때문입니까? 『디다케』가 보여주는 송영 사용의 역사적 의미는 무엇이며, 우리는 송영을 '주님의 기도'에 포함하여 기도할 수 있습니까?</li>
                    <li>대요리문답 196항에서 말하는 "우리의 간구를 강화할 근거"는 무엇이며, 그 근거가 우리 자신이나 피조물이 될 수 없는 이유는 무엇인가?</li>
                    <li>지금 여러분은 기도로 간구할 때, 하나님께서 능히 이루실 수 있고 또 이루시기를 원하신다는 확신을 갖지 못하고 있지는 않습니까? 어떻게 그 확신을 회복하겠습니까?</li>
                    <li>송영의 끝에 "아멘"이라고 덧붙이는 것은 어떤 신앙적 고백과 확신을 표현합니까?</li>
                </ul>
            </section>

        </main>
        
        <div id="player"></div>

        <footer class="text-center text-sm text-gray-500 mt-12 py-4 border-t">
            교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.
        </footer>

    </div>

    <script>
        // YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        let playerState;

        const audioToggleButton = document.getElementById('audio-toggle');
        const buttonText = document.getElementById('button-text');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        // YouTube API가 준비되면 이 함수가 호출됨
        function onYouTubeIframeAPIReady() {
            // 플레이어는 버튼 클릭 시 생성되므로 여기서는 비워둠
        }

        function onPlayerReady(event) {
            // 플레이어가 준비되면 즉시 재생
            event.target.playVideo();
        }

        function onPlayerStateChange(event) {
            playerState = event.data;
            updateButtonUI(playerState);
        }

        function updateButtonUI(state) {
            if (state === YT.PlayerState.PLAYING) {
                buttonText.textContent = '일시정지';
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else { // PAUSED, ENDED, CUED 등
                buttonText.textContent = 'AI 요약';
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        }
        
        function extractVideoID(url) {
            // 다양한 YouTube URL 형식에서 비디오 ID를 추출하는 정규식
            const regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (audioToggleButton) {
                audioToggleButton.addEventListener('click', () => {
                    // 플레이어가 있고, 재생 중이거나 버퍼링 중이면 일시정지
                    if (player && (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING)) {
                        player.pauseVideo();
                    } 
                    // 플레이어가 있고, 일시정지 상태이면 다시 재생
                    else if (player && playerState === YT.PlayerState.PAUSED) {
                        player.playVideo();
                    } 
                    // 플레이어가 없는 경우, 새로 생성
                    else {
                        const audioFilePath = '../address/dcaddr.txt';

                        fetch(audioFilePath)
                            .then(response => {
                                if (!response.ok) {
                                    // 404 Not Found 등 파일 접근 실패
                                    throw new Error('404');
                                }
                                return response.text();
                            })
                            .then(fileContent => {
                                if (!fileContent || fileContent.trim() === '') {
                                    alert('유효한 오디오 주소가 파일에 없습니다.');
                                    return;
                                }

                                // 0925 날짜에 해당하는 링크 찾기
                                const lines = fileContent.split('\n');
                                const targetDate = '0925'; // 파일명에서 추출한 날짜
                                let url = '';

                                for (const line of lines) {
                                    if (line.trim().startsWith(targetDate + ' ')) {
                                        url = line.trim().substring(5); // '0925 ' 부분 제거
                                        break;
                                    }
                                }

                                if (!url) {
                                    alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                                    return;
                                }

                                const videoId = extractVideoID(url.trim());

                                if (!videoId) {
                                    alert('유효한 YouTube URL이 아닙니다.');
                                    return;
                                }

                                if (player) {
                                    // 기존 플레이어가 있다면 비디오만 로드
                                    player.loadVideoById(videoId);
                                } else {
                                    // 새 플레이어 생성
                                    player = new YT.Player('player', {
                                        height: '0',
                                        width: '0',
                                        videoId: videoId,
                                        playerVars: {
                                            'playsinline': 1
                                        },
                                        events: {
                                            'onReady': onPlayerReady,
                                            'onStateChange': onPlayerStateChange
                                        }
                                    });
                                }
                            })
                            .catch(error => {
                                if (error.message === '404') {
                                    alert('아직 업로드 전입니다.');
                                } else {
                                    console.error('오디오 파일 로드 중 오류 발생:', error);
                                }
                            });
                    }
                });
            }
        });
    </script>

</body>
</html>
