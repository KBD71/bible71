<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 20일: 둘째 간구에서 구하는 기도</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .infographic-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
        }
        .card-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            margin-bottom: 1rem;
            background-color: #eef2ff; /* indigo-100 */
        }
        .card-icon svg {
            width: 1.75rem;
            height: 1.75rem;
            color: #4f46e5; /* indigo-600 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">둘째 간구에서 구하는 기도</h1>
            <p class="text-md sm:text-lg text-gray-600 mb-4">"나라가 임하시오며"라는 기도는 우리가 죄와 사탄의 지배 아래 있음을 인정하고, 사탄의 나라가 망하며 은혜의 나라(교회)가 확장되고, 마침내 영광의 나라가 속히 임하기를 구하는 것입니다.</p>
            <button id="audio-toggle" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-300 inline-flex items-center space-x-2">
                <svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
                <span id="audio-text">AI 요약</span>
            </button>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m0 0a7.5 7.5 0 101.5-11.494A7.5 7.5 0 0012 17.747zM12 6.253v11.494a7.5 7.5 0 01-1.5-11.494A7.5 7.5 0 0112 6.253z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">대요리문답 제191문</h3>
                <div class="text-gray-700 space-y-2">
                    <p class="font-semibold">문: 둘째 간구에서 우리는 무엇을 위해 기도합니까?</p>
                    <p>답: "나라가 임하시오며"라는 둘째 간구에서 우리는 우리 자신과 모든 인류가 본질상 죄와 사탄의 지배 아래에 있음을 인정하면서, 죄와 사탄의 나라가 망하고, 복음이 온 세상에 전파되며, 유대인들이 부르심을 받고, 이방인의 충만한 수가 들어오며, 교회가 모든 복음 사역자와 규례들을 갖추고, 부패에서 정화되며, 국가 공직자의 칭찬과 지지를 받기 위해 기도합니다. 그리스도의 규례들이 순수하게 시행되고 효력 있게 되어 아직 죄 가운데 있는 자들이 회개하고, 이미 회심한 자들이 견고히 서며, 위로를 받고, 세워지기를 위해 기도합니다. 그리고 그리스도께서 지금 우리의 마음을 통치하시고, 속히 재림하셔서 우리가 그분과 더불어 영원히 왕 노릇할 수 있기를 위해 기도합니다. 아울러 이 목적들이 가장 잘 이루어지도록 그리스도께서 세상 모든 곳에서 그분의 권능의 왕국을 다스리시기를 기뻐하시기를 위해 기도합니다.</p>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 4.5 15 15" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">죄의 나라를 대적함</h3>
                <p class="text-gray-700">이 기도는 먼저 모든 인류가 본성적으로 죄와 사탄의 지배 아래 있음을 인정하는 것에서 시작합니다. 하나님 나라는 사탄의 나라와 대립하므로, 우리는 그리스도의 구속 사역을 의지하여 마귀의 일이 멸망하고 죄와 사탄의 나라가 완전히 무너지기를 간구합니다.</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">은혜의 나라(교회)의 확장</h3>
                <p class="text-gray-700">하나님 나라는 교회를 통해 확장됩니다. 우리는 복음이 온 세상에 전파되어 유대인과 이방인의 충만한 수가 구원받기를 기도해야 합니다. 또한 교회가 신실한 사역자들과 규례들을 갖추고, 부패에서 정화되며, 말씀과 성례가 능력있게 시행되어 영혼을 구원하고 세우도록 기도합니다.</p>
            </section>
            
            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">내면의 통치와 영광의 나라</h3>
                <div class="text-gray-700 space-y-2">
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>현재적 통치:</strong> 신자는 이미 하나님 나라에 속했지만, 여전히 죄와 싸웁니다. 따라서 우리는 그리스도께서 "지금" 우리의 마음을 통치하시고 의지를 굴복시키사, 성화의 삶을 살게 해주시기를 기도해야 합니다.</li>
                        <li><strong>미래적 완성:</strong> 주님의 나라는 그리스도의 재림으로 완성됩니다. 우리는 사탄이 완전히 멸망하고 새 하늘과 새 땅이 임하는 그날, 즉 영광의 나라가 속히 오기를 기도하며, 그때 주님과 함께 영원히 왕 노릇 할 것을 소망합니다.</li>
                    </ul>
                </div>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">적용 질문</h3>
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                    <li>둘째 간구를 드릴 때, 여러분 자신의 어떤 본성적 상태를 인정하며 기도합니까?</li>
                    <li>교회의 규례(말씀, 성례, 권징)가 순수하고 능력 있게 시행되기를 바라는 기도가 어떻게 "주님의 나라가 임하기를" 바라는 기도가 될 수 있습니까?</li>
                    <li>여러분은 지금 하나님 나라에 참여하고 있습니까? "그리스도께서 지금 우리의 마음을 통치하신다"는 것은 이미 임한 하나님 나라와 장차 올 하나님 나라 사이의 어떤 관계를 보여줍니까?</li>
                    <li>복음 사역자들이 성령의 충만한 인도를 받아 직무를 감당하도록 기도하는 것이 왜 하나님의 나라가 임하기를 바라는 기도가 되는지 오늘 배운 바를 통해 설명해 보십시오. 이를 위해 기도해 오셨습니까?</li>
                </ol>
            </section>

        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <div id="player" class="hidden"></div>

    <script>
        // 1. YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var videoId = null;

        const audioToggleButton = document.getElementById('audio-toggle');
        const audioIcon = document.getElementById('audio-icon');
        const audioText = document.getElementById('audio-text');
        
        const playIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
        const pauseIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;

        // 2. YouTube 플레이어 생성 함수
        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // 3. API 로드 완료 후 실행될 콜백 (API가 자동으로 호출)
        function onYouTubeIframeAPIReady() {
            // 이 함수는 API가 로드되면 자동으로 호출됩니다.
        }

        // 4. 플레이어 준비 완료 시 실행
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5. 플레이어 상태 변경 시 실행 (재생, 일시정지 등)
        function onPlayerStateChange(event) {
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    audioText.textContent = '일시정지';
                    audioIcon.innerHTML = pauseIconSVG;
                    break;
                case YT.PlayerState.PAUSED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    break;
                case YT.PlayerState.ENDED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    player.seekTo(0);
                    player.stopVideo();
                    break;
            }
        }
        
        // 6. 비디오 ID 추출 함수
        function extractVideoId(url) {
            if (!url) return null;
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        // 7. 페이지 로드 완료 후 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', () => {
            audioToggleButton.addEventListener('click', async () => {
                if (!player) {
                    try {
                        const response = await fetch('../address/0920.txt');
                        if (!response.ok) {
                            throw new Error('file not found');
                        }
                        
                        const fullUrl = await response.text();
                        if (!fullUrl.trim()) {
                            alert('유효한 오디오 주소가 파일에 없습니다.');
                            return;
                        }
                        
                        videoId = extractVideoId(fullUrl);
                        if (!videoId) {
                            alert('유효한 YouTube URL이 아닙니다.');
                            return;
                        }

                        createPlayer(videoId);

                    } catch (error) {
                        if (error.message === 'file not found') {
                            alert('아직 업로드 전입니다.');
                        } else {
                            console.error('오디오 파일 로드 오류:', error);
                        }
                    }
                } else {
                    const playerState = player.getPlayerState();
                    if (playerState === YT.PlayerState.PLAYING) {
                        player.pauseVideo();
                    } else {
                        player.playVideo();
                    }
                }
            });
        });
    </script>
</body>
</html>
