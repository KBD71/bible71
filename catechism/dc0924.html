<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 24일: 여섯째 간구에서 구하는 기도</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .infographic-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
        }
        .card-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            margin-bottom: 1rem;
            background-color: #eef2ff; /* indigo-100 */
        }
        .card-icon svg {
            width: 1.75rem;
            height: 1.75rem;
            color: #4f46e5; /* indigo-600 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">여섯째 간구에서 구하는 기도</h1>
            <p class="text-md sm:text-lg text-gray-600 mb-4">여섯째 간구는, 하나님께서 죄의 유혹에 빠지지 않도록 지켜주시거나, 유혹을 당할 때에는 우리를 도우시고 구원해주시며, 궁극적으로 모든 악에서 완전히 해방시켜 주시기를 구하는 기도입니다.</p>
            <button id="audio-toggle" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-300 inline-flex items-center space-x-2">
                <svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
                <span id="audio-text">AI 요약</span>
            </button>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m0 0a7.5 7.5 0 101.5-11.494A7.5 7.5 0 0012 17.747zM12 6.253v11.494a7.5 7.5 0 01-1.5-11.494A7.5 7.5 0 0112 6.253z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">대요리문답 제195문</h3>
                <div class="text-gray-700 space-y-2">
                    <p class="font-semibold">문: 여섯째 간구에서 우리는 무엇을 위해 기도합니까?</p>
                    <p>답: "우리를 시험에 들게 하지 마시옵고, 다만 악에서 구하시옵소서"라는 여섯째 간구에서 우리는, 지혜로우시고 의로우시며 은혜로우신 하나님께서 거룩한 목적들을 위하여 우리가 유혹의 공격을 받아 잠시 사로잡히는 일이 있도록 정하실 수 있음을 인정합니다. 또한 사탄과 세상과 육신이 강력하게 우리를 함정에 빠뜨리게 함을 인정합니다. 죄 사함을 받은 후에도 우리의 부패성과 연약함과 부주의함으로 유혹에 빠지며, 스스로 저항하거나 회복할 능력이나 의지가 없음을 인정합니다. 따라서 우리는 하나님께서 세상을 통치하사 육을 복종시키시고 사탄을 제어하시며 모든 은혜의 수단을 복되게 하사 우리가 유혹에 빠지지 않게 지켜주시기를 기도합니다. 만일 유혹을 받으면, 성령의 도움으로 견디게 하시며, 넘어질 때 다시 일으켜 회복되게 하시고 유혹을 당함이 성화의 방편이 되게 하시기를 기도합니다. 그리고 우리의 성화와 구원이 완성되고, 사탄이 우리 발아래 짓밟히며, 우리가 죄와 시험과 모든 악으로부터 영원토록 완전히 해방되기를 위해 기도합니다.</p>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">시험의 주권과 근원</h3>
                <p class="text-gray-700">이 기도는 먼저, 하나님께서 그분의 거룩하고 선하신 목적을 위해 우리가 시험에 넘어지는 것을 허용하실 수 있다는 그분의 주권을 인정하는 데서 시작합니다. 이는 넘어진 자에게도 큰 위로가 됩니다. 동시에 우리는 시험의 세 가지 근원, 즉 외부의 '사탄'과 '세상', 그리고 내부의 '육신'(부패한 본성)이 있음을 인정하고 경계해야 합니다.</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">우리의 연약함 인정</h3>
                <p class="text-gray-700">죄 사함을 받은 신자라 할지라도, 우리 안에는 여전히 '부패성, 연약함, 부주의함'이 남아 있습니다. 이 때문에 우리는 유혹에 빠지기 쉽고, 스스로를 유혹에 노출시키기도 합니다. 우리는 자신의 힘으로는 유혹에 저항하거나, 넘어졌을 때 회복하거나, 그 경험을 선용할 능력도 의지도 없음을 고백해야 합니다.</p>
            </section>
            
            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">시험 예방을 위한 간구</h3>
                <p class="text-gray-700">우리는 하나님께서 섭리 가운데 우리를 다스리사, 육신을 복종시키시고, 사탄을 제어하시며, 모든 환경을 주관하여 우리가 죄의 유혹에 빠지지 않도록 지켜주시기를 기도해야 합니다. 또한 말씀과 성례와 같은 은혜의 수단을 복되게 하시고, 우리가 영적으로 깨어 이 수단들을 사용하게 해달라고 간구합니다.</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.82m5.84-2.56a17.96 17.96 0 0 0-5.84-2.56m0 0a17.96 17.96 0 0 1-5.84 2.56m5.84-2.56V4.72a17.96 17.96 0 0 0-5.84 2.56m5.84 7.38a17.96 17.96 0 0 0 5.84 2.56m-5.84-7.38v5.171a17.96 17.96 0 0 1 5.84 2.56m-5.84-2.56a6 6 0 0 0-7.38-5.84m7.38 5.84a6 6 0 0 1 7.38 5.84m-13.22-7.38a17.96 17.96 0 0 1 5.84-2.56" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">회복과 온전한 구원</h3>
                <p class="text-gray-700">만일 유혹에 빠졌을 때, 성령의 강력한 도움으로 견디게 하시며, 넘어졌을지라도 다시 일으켜 회복시켜 주시기를 기도해야 합니다. 더 나아가 그 실패의 경험조차 우리의 성화의 방편으로 사용되기를 구합니다. 이 기도의 최종 목표는 우리의 성화와 구원이 완성되어, 사탄이 완전히 패배하고, 우리가 모든 악으로부터 영원히 해방되는 것입니다.</p>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">적용 질문</h3>
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                    <li>여섯째 간구에서 시험이 하나님의 섭리 가운데 있음을 인정하는 것은 어떤 의미이며, 이것이 넘어졌을 때 성도에게 주는 위로는 무엇입니까?</li>
                    <li>유혹의 세 가지 근원(사탄, 세상, 육신)은 각각 어떤 방식으로 신자를 공격합니까? 여러분이 겪은 이러한 공격들은 무엇이었으며 어떻게 분별하여 경계하셨습니까?</li>
                    <li>혹시 최근에 유혹에 넘어졌을 때, 회개와 회복을 위해 어떻게 하나님께 나아갔으며, 그 실패를 성화의 기회로 삼으려는 노력을 하고 있습니까?</li>
                    <li>"다만 악에서 구하옵소서"라는 기도에서 궁극적으로 구하는 최종 목표는 무엇입니까? 그 목표를 바라보면서 오늘 어떤 구체적인 거룩함의 싸움을 이어가고 있습니까?</li>
                </ol>
            </section>

        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <div id="player" class="hidden"></div>

    <script>
        // 1. YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var videoId = null;

        const audioToggleButton = document.getElementById('audio-toggle');
        const audioIcon = document.getElementById('audio-icon');
        const audioText = document.getElementById('audio-text');
        
        const playIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
        const pauseIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;

        // 2. YouTube 플레이어 생성 함수
        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // 3. API 로드 완료 후 실행될 콜백 (API가 자동으로 호출)
        function onYouTubeIframeAPIReady() {
            // 이 함수는 API가 로드되면 자동으로 호출됩니다.
        }

        // 4. 플레이어 준비 완료 시 실행
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5. 플레이어 상태 변경 시 실행 (재생, 일시정지 등)
        function onPlayerStateChange(event) {
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    audioText.textContent = '일시정지';
                    audioIcon.innerHTML = pauseIconSVG;
                    break;
                case YT.PlayerState.PAUSED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    break;
                case YT.PlayerState.ENDED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    player.seekTo(0);
                    player.stopVideo();
                    break;
            }
        }
        
        // 6. 비디오 ID 추출 함수
        function extractVideoId(url) {
            if (!url) return null;
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        // 7. 페이지 로드 완료 후 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', () => {
            audioToggleButton.addEventListener('click', async () => {
                if (!player) {
                    try {
                        const response = await fetch('../address/dcaddr.txt');
                        if (!response.ok) {
                            throw new Error('file not found');
                        }

                        const fileContent = await response.text();
                        if (!fileContent.trim()) {
                            alert('유효한 오디오 주소가 파일에 없습니다.');
                            return;
                        }

                        // 0924 날짜에 해당하는 링크 찾기
                        const lines = fileContent.split('\n');
                        const targetDate = '0924'; // 파일명에서 추출한 날짜
                        let fullUrl = '';

                        for (const line of lines) {
                            if (line.trim().startsWith(targetDate + ' ')) {
                                fullUrl = line.trim().substring(5); // '0924 ' 부분 제거
                                break;
                            }
                        }

                        if (!fullUrl) {
                            alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                            return;
                        }
                        
                        videoId = extractVideoId(fullUrl);
                        if (!videoId) {
                            alert('유효한 YouTube URL이 아닙니다.');
                            return;
                        }

                        createPlayer(videoId);

                    } catch (error) {
                        if (error.message === 'file not found') {
                            alert('아직 업로드 전입니다.');
                        } else {
                            console.error('오디오 파일 로드 오류:', error);
                        }
                    }
                } else {
                    const playerState = player.getPlayerState();
                    if (playerState === YT.PlayerState.PLAYING) {
                        player.pauseVideo();
                    } else {
                        player.playVideo();
                    }
                }
            });
        });
    </script>
</body>
</html>
