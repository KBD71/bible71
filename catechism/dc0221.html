<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 2월 21일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body { font-family: 'Pretendard', sans-serif; word-break: keep-all; }
        .prose strong { color: #2563eb; }
        #audio-player-container { display: none; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 antialiased pb-20">

    <!-- Header Area -->
    <header class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <p class="text-sm font-semibold text-blue-600">2월 21일</p>
                <h1 class="text-xl font-bold">타락이 초래한 상태</h1>
            </div>
            <!-- Audio Controller -->
            <div id="audio-control-ui">
                <button id="audio-toggle-btn" disabled class="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-full font-medium transition-all hover:bg-blue-700 disabled:bg-slate-300 disabled:cursor-not-allowed" aria-label="교리 오디오 로딩 중">
                    <span id="btn-icon">
                        <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    </span>
                    <span id="btn-text">로딩 중...</span>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8 space-y-8">
        
        <!-- Audio Player Container (Hidden) -->
        <div id="audio-player-container">
            <div id="youtube-player"></div>
        </div>

        <!-- Section: Catechism -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-800 px-6 py-3">
                    <h2 class="text-white font-bold text-sm">소요리문답 17</h2>
                </div>
                <div class="p-6">
                    <p class="text-blue-600 font-bold mb-2">문 17. 타락은 인류를 어떤 상태에 빠지게 했습니까?</p>
                    <p class="text-slate-700 leading-relaxed font-medium">답: 타락은 인류를 <strong class="text-slate-900">죄와 비참의 상태</strong>에 빠지게 했습니다.</p>
                </div>
            </section>
            <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-800 px-6 py-3">
                    <h2 class="text-white font-bold text-sm">대문답 23</h2>
                </div>
                <div class="p-6">
                    <p class="text-blue-600 font-bold mb-2">문 23. 타락은 인류를 어떤 상태에 빠지게 했습니까?</p>
                    <p class="text-slate-700 leading-relaxed font-medium">답: 타락은 인류를 <strong class="text-slate-900">죄와 비참의 상태</strong>에 빠지게 했습니다.</p>
                </div>
            </section>
        </div>

        <!-- Section: Bible Verses -->
        <section class="bg-indigo-50 rounded-2xl p-6 md:p-8 border border-indigo-100">
            <h3 class="text-indigo-800 font-bold mb-4 flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                말씀 요절
            </h3>
            <div class="space-y-4 text-slate-700 text-sm md:text-base leading-snug">
                <p><strong>로마서 5:12</strong> "그러므로 한 사람으로 말미암아 죄가 세상에 들어오고 죄로 말미암아 사망이 들어왔나니 이와 같이 모든 사람이 죄를 지었으므로 사망이 모든 사람에게 이르렀느니라"</p>
                <p><strong>로마서 3:23</strong> "모든 사람이 죄를 범하였으매 하나님의 영광에 이르지 못하더니"</p>
                <p><strong>창세기 6:5</strong> "여호와께서 사람의 죄악이 세상에 가득함과 그의 마음으로 생각하는 모든 계획이 항상 악할 뿐임을 보시고"</p>
            </div>
        </section>

        <!-- Section: Exposition Cards -->
        <div class="grid grid-cols-1 gap-6">
            
            <!-- Card 1 -->
            <article class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border-l-4 border-blue-500">
                <h3 class="text-xl font-bold mb-4 text-slate-800 underline decoration-blue-100 underline-offset-8">상태의 변화: 원초적 의에서 비참으로</h3>
                <div class="prose max-w-none text-slate-600 leading-relaxed space-y-4">
                    <p>타락 이전 아담과 하와가 누렸던 상태는 <strong class="text-blue-600">순전한(Innocent) 상태</strong>였습니다. 이는 그 어떤 도덕적 흠결이나 죄책도 없는 깨끗한 상태를 의미하며, 신학적으로는 이를 <strong class="text-blue-600">원초적 의(Original Righteousness)</strong>의 상태라고 부릅니다.</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li>이 원초적 의의 상태에서 인간은 하나님과 온전한 교제를 나누며 최상의 복을 누렸습니다.</li>
                        <li>그러나 불순종의 죄를 범함과 동시에 인간은 이 고귀한 상태를 상실하고 <strong class="text-blue-600">비참의 상태</strong>로 전락하였습니다.</li>
                        <li>여기서 <strong>죄는 비참의 원인</strong>이며, <strong>비참은 죄로 인한 필연적 결과</strong>임을 기억해야 합니다.</li>
                    </ul>
                </div>
            </article>

            <!-- Card 2 -->
            <article class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border-l-4 border-amber-500">
                <h3 class="text-xl font-bold mb-4 text-slate-800 underline decoration-amber-100 underline-offset-8">비참의 본질: 하나님과의 관계 단절</h3>
                <div class="prose max-w-none text-slate-600 leading-relaxed space-y-4">
                    <p>우리가 겪는 인생의 비참함은 단순한 물질적 부족이나 육체적 고통에 그치지 않습니다. 비참의 가장 핵심적인 본질은 <strong class="text-blue-600">최고의 선이자 복의 근원이신 하나님과의 관계 단절</strong>에 있습니다.</p>
                    <ul class="list-disc pl-5 space-y-2">
                        <li>인간은 하나님 안에서만 참된 만족을 얻도록 창조되었습니다.</li>
                        <li>하나님을 떠난 인간은 영적인 공허함과 심판의 두려움 속에 살게 되며, 이것이 바로 모든 고통의 뿌리가 됩니다.</li>
                        <li>따라서 진정한 해법은 환경의 변화가 아니라 <strong>죄의 문제를 해결하여 하나님께 돌아가는 것</strong>입니다.</li>
                    </ul>
                </div>
            </article>

            <!-- Card 3 -->
            <article class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border-l-4 border-emerald-500">
                <h3 class="text-xl font-bold mb-4 text-slate-800 underline decoration-emerald-100 underline-offset-8">세상의 철학 vs 성경의 진단</h3>
                <div class="prose max-w-none text-slate-600 leading-relaxed space-y-4">
                    <p>인생의 비참함을 해결하기 위해 세상의 종교와 철학은 다양한 답을 제시하지만, 성경의 진단과는 근본적으로 다릅니다.</p>
                    <ul class="space-y-4">
                        <li class="bg-slate-50 p-4 rounded-xl">
                            <span class="font-bold text-emerald-700">[불교의 해법]</span><br>
                            인생의 고통을 <strong>욕망</strong>에서 기인한 것으로 보며, 스스로 욕심을 비우는 <strong>무소욕의 수양</strong>을 통해 평화를 얻으라고 가르칩니다. 이는 비참의 원인을 인간 내부의 감정 문제로 국한시킨 것입니다.
                        </li>
                        <li class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                            <span class="font-bold text-blue-700">[성경의 진단]</span><br>
                            인생의 고통은 마음의 수양으로 해결될 문제가 아니라 <strong>죄(Sin)</strong>에서 기인한 것입니다. 아담 한 사람의 범죄로 죄가 세상에 들어왔고, 그 결과로 사망과 비참이 모든 인류에게 미치게 된 것입니다.
                        </li>
                    </ul>
                </div>
            </article>

            <!-- Card 4 -->
            <article class="bg-white p-6 md:p-8 rounded-2xl shadow-sm border-l-4 border-rose-500">
                <h3 class="text-xl font-bold mb-4 text-slate-800 underline decoration-rose-100 underline-offset-8">결론: 오직 구원만이 답이다</h3>
                <div class="prose max-w-none text-slate-600 leading-relaxed">
                    <p>모든 사람이 죄를 범하여 <strong class="text-blue-600">하나님의 영광</strong>에 이르지 못하게 되었습니다. 마음의 모든 계획이 항상 악한 상태에 놓인 인류는 스스로의 힘으로는 결코 이 죄와 비참의 늪에서 빠져나올 수 없습니다.</p>
                    <p class="mt-4">우리는 타락이 초래한 이 처참한 상태를 정직하게 직시해야 합니다. 비참의 원인인 <strong>죄의 문제</strong>를 해결받지 못한다면 그 어떤 철학적 위로나 종교적 수양도 일시적인 방편에 불과합니다. 오직 하나님의 자비와 구원의 은혜만이 우리를 이 비참에서 건져낼 수 있습니다.</p>
                </div>
            </article>

        </div>
    </main>

    <!-- Footer -->
    <footer class="max-w-4xl mx-auto px-4 py-12 text-center text-slate-400 text-sm">
        <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
    </footer>

    <!-- JavaScript For Audio Control -->
    <script>
        window.player = null;
        const toggleBtn = document.getElementById('audio-toggle-btn');
        const btnText = document.getElementById('btn-text');
        const btnIcon = document.getElementById('btn-icon');
        const dateKey = "0221"; // 2월 21일

        // YouTube API Loading
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        async function initAudio() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) throw new Error('Network error');
                
                const data = await response.text();
                const lines = data.split('\n');
                const targetLine = lines.find(line => line.trim().startsWith(dateKey));

                if (!targetLine) {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                    return;
                }

                const urlMatch = targetLine.match(/(?:v=|\/v\/|embed\/|youtu\.be\/)([^#&?]*)/);
                if (urlMatch && urlMatch[1]) {
                    const videoId = urlMatch[1];
                    setupYoutubePlayer(videoId);
                } else {
                    showError("오디오 주소 형식이 올바르지 않습니다.");
                }

            } catch (error) {
                showError("데이터를 불러오는 중 오류가 발생했습니다.");
            }
        }

        function setupYoutubePlayer(videoId) {
            window.onYouTubeIframeAPIReady = () => {
                window.player = new YT.Player('youtube-player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });
            };
            if (window.YT && window.YT.Player) {
                window.onYouTubeIframeAPIReady();
            }
        }

        function onPlayerReady() {
            toggleBtn.disabled = false;
            updateUI('paused');
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                updateUI('playing');
            } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                updateUI('paused');
            }
        }

        function updateUI(state) {
            if (state === 'playing') {
                btnText.textContent = "일시정지";
                btnIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;
                toggleBtn.setAttribute('aria-label', '교리 오디오 일시정지');
            } else {
                btnText.textContent = "오디오 듣기";
                btnIcon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
                toggleBtn.setAttribute('aria-label', '교리 오디오 재생');
            }
        }

        function showError(msg) {
            const container = document.getElementById('audio-control-ui');
            container.innerHTML = `<p class="text-xs text-rose-500 font-medium px-4 py-2 border border-rose-200 rounded-lg bg-rose-50">${msg}</p>`;
        }

        toggleBtn.addEventListener('click', () => {
            if (!window.player) return;
            const state = window.player.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                window.player.pauseVideo();
            } else {
                window.player.playVideo();
            }
        });

        initAudio();
    </script>
</body>
</html>
