<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10월 20일: 날마다 읽는 교리</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <div class="max-w-3xl mx-auto p-4 sm:p-6 md:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-900">10월 20일</h1>
            <h2 class="mt-2 text-2xl font-semibold text-gray-700">보이는 교회의 목적과 이를 위한 수단</h2>
        </header>
        <main class="space-y-6">

            <section id="player-container" class="bg-white p-5 rounded-xl shadow-md">
                <div id="player-ui" class="flex items-center justify-between">
                    <h3 class="text-lg font-bold text-gray-800">AI요약 듣기</h3>
                    <button id="play-pause-button"
                        class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center w-32 transition-colors duration-300 ease-in-out disabled:bg-gray-400 disabled:cursor-wait"
                        disabled aria-label="교리 오디오 로딩 중">
                        로딩 중...
                    </button>
                </div>
                <div id="error-message" class="hidden text-center text-gray-600 font-semibold py-4"></div>
                <div id="player" class="hidden"></div>
            </section>

            <!-- 신앙고백서 Card -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                <h3 class="text-xl font-bold mb-4 text-gray-900">신앙고백서 25.3</h3>
                <p class="text-lg leading-relaxed">
                    현세에서 세상 끝 날까지 성도를 모으고 온전하게 하기 위하여 그리스도께서 보이는 보편교회에 하나님의 직분과 말씀과 규례를 주셨다. 그리고 그분 자신의 약속에 따라서 자신의 임재와
                    성령에 의하여 이것들이 그 목적에 효과 있게 하신다.
                </p>
            </div>

            <!-- 교리 해설 Card -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                <h3 class="text-xl font-bold mb-4 text-gray-900">교리 해설</h3>
                <div class="space-y-4 text-lg leading-relaxed">
                    <p>
                        오늘 신앙고백서 25.3은 <strong class="text-blue-600">‘보이는 교회’</strong>의 목적과 그 목적을 이루기 위한 수단에 대해 설명합니다.
                        이는 하나님께서 역사 속에서 교회를 구체적으로 어떻게 세워가시는지 이해하도록 돕습니다. 이를 통해 한편으로는 로마 가톨릭의 성례주의적 교회관을 거부하고, 다른 한편으로는
                        무교회적·반(反)교회적 개인주의를 배격합니다.
                    </p>
                    <p>
                        첫째, 교회의 목적은 <strong class="text-blue-600">“현세에서 세상 끝날까지 성도를 모으고 온전하게 하기 위함”</strong>입니다. 그리스도께서는
                        자신의 양 무리를 ‘보이는 교회’ 안으로 불러 모으십니다(요 10:16). 이는 복음 전파와 선교라는 교회의 활동적 사명을 통해 이루어집니다(행 1:8, 마
                        28:19-20). 교회는 단순히 믿는 자들의 정적인 모임이 아니라, 하나님의 택한 백성을 계속해서 불러 모으는 능동적인 공동체입니다.
                    </p>
                    <p>
                        또한, 교회는 모인 성도들을 <strong class="text-blue-600">“온전하게”</strong> 하는 사명을 가집니다. 여기서 ‘온전하게 한다’는 말은
                        ‘완전히 적합하도록 맞추어 준비하고, 잘못된 것을 바로잡아 회복시킨다’는 의미를 가집니다(갈 6:1). 이는 성도를 죄 사함의 복음으로 불러내어, 훈련하고 성장시켜
                        “그리스도의 장성한 분량이 충만한 데까지 이르게”(엡 4:13) 하는 교육적 사명을 의미합니다. 따라서 성도의 성숙은 개인의 내적 체험에만 의존하는 것이 아니라, 교회의
                        양육과 훈련을 통해 이루어집니다.
                    </p>
                    <p>
                        둘째, 그리스도께서는 교회의 목적 달성을 위해 필요한 수단을 주셨습니다. 교회는 스스로의 힘이 아닌, 그리스도께서 공급하시는 방편을 통해서만 세워지고 유지됩니다.
                        신앙고백서는 세 가지 방편을 제시합니다.
                    </p>
                    <ul class="list-disc list-inside space-y-2 pl-4">
                        <li>
                            <strong class="text-blue-600">하나님의 직분(Ministry)</strong>: 말씀을 전하고 권징을 시행하는 목사, 교사, 장로와 같은
                            직분입니다. 이들은 교회의 행정을 넘어 성도를 가르치고 권면하는 사역을 감당합니다.
                        </li>
                        <li>
                            <strong class="text-blue-600">하나님의 말씀(Oracles)</strong>: 교회에 위탁된, 계시적 권위를 가진 성경 전체를 의미합니다.
                            교회는 직분을 통해 말씀을 보존하고 가르치며 다음 세대에 전수해야 하는 핵심 사명을 가집니다.
                        </li>
                        <li>
                            <strong class="text-blue-600">규례(Ordinances)</strong>: 그리스도께서 제정하신 성례(세례와 성찬)와 예배, 기도, 성도의
                            교제 등 교회의 질서를 위한 실천 지침들을 포함합니다.
                        </li>
                    </ul>
                    <p>
                        이러한 은혜의 외적 방편들을 부정하는 급진적 개인주의나, 방편 자체에 마법적 효력이 있다고 여기는 형식적 성례주의는 모두 비성경적입니다.
                    </p>
                    <p>
                        셋째, 이 방편들이 효과를 내는 것은 <strong class="text-blue-600">“그분 자신의 약속에 따라서 자신의 임재와 성령에 의하여”</strong>
                        이루어집니다. 그리스도께서는 세상 끝 날까지 교회와 함께하시겠다고 약속하셨으며(마 28:20), 이 임재의 약속을 통해 직분, 말씀, 규례가 효과를 발휘하도록 보증하십니다.
                        그러나 결정적으로, 이 모든 방편은 성령의 능력 안에서만 효과를 나타냅니다(고전 2:4-5). 성령의 역사 없이는 말씀도, 성례도 아무런 효력이 없습니다.
                    </p>
                    <p>
                        이러한 가르침은 로마 가톨릭의 성례주의, 즉 <strong class="text-blue-600">‘사효적(ex opere operato)’</strong> 견해를 명백히
                        반대합니다. 로마 가톨릭은 성례가 집행되는 행위 자체로 은혜가 전달된다고 주장하며, 수찬자의 믿음보다는 의식의 정확한 집행을 더 중요시합니다. 이는 성례를 기계적이고
                        미신적인 수단으로 전락시킬 위험이 있습니다. 개혁신앙은 오직 성령께서 믿음 안에서 역사하실 때에만 은혜의 방편들이 우리에게 유익이 된다고 가르칩니다.
                    </p>
                </div>
            </div>



            <!-- Footer -->
            <footer class="text-center text-sm text-gray-500 mt-12 py-4">
                교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.
            </footer>
    </div>

    <script>
        let player;
        const playPauseButton = document.getElementById('play-pause-button');
        const playerUi = document.getElementById('player-ui');
        const errorMessageDiv = document.getElementById('error-message');

        function onYouTubeIframeAPIReady() {
            fetchAudioAddressAndCreatePlayer();
        }

        async function fetchAudioAddressAndCreatePlayer() {
            const today = '1020'; // For generating the static page for Oct 18th
            let todayLine;

            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) {
                    throw new Error('오류: 오디오 주소 파일을 불러오는 데 실패했습니다.');
                }
                const text = await response.text();
                const lines = text.split('\n');
                todayLine = lines.find(line => line.trim().startsWith(today));

                if (!todayLine) {
                    displayError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                    return;
                }

                const url = todayLine.substring(today.length).trim();
                const videoId = parseYouTubeVideoId(url);

                if (!videoId) {
                    throw new Error('오류: 발견된 주소가 유효한 YouTube 주소가 아닙니다.');
                }

                createPlayer(videoId);

            } catch (error) {
                console.error('Audio Player Error:', error);
                displayError(error.message);
            }
        }

        function parseYouTubeVideoId(url) {
            if (!url) return null;
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            return (match && match[1]) ? match[1] : null;
        }

        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: { 'playsinline': 1 },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            playPauseButton.disabled = false;
            playPauseButton.innerHTML = '▶&nbsp;재생';
            playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            playPauseButton.addEventListener('click', togglePlayPause);
        }

        function onPlayerStateChange(event) {
            const isPlaying = (event.data === YT.PlayerState.PLAYING);
            if (isPlaying) {
                playPauseButton.innerHTML = '⏸️&nbsp;일시정지';
                playPauseButton.setAttribute('aria-label', '교리 오디오 일시정지');
            } else {
                playPauseButton.innerHTML = '▶&nbsp;재생';
                playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            }
        }

        function togglePlayPause() {
            if (player && typeof player.getPlayerState === 'function') {
                const playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            }
        }

        function displayError(message) {
            playerUi.classList.add('hidden');
            errorMessageDiv.textContent = message;
            errorMessageDiv.classList.remove('hidden');
        }

        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
</body>

</html>