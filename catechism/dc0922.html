<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 22일: 넷째 간구에서 구하는 기도</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .infographic-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
        }
        .card-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            margin-bottom: 1rem;
            background-color: #eef2ff; /* indigo-100 */
        }
        .card-icon svg {
            width: 1.75rem;
            height: 1.75rem;
            color: #4f46e5; /* indigo-600 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">넷째 간구에서 구하는 기도</h1>
            <p class="text-md sm:text-lg text-gray-600 mb-4">"오늘 우리에게 일용할 양식을 주시옵고"는, 죄로 인해 모든 복을 누릴 권리를 상실했음을 인정하고, 하나님의 값없는 선물로서 합당한 몫의 필요를 구하며, 주신 것을 거룩하고 자족하는 마음으로 누리게 되기를 구하는 기도입니다.</p>
            <button id="audio-toggle" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-300 inline-flex items-center space-x-2">
                <svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
                <span id="audio-text">AI 요약</span>
            </button>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m0 0a7.5 7.5 0 101.5-11.494A7.5 7.5 0 0012 17.747zM12 6.253v11.494a7.5 7.5 0 01-1.5-11.494A7.5 7.5 0 0112 6.253z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">대요리문답 제193문</h3>
                <div class="text-gray-700 space-y-2">
                    <p class="font-semibold">문: 넷째 간구에서 우리는 무엇을 위해 기도합니까?</p>
                    <p>답: "오늘 우리에게 일용할 양식을 주시옵고"라는 넷째 간구에서 우리는, 아담 안에서와 우리 자신의 죄로 말미암아 이 세상의 모든 외적인 복을 누릴 권리를 상실하였으며 이 복들을 전적으로 박탈당하는 것이 마땅하고 우리가 이것들을 사용할 때 그 복들이 우리에게 저주가 된 일에 책임 있음을 인정합니다. 또한 이 복들 자체가 우리를 유지할 수도 없고 우리가 이것들을 받을 공로도 없으며 우리 자신의 노력으로 획득할 수도 없고 다만 불법적으로 이것을 갈망하며 획득하기를 원한다는 것을 인정합니다. 따라서 우리는 우리 자신과 다른 사람들을 위해서, 이들과 우리가 합법적 수단을 사용할 때 하나님의 섭리를 날마다 의지하면서 이 복들을 하나님의 값없는 선물로 받았으므로 그리고 이것이 하나님 아버지의 지혜에 가장 좋은 것으로 여겨지는 만큼 이 복들의 합당한 몫을 누리기를 위해 기도합니다. 그리고 우리가 이 복들을 거룩하고 편리하게 사용하고 이것들로 만족을 누릴 때 이것들이 계속 우리에게 복이 되고, 우리의 현세의 생활 유지와 위로에 반대되는 모든 것에서 우리를 지켜주시기를 위해 기도합니다.</p>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">권리의 상실 인정</h3>
                <p class="text-gray-700">이 기도는 아담의 죄와 우리 자신의 죄로 인해, 본래 하나님께서 주신 외적인 복(음식, 건강 등)을 누릴 모든 권리를 상실했음을 고백하는 데서 시작합니다. 우리는 마땅히 모든 것을 박탈당해야 하며, 심지어 우리가 누리는 것들조차 죄 때문에 저주가 될 수 있음을 인정해야 합니다.</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">전적인 의존 인정</h3>
                <p class="text-gray-700">우리가 구하는 양식 자체는 우리 생명을 보존할 힘이 없습니다. 우리는 그것을 받을 공로도, 자신의 노력으로 얻을 권리도 주장할 수 없습니다. 오히려 우리는 죄로 인해 불법적인 방식으로 그것을 갈망하는 성향이 있습니다. 따라서 우리는 겸손히 하나님의 은혜와 섭리만을 의지해야 합니다.</p>
            </section>
            
            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">구하는 바른 자세</h3>
                <p class="text-gray-700">우리는 자신뿐 아니라 다른 이들을 위해서도 기도해야 합니다. 또한 기도만 하는 것이 아니라 '합법적인 수단'(성실한 노동, 건전한 관리)을 사용하며 하나님의 섭리를 의지해야 합니다. 우리는 부와 가난을 피하고 '합당한 몫'을 구하며 자족하는 마음을 가져야 합니다(잠 30:8).</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">복의 사용과 보호</h3>
                <p class="text-gray-700">우리는 하나님께서 주신 복을 '거룩하고 편리하게' 사용하기를 기도해야 합니다. 여기서 '편리하게(comfortable)'는 사용의 용이성이 아니라, 하나님의 섭리에 감사하며 자족하는 마음을 의미합니다. 또한 도둑, 재난, 탐욕, 게으름 등으로부터 주신 복을 지켜주시도록 보호를 간구해야 합니다.</p>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">적용 질문</h3>
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                    <li>일용할 양식을 구하는 기도가 원죄와 자범죄로 인한 비참한 결과와 연결된다는 사실을 알고 계십니까? 어떤 의미에서 그러합니까?</li>
                    <li>일용할 양식을 구하면서 또한 "합법적인 수단"을 사용할 필요성은 무엇을 교훈합니까?</li>
                    <li>"거룩하고 편리하게 사용한다"는 표현에서 '편리하게'(comfortable)가 의미하는 것은 무엇이며, 왜 단순한 사용의 편리성을 뜻하지 않습니까?</li>
                    <li>하나님께서 주신 외적인 복을 누릴 자격이 본래 자신에게 없음을 인정하고, 그것을 온전히 하나님의 은혜로 받는 마음으로 살아가고 있습니까?</li>
                </ol>
            </section>

        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <div id="player" class="hidden"></div>

    <script>
        // 1. YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var videoId = null;

        const audioToggleButton = document.getElementById('audio-toggle');
        const audioIcon = document.getElementById('audio-icon');
        const audioText = document.getElementById('audio-text');
        
        const playIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
        const pauseIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;

        // 2. YouTube 플레이어 생성 함수
        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // 3. API 로드 완료 후 실행될 콜백 (API가 자동으로 호출)
        function onYouTubeIframeAPIReady() {
            // 이 함수는 API가 로드되면 자동으로 호출됩니다.
        }

        // 4. 플레이어 준비 완료 시 실행
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5. 플레이어 상태 변경 시 실행 (재생, 일시정지 등)
        function onPlayerStateChange(event) {
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    audioText.textContent = '일시정지';
                    audioIcon.innerHTML = pauseIconSVG;
                    break;
                case YT.PlayerState.PAUSED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    break;
                case YT.PlayerState.ENDED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    player.seekTo(0);
                    player.stopVideo();
                    break;
            }
        }
        
        // 6. 비디오 ID 추출 함수
        function extractVideoId(url) {
            if (!url) return null;
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        // 7. 페이지 로드 완료 후 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', () => {
            audioToggleButton.addEventListener('click', async () => {
                if (!player) {
                    try {
                        const response = await fetch('../address/dcaddr.txt');
                        if (!response.ok) {
                            throw new Error('file not found');
                        }

                        const fileContent = await response.text();
                        if (!fileContent.trim()) {
                            alert('유효한 오디오 주소가 파일에 없습니다.');
                            return;
                        }

                        // 0922 날짜에 해당하는 링크 찾기
                        const lines = fileContent.split('\n');
                        const targetDate = '0922'; // 파일명에서 추출한 날짜
                        let fullUrl = '';

                        for (const line of lines) {
                            if (line.trim().startsWith(targetDate + ' ')) {
                                fullUrl = line.trim().substring(5); // '0922 ' 부분 제거
                                break;
                            }
                        }

                        if (!fullUrl) {
                            alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                            return;
                        }
                        
                        videoId = extractVideoId(fullUrl);
                        if (!videoId) {
                            alert('유효한 YouTube URL이 아닙니다.');
                            return;
                        }

                        createPlayer(videoId);

                    } catch (error) {
                        if (error.message === 'file not found') {
                            alert('아직 업로드 전입니다.');
                        } else {
                            console.error('오디오 파일 로드 오류:', error);
                        }
                    }
                } else {
                    const playerState = player.getPlayerState();
                    if (playerState === YT.PlayerState.PLAYING) {
                        player.pauseVideo();
                    } else {
                        player.playVideo();
                    }
                }
            });
        });
    </script>
</body>
</html>
