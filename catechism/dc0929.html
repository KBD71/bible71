<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 29일: 예배 준비와 안식일 준수</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f0f2f5;
            color: #1a202c;
        }
        .infographic-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            padding: 2rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .card-icon {
            flex-shrink: 0;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background-color: #e0e7ff;
            color: #4338ca;
        }
        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e3a8a;
        }
        .catechism-q {
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }
        .catechism-a {
            color: #374151;
            padding-left: 1rem;
            border-left: 3px solid #6366f1;
        }
        .sub-heading {
            font-weight: 700;
            color: #1e40af;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        #player {
            display: none;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-2">예배 준비와 안식일 준수</h1>
            <p class="text-lg md:text-xl text-gray-500">소요리문답 60문, 대요리문답 117문, 신앙고백서 21장 8항</p>
            <div class="mt-6 flex justify-center">
                <button id="audio-toggle" class="flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300">
                    <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span id="button-text">AI 요약</span>
                </button>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>
                    </div>
                    <h2 class="card-title">안식일 준수에 대한 교리</h2>
                </div>
                <div class="space-y-6">
                    <div>
                        <h3 class="font-semibold text-lg text-indigo-700 mb-2">소요리문답 제60문</h3>
                        <p class="catechism-q">문: 안식일을 어떻게 거룩하게 지켜야 합니까?</p>
                        <p class="catechism-a">답: 안식일은 온종일 거룩하게 지켜야 하는데, 심지어 다른 날에는 합법적인 생업이나 오락까지도 행하지 않음으로 거룩하게 쉬어야 합니다. 그리고 부득이한 일과 자비를 베푸는 일에 쓰는 것을 제외하고는, 공적으로 그리고 사적으로 하나님을 예배하는 일에 모든 시간을 사용해야 합니다.</p>
                    </div>
                     <div>
                        <h3 class="font-semibold text-lg text-indigo-700 mb-2">대요리문답 제117문 요약</h3>
                        <p class="catechism-a">대요리문답은 소요리문답의 가르침을 반복하면서, 안식일을 더 자유롭고 적절하게 지키기 위해 "마음을 준비하며, 세상일을 미리 부지런히 절제 있게 정리하고 적절히 처리해야" 함을 덧붙여 강조합니다.</p>
                    </div>
                    <div>
                        <h3 class="font-semibold text-lg text-indigo-700 mb-2">신앙고백서 제21장 8항 요약</h3>
                        <p class="catechism-a">신앙고백서는 위의 가르침을 종합하여, 안식일에는 마음을 준비하고 일상사를 미리 정리한 후, 세상의 생업과 오락에 관한 '일과 말과 생각'까지 그치고 온종일 거룩한 쉼을 지켜야 한다고 가르칩니다. 또한 모든 시간을 공적/사적 예배와 부득이한 일, 그리고 긍휼을 행하는 일에 전념해야 한다고 말합니다.</p>
                    </div>
                </div>
            </section>
            
            <section class="infographic-card">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h2 class="card-title">안식일을 위한 준비</h2>
                </div>
                <div class="space-y-4 text-gray-600">
                    <div>
                        <h3 class="sub-heading">마음의 준비</h3>
                        <p>하나님의 거룩하심과 자비로우심을 묵상하며, 오직 그리스도만이 참된 위로이심을 고백합니다. 성령의 인도하심으로 진리를 깨닫고자 하는 소원과, 예배를 통해 누릴 은혜와 즐거움을 기대하는 마음으로 준비합니다.</p>
                    </div>
                    <div>
                        <h3 class="sub-heading">일상사의 정리</h3>
                        <p>안식일 당일에 세상일로 분주하거나 신경 쓰지 않도록 미리 일상 업무를 정리합니다. 이는 온전히 하나님과 그분이 기뻐하시는 일에 집중하기 위한 실질적인 준비입니다.</p>
                    </div>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M12 14l9-5-9-5-9 5 9 5z"></path><path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20M12 14L8 12"></path></svg>
                    </div>
                    <h2 class="card-title">안식일의 거룩한 쉼</h2>
                </div>
                <div class="space-y-4 text-gray-600">
                    <div>
                        <h3 class="sub-heading">소극적 실천: 멈춤</h3>
                        <p>온종일 세상의 생업과 오락을 그치는 것입니다. 하나님을 예배하는 데 방해가 되기 때문입니다. 더 나아가 이와 관련된 말과 생각까지도 멈춤으로써 마음을 온전히 하나님께로 향하도록 해야 합니다.</p>
                    </div>
                    <div>
                        <h3 class="sub-heading">적극적 실천: 채움</h3>
                        <p>하루 전체 시간을 공적·사적 예배(말씀, 기도, 찬송, 성례 참여 등)로 채워야 합니다. 또한 생명 유지에 꼭 필요한 '부득이한 일'과 이웃을 돕는 '긍휼을 베푸는 일'은 안식일에 허용될 뿐 아니라 마땅히 해야 할 거룩한 활동입니다.</p>
                    </div>
                </div>
            </section>
            
            <section class="infographic-card md:col-span-2">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2M12 12h.01M12 12a2 2 0 100 4 2 2 0 000-4z"/></svg>
                    </div>
                    <h2 class="card-title">적용 질문</h2>
                </div>
                <ul class="list-decimal pl-5 space-y-3 text-gray-700">
                    <li>신앙고백서 21.8이 말하는 안식일의 거룩함은 사람의 거룩함이 아니라 무엇을 통해 실현됩니까? 여러분은 이 거룩함을 위하여 어떻게 안식일을 보내십니까?</li>
                    <li>안식일을 위해 "마음을 합당하게 준비한다"는 것은 어떤 내용과 태도를 포함합니까? 여러분은 주일 예배를 더 깊이 누리기 위해 이번 주에 마음과 일상사를 어떻게 미리 준비하실 계획입니까?</li>
                    <li>신앙고백서가 안식일에 "세상의 생업과 오락에 관한 일과 말과 생각을 그친다"라고 한 이유는 무엇입니까? 여러분에게 있어서 주일에 세상의 일과 오락에 관한 말과 생각까지 멈추는 데 방해가 되는 습관이나 환경은 무엇이며, 이를 어떻게 개선하시겠습니까?</li>
                    <li>안식일에 허용되는 "부득이한 일"과 "긍휼을 행하는 일"에는 어떤 구체적인 사례들이 있습니까? 주일에 긍휼을 베풀 기회가 주어진다면, 이번 주에 구체적으로 누구에게 어떤 도움을 실천하시겠습니까?</li>
                </ul>
            </section>

        </main>
        
        <div id="player"></div>

        <footer class="text-center text-sm text-gray-500 mt-12 py-4 border-t">
            교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.
        </footer>

    </div>

    <script>
        // YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        let playerState;

        const audioToggleButton = document.getElementById('audio-toggle');
        const buttonText = document.getElementById('button-text');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        // YouTube API가 준비되면 이 함수가 호출됨
        function onYouTubeIframeAPIReady() {
            // 플레이어는 버튼 클릭 시 생성되므로 여기서는 비워둠
        }

        function onPlayerReady(event) {
            // 플레이어가 준비되면 즉시 재생
            event.target.playVideo();
        }



        function onPlayerStateChange(event) {
            playerState = event.data;
            updateButtonUI(playerState);
        }

        function updateButtonUI(state) {
            if (state === YT.PlayerState.PLAYING) {
                buttonText.textContent = '일시정지';
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else { // PAUSED, ENDED, CUED 등
                buttonText.textContent = 'AI 요약';
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        }
        
        function extractVideoID(url) {
            // 다양한 YouTube URL 형식에서 비디오 ID를 추출하는 정규식
            const regex = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (audioToggleButton) {
                audioToggleButton.addEventListener('click', () => {
                    // 플레이어가 있고, 재생 중이거나 버퍼링 중이면 일시정지
                    if (player && (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING)) {
                        player.pauseVideo();
                    } 
                    // 플레이어가 있고, 일시정지 상태이면 다시 재생
                    else if (player && playerState === YT.PlayerState.PAUSED) {
                        player.playVideo();
                    } 
                    // 플레이어가 없는 경우, 새로 생성
                    else {
                        const audioFilePath = '../address/dcaddr.txt';

                        fetch(audioFilePath)
                            .then(response => {
                                if (!response.ok) {
                                    // 404 Not Found 등 파일 접근 실패
                                    throw new Error('404');
                                }
                                return response.text();
                            })
                            .then(fileContent => {
                                if (!fileContent || fileContent.trim() === '') {
                                    alert('유효한 오디오 주소가 파일에 없습니다.');
                                    return;
                                }

                                // 0929 날짜에 해당하는 링크 찾기
                                const lines = fileContent.split('\n');
                                const targetDate = '0929'; // 파일명에서 추출한 날짜
                                let url = '';

                                for (const line of lines) {
                                    if (line.trim().startsWith(targetDate + ' ')) {
                                        url = line.trim().substring(5); // '0929 ' 부분 제거
                                        break;
                                    }
                                }

                                if (!url) {
                                    alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                                    return;
                                }

                                const videoId = extractVideoID(url.trim());

                                if (!videoId) {
                                    alert('유효한 YouTube URL이 아닙니다.');
                                    return;
                                }

                                if (player) {
                                    // 기존 플레이어가 있다면 비디오만 로드
                                    player.loadVideoById(videoId);
                                } else {
                                    // 새 플레이어 생성
                                    player = new YT.Player('player', {
                                        height: '0',
                                        width: '0',
                                        videoId: videoId,
                                        playerVars: {
                                            'playsinline': 1
                                        },
                                        events: {
                                            'onReady': onPlayerReady,
                                            'onStateChange': onPlayerStateChange
                                        }
                                    });
                                }
                            })
                            .catch(error => {
                                if (error.message === '404') {
                                    alert('아직 업로드 전입니다.');
                                } else {
                                    console.error('오디오 파일 로드 중 오류 발생:', error);
                                }
                            });
                    }
                });
            }
        });
    </script>

</body>
</html>
