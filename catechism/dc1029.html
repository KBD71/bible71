<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10월 29일 | 그리스도와 함께하는 영광의 교제</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-4xl px-4 py-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900">10월 29일</h1>
            <p class="text-xl text-gray-600 mt-2">그리스도와 함께하는 영광의 교제</p>
        </header>

        <section id="audio-player-section" class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4">AI요약 듣기</h2>
            <div id="player-ui" class="flex items-center space-x-4">
                <button id="play-pause-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full w-28 transition-opacity duration-300" aria-label="교리 오디오 재생/일시정지" disabled>
                    로딩 중...
                </button>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div id="player" class="hidden"></div>
            <div id="error-message" class="hidden text-red-500 mt-4"></div>
        </section>
        
        <section class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">대요리문답 82</h2>
            <div class="space-y-4 text-lg leading-relaxed">
                <p><strong class="font-bold">문:</strong> 보이지 않는 교회의 지체들이 그리스도와 함께하는 영광의 교제는 무엇입니까?</p>
                <p><strong class="font-bold">답:</strong> 보이지 않는 교회의 지체들이 그리스도와 함께하는 영광의 교제는 현세에도 있고 죽음 후에도 바로 있으며, 부활과 심판 날에 마침내 완성됩니다.</p>
            </div>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">교리 해설</h2>
            <div class="space-y-6 text-lg leading-relaxed">
                <p>
                    성도의 교제는 현세의 <strong class="text-blue-600">‘보이는 교회’</strong>에서 누리는 은혜의 교제에서 그치지 않고, <strong class="text-blue-600">‘보이지 않는 교회’</strong>의 지체들이 그리스도와 함께하는 영광의 교제로 이어집니다. 은혜의 교제는 이미 시작된 영광이며, 영광의 교제는 완성된 은혜입니다. 대요리문답 82항은 이 영광의 교제를 세 단계로 설명합니다.
                </p>
                
                <div>
                    <strong class="text-xl block text-gray-900">(1) 현세에서 누리는 영광의 교제</strong>
                    <div class="pl-4 mt-2 space-y-3 border-l-4 border-blue-100">
                        <p>성도는 이 세상에서도 장차 올 완전한 영광의 '첫 열매'를 미리 맛봅니다. 이 첫 열매에는 성령의 내주와 보증, 성령으로 말미암은 성화(고후 3:18), 영생의 기쁨과 평강, 구원의 확신, 하나님을 '아빠 아버지'라 부르는 자녀의 행복 등이 포함됩니다. 이러한 영광은 <strong class="text-blue-600">‘보이는 교회’</strong>를 통해 주어지지만, 그 안의 가라지가 아닌 오직 <strong class="text-blue-600">‘보이지 않는 교회’</strong>의 참된 지체들만이 누릴 수 있습니다.</p>
                    </div>
                </div>

                <div>
                    <strong class="text-xl block text-gray-900">(2) 죽음 직후에 누리는 영광의 교제</strong>
                    <div class="pl-4 mt-2 space-y-3 border-l-4 border-blue-100">
                        <p><strong class="text-blue-600">‘보이지 않는 교회’</strong>의 지체들은 죽음을 맞이하면, 그 영혼이 즉시 온전하게 되어 그리스도의 임재의 영광 안으로 들어갑니다. 그곳에서 영혼은 부활의 날까지 그리스도와 함께 안식하며 교제합니다. 바울 사도가 "차라리 세상을 떠나서 그리스도와 함께 있는 것이 훨씬 더 좋은 일이라"(빌 1:23)고 고백한 것이 바로 이 상태입니다.</p>
                        <p>“죽음 후에도 바로”라는 표현은 영혼이 연옥에서 정화된다는 로마 가톨릭의 교리나, 최후 심판 때까지 영혼이 무의식 상태로 잠들어 있다는 혼수설(魂睡說)을 명확히 부정합니다. 예수님께서 십자가 위의 강도에게 하신 "오늘 네가 나와 함께 낙원에 있으리라"(눅 23:43)는 약속이 이를 확증합니다.</p>
                    </div>
                </div>

                <div>
                    <strong class="text-xl block text-gray-900">(3) 부활과 심판 날에 완성되는 영광의 교제</strong>
                    <div class="pl-4 mt-2 space-y-3 border-l-4 border-blue-100">
                        <p>마지막 날 주님께서 재림하실 때, 모든 성도는 완성된 영광의 교제를 누리게 됩니다. 이 교제는 이전 단계들과 연속적이지만 '완성'이라는 점에서 큰 차이가 있습니다. 영화롭게 된 몸이 온전히 거룩하게 된 영혼과 다시 결합하고, 온 우주가 새 하늘과 새 땅으로 변화되며, 성도는 그리스도의 심판과 통치에 참여하게 됩니다. 이것이 성도가 현세에서부터 시작하여 마침내 누리게 될 영광의 최종 모습입니다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">적용 질문</h2>
            <ol class="list-decimal list-inside space-y-4 text-lg leading-relaxed">
                <li>대요리문답 82항이 말하는 현세에서 성도가 누리는 “그리스도와 함께하는 영광의 교제”는 어떤 의미이며, 그 특징은 무엇입니까?</li>
                <li>왜 대요리문답 82항은 영광의 교제를 "보이는 교회의 지체들"이 아니라 "보이지 않는 교회의 지체들"이 누린다고 진술합니까?</li>
                <li>성도의 영혼이 죽은 후 즉시 누리는 영광의 교제는 어떤 상태이며, 이것이 로마 가톨릭의 연옥 교리나 혼수설과 어떻게 다릅니까?</li>
                <li>마지막 날 부활과 심판 때 이루어지는 영광의 교제는 현세와 죽음 이후의 교제와 어떻게 연결되며, 어떤 점에서 완성된 교제라고 할 수 있습니까?</li>
            </ol>
        </section>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </div>

    <script>
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        let progressInterval;
        const playPauseButton = document.getElementById('play-pause-button');
        const progressBar = document.getElementById('progress-bar');
        const errorMessageDiv = document.getElementById('error-message');
        const playerUi = document.getElementById('player-ui');

        function onYouTubeIframeAPIReady() {
            loadVideoForToday();
        }

        async function loadVideoForToday() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) {
                    throw new Error('오디오 주소 파일을 불러올 수 없습니다.');
                }
                const data = await response.text();
                const lines = data.split('\n');
                
                const todayKey = '1029';

                const todayLine = lines.find(line => line.startsWith(todayKey + '='));
                
                if (!todayLine) {
                    throw new Error('not_uploaded');
                }

                const url = todayLine.split('=')[1].trim();
                const videoId = extractVideoID(url);

                if (!videoId) {
                    throw new Error('유효하지 않은 YouTube 주소입니다.');
                }
                
                player = new YT.Player('player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

            } catch (error)
                playerUi.classList.add('hidden');
                errorMessageDiv.classList.remove('hidden');
                if (error.message === 'not_uploaded') {
                    errorMessageDiv.textContent = '오늘의 AI요약 음성은 아직 업로드 전입니다.';
                } else {
                    errorMessageDiv.textContent = '오디오를 불러오는 중 오류가 발생했습니다.';
                    console.error('Error loading video:', error);
                }
            }
        }

        function extractVideoID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function onPlayerReady(event) {
            playPauseButton.disabled = false;
            playPauseButton.textContent = '재생';
            playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            
            playPauseButton.addEventListener('click', togglePlayPause);
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                playPauseButton.textContent = '일시정지';
                playPauseButton.setAttribute('aria-label', '교리 오디오 일시정지');
                progressInterval = setInterval(updateProgressBar, 1000);
            } else {
                playPauseButton.textContent = '재생';
                playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
                clearInterval(progressInterval);
                if (event.data === YT.PlayerState.ENDED) {
                    progressBar.style.width = '100%';
                }
            }
        }

        function togglePlayPause() {
            if (player.getPlayerState() === YT.PlayerState.PLAYING) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        }

        function updateProgressBar() {
            if (player && player.getDuration) {
                const currentTime = player.getCurrentTime();
                const duration = player.getDuration();
                const progress = (currentTime / duration) * 100;
                progressBar.style.width = progress + '%';
            }
        }
    </script>

</body>
</html>
