<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9월 17일: '주님께서 가르치신 기도'의 구성</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .infographic-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out;
        }
        .infographic-card:hover {
            transform: translateY(-5px);
        }
        .card-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 3rem;
            height: 3rem;
            border-radius: 9999px;
            margin-bottom: 1rem;
            background-color: #eef2ff; /* indigo-100 */
        }
        .card-icon svg {
            width: 1.75rem;
            height: 1.75rem;
            color: #4f46e5; /* indigo-600 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">

        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-2">'주님께서 가르치신 기도'의 구성</h1>
            <p class="text-md sm:text-lg text-gray-600 mb-4">대요리문답 188문은 '주님의 기도'가 머리말, 간구, 결론의 세 부분으로 구성되어 있음을 가르칩니다. 이 구조는 기도의 대상, 내용, 목적에 대한 본질적 교훈을 담고 있습니다.</p>
            <button id="audio-toggle" class="bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-300 inline-flex items-center space-x-2">
                <svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                </svg>
                <span id="audio-text">AI 요약</span>
            </button>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m0 0a7.5 7.5 0 101.5-11.494A7.5 7.5 0 0012 17.747zM12 6.253v11.494a7.5 7.5 0 01-1.5-11.494A7.5 7.5 0 0112 6.253z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">대요리문답 제188문</h3>
                <div class="text-gray-700 space-y-2">
                    <p class="font-semibold">문: '주님의 기도'는 몇 부분으로 구성되어 있습니까?</p>
                    <p>답: '주님의 기도'는 세 부분으로 구성되어 있으니, 머리말과 간구와 결론입니다.</p>
                </div>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">1. 머리말: 기도의 대상과 자세</h3>
                <p class="text-gray-700">"하늘에 계신 우리 아버지여"라는 머리말은 기도를 받으시는 분이 하나님이심을 고백하며 시작하게 합니다. 이는 기도자가 마땅히 가져야 할 경건한 자세를 가르치며, 자신의 필요만을 경솔하게 늘어놓는 잘못을 방지합니다.</p>
            </section>

            <section class="infographic-card">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">2. 간구: 하나님과 우리를 위함</h3>
                <div class="text-gray-700 space-y-2">
                    <p>간구는 두 부분으로 나뉩니다.</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>하나님을 위한 간구:</strong> 이름, 나라, 뜻을 구하며 기도의 첫 목적이 하나님의 영광임을 보여줍니다.</li>
                        <li><strong>우리를 위한 간구:</strong> 일용할 양식, 죄 사함, 시험에서의 구원을 구하며 삶의 모든 영역에서 하나님의 도우심이 필요함을 고백합니다.</li>
                    </ul>
                </div>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9a9 9 0 1 1 9 0Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 15.75h.008v.008H12v-.008Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a3 3 0 0 0 0 6h.008a3 3 0 0 0 0-6H12Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3.75a2.25 2.25 0 0 1 2.25 2.25v.75A2.25 2.25 0 0 1 12 9h-.008A2.25 2.25 0 0 1 9.75 6.75v-.75A2.25 2.25 0 0 1 12 3.75Z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">3. 결론: 기도의 목적과 확신</h3>
                <p class="text-gray-700">"나라와 권세와 영광이 아버지께 영원히 있사옵나이다. 아멘"이라는 결론은 모든 간구가 궁극적으로 하나님의 영광을 위한 것임을 재확인합니다. 이는 단순한 간구를 넘어, 하나님 나라의 영원함에 대한 선언이자 영광의 찬송입니다. '아멘'은 기도를 들으시는 하나님에 대한 굳은 신뢰와 확신의 고백입니다.</p>
            </section>

            <section class="infographic-card md:col-span-2">
                <div class="card-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold mb-2 text-gray-900">적용 질문</h3>
                <ol class="list-decimal list-inside text-gray-700 space-y-2">
                    <li>'주님의 기도'의 세 구성 부분은 각각 무엇입니까? 기도가 이러한 세 구성 부분을 가져야 할 필요가 있겠습니까?</li>
                    <li>하나님에 대한 간구와 우리 자신에 대한 간구는 각각 어떤 세 가지 내용을 포함합니까? 하나님에 대한 간구가 우선한다는 사실이 주는 교훈은 무엇입니까?</li>
                    <li>기도를 시작할 때 먼저 하나님의 이름과 나라와 뜻을 구하십니까, 아니면 자신의 필요를 먼저 구하십니까? 오늘 배운 내용은 어떤 순서를 교훈합니까?</li>
                    <li>"하나님의 나라와 권세와 영광이 영원히 있사옵나이다. 아멘"이라고 기도할 때, 이 사실에 대한 확신의 찬양을 고백합니까, 아니면 습관적인 맺음말로 마칩니까?</li>
                </ol>
            </section>

        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <div id="player" class="hidden"></div>

    <script>
        // 1. YouTube IFrame Player API 비동기 로드
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var videoId = null;

        const audioToggleButton = document.getElementById('audio-toggle');
        const audioIcon = document.getElementById('audio-icon');
        const audioText = document.getElementById('audio-text');
        
        const playIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
        const pauseIconSVG = `<svg id="audio-icon" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;

        // 2. YouTube 플레이어 생성 함수
        function createPlayer(videoId) {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }
        
        // 3. API 로드 완료 후 실행될 콜백 (API가 자동으로 호출)
        function onYouTubeIframeAPIReady() {
            // 이 함수는 API가 로드되면 자동으로 호출됩니다.
            // 버튼 클릭 시 플레이어를 생성하도록 로직을 변경합니다.
        }

        // 4. 플레이어 준비 완료 시 실행
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5. 플레이어 상태 변경 시 실행 (재생, 일시정지 등)
        function onPlayerStateChange(event) {
            switch(event.data) {
                case YT.PlayerState.PLAYING:
                    audioText.textContent = '일시정지';
                    audioIcon.innerHTML = pauseIconSVG;
                    break;
                case YT.PlayerState.PAUSED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    break;
                case YT.PlayerState.ENDED:
                    audioText.textContent = 'AI 요약';
                    audioIcon.innerHTML = playIconSVG;
                    player.seekTo(0);
                    player.stopVideo();
                    break;
            }
        }
        
        // 6. 비디오 ID 추출 함수
        function extractVideoId(url) {
            if (!url) return null;
            // 정규식: youtube.com/watch?v=VIDEO_ID 또는 youtu.be/VIDEO_ID 등 다양한 형식 지원
            const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        // 7. 페이지 로드 완료 후 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', () => {
            audioToggleButton.addEventListener('click', async () => {
                // 플레이어가 아직 생성되지 않은 경우
                if (!player) {
                    try {
                        const response = await fetch('../address/0917.txt');
                        if (!response.ok) {
                            throw new Error('file not found');
                        }
                        
                        const fullUrl = await response.text();
                        if (!fullUrl.trim()) {
                            alert('유효한 오디오 주소가 파일에 없습니다.');
                            return;
                        }
                        
                        videoId = extractVideoId(fullUrl);
                        if (!videoId) {
                            alert('유효한 YouTube URL이 아닙니다.');
                            return;
                        }

                        createPlayer(videoId);

                    } catch (error) {
                        if (error.message === 'file not found') {
                            alert('아직 업로드 전입니다.');
                        } else {
                            console.error('오디오 파일 로드 오류:', error);
                        }
                    }
                } else {
                    // 플레이어가 이미 생성된 경우, 상태에 따라 재생/일시정지 토글
                    const playerState = player.getPlayerState();
                    if (playerState === YT.PlayerState.PLAYING) {
                        player.pauseVideo();
                    } else {
                        player.playVideo();
                    }
                }
            });
        });
    </script>
</body>
</html>
