<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10월 27일 | 성도가 행하여야 할 교제의 의무</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto max-w-3xl px-4 py-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900">10월 27일</h1>
            <p class="text-xl text-gray-600 mt-2">성도가 행하여야 할 교제의 의무</p>
        </header>

        <section id="audio-player-section" class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4">AI요약 듣기</h2>
            <div id="player-ui" class="flex items-center space-x-4">
                <button id="play-pause-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full w-28 transition-opacity duration-300" aria-label="교리 오디오 재생/일시정지" disabled>
                    로딩 중...
                </button>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div id="player" class="hidden"></div>
            <div id="error-message" class="hidden text-red-500 mt-4"></div>
        </section>
        
        <section class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">신앙고백서 26.2</h2>
            <div class="space-y-4 text-lg leading-relaxed">
                <p>신앙고백을 할 때, 성도는 하나님을 예배하는 일과, 서로의 덕을 세우는 데 도움이 되는 영적 봉사를 행하는 일에 있어 거룩한 친교와 교제를 지속할 의무를 지닌다. 또한 자신들의 다양한 능력과 필요에 따라 육적인 일들에서 서로를 도울 의무를 지닌다. 이러한 교제는 하나님께서 기회를 주시는 대로 각 처에서 주 예수님의 이름을 부르는 모든 사람에게 확장되어야 한다.</p>
            </div>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">교리 해설</h2>
            <div class="space-y-6 text-lg leading-relaxed">
                <p>
                    신앙고백서는 성도의 교제가 구체적인 의무를 통해 실현됨을 가르칩니다. 이 교제는 영적 차원을 넘어 실제적인 도움을 포함하며, 그 범위는 지역 교회를 넘어 보편 교회로 확장되어야 합니다.
                </p>
                
                <ol class="list-decimal list-inside space-y-4">
                    <li>
                        <strong class="text-blue-600">거룩한 친교와 교제를 지속할 의무:</strong>
                        신앙을 고백하여 <strong class="text-blue-600">‘보이는 교회’</strong>의 구성원이 되는 것은 곧 그리스도와 연합하는 것이므로, 필연적으로 다른 성도들과의 교제 의무가 따릅니다. 교회 생활을 개인적인 예배만으로 국한하는 것은 신자의 본분을 다하지 못하는 것입니다.
                    </li>
                    <li>
                        <strong class="text-blue-600">하나님을 예배하는 일:</strong>
                        성도는 자신이 속한 교회에서 다른 성도들과 함께 <strong class="text-blue-600">공적 예배</strong>에 참여할 의무가 있습니다. 공적 예배는 하나님과 개인의 교제일 뿐만 아니라, 모든 성도가 함께 모여 말씀을 듣고, 성례에 참여하며, 기도하는 본질적인 교제의 시간입니다.
                    </li>
                    <li>
                        <strong class="text-blue-600">서로의 덕을 세우는 영적 봉사:</strong>
                        성도는 자신이 받은 은사와 은혜를 사용하여 서로를 가르치고, 격려하며, 위로하고, 권면함으로써 서로의 덕을 세워야 합니다. 이를 통해 교회 공동체 전체의 신앙 성장에 기여할 책임을 가집니다.
                    </li>
                    <li>
                        <strong class="text-blue-600">육적인 일에서 서로를 돕는 의무:</strong>
                        성도의 교제는 영적인 영역에만 머무르지 않고 물질적인 도움으로 확장됩니다. 초대교회가 각 사람의 필요에 따라 재산을 나누었던 것처럼(행 2:44-45), 성도는 자발적인 사랑으로 서로의 물질적 필요를 채워야 합니다.
                    </li>
                    <li>
                        <strong class="text-blue-600">교제의 보편적 확장:</strong>
                        성도의 교제는 특정 지역이나 가까운 사람에게만 국한되지 않습니다. 하나님께서 기회를 주실 때, 주 예수님의 이름을 부르는 모든 이들에게 확장되어야 합니다. 이는 <strong class="text-blue-600">보편교회</strong>의 성격 안에서 한 가족이 된 성도들이 실천해야 할 가족애적 사랑입니다.
                    </li>
                </ol>
            </div>
        </section>

        <section class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4 text-blue-800">적용 질문</h2>
            <ol class="list-decimal list-inside space-y-4 text-lg leading-relaxed">
                <li>왜 신앙 고백자는 '보이는 교회'에 속한 성도로서 거룩한 교제와 친교를 지속할 의무를 집니까? 우리는 교회 생활을 단순히 개인적 예배에만 국한하지 않고, 성도와의 교제를 신자의 본분으로 여기며 실제로 실천하고 있습니까?</li>
                <li>공적 예배가 성도의 교제에 있어서 가장 본질적이고 중요한 이유는 무엇입니까? 우리는 공적 예배를 단순히 하나님과 개인의 교제만이 아니라, 성도들이 함께 모여 하나님을 예배하고 서로의 신앙을 세워가는 자리로 이해하며 성실히 참여하고 있습니까?</li>
                <li>성도는 서로의 덕을 세우기 위해 어떠한 영적 봉사를 감당해야 합니까? 우리는 말씀과 기도로 권면하고, 위로와 격려로 서로의 믿음을 세워가며, 공동체 전체의 신앙 성장을 위해 적극적으로 헌신하고 있습니까?</li>
                <li>성도의 교제가 물질적 도움까지 확장되어야 하는 이유는 무엇입니까? 우리는 자발적으로 사랑 가운데 필요한 자를 실제로 돕고, 하나님께서 기회를 주실 때마다 보편교회의 교제를 넓혀가는 실천을 하고 있습니까?</li>
            </ol>
        </section>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>

    </div>

   <script>
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        let player;
        let progressInterval;
        const playPauseButton = document.getElementById('play-pause-button');
        const progressBar = document.getElementById('progress-bar');
        const errorMessageDiv = document.getElementById('error-message');
        const playerUi = document.getElementById('player-ui');

        function onYouTubeIframeAPIReady() {
            loadVideoForToday();
        }

        async function loadVideoForToday() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) {
                    throw new Error('Audio address file could not be loaded.');
                }
                const data = await response.text();
                const lines = data.split('\n');
                
                const todayKey = '1027';

                // --- 수정된 부분 시작 ---
                // '1021'로 시작하는 줄을 찾습니다 (공백이나 '=' 모두 처리).
                const todayLine = lines.find(line => line.trim().startsWith(todayKey));
                
                if (!todayLine) {
                    throw new Error('not_uploaded');
                }

                // 날짜(키) 부분을 제외하고 나머지(URL)를 추출합니다.
                let url = todayLine.substring(todayKey.length).trim();
                // 맨 앞에 '=' 문자가 있다면 제거합니다.
                if (url.startsWith('=')) {
                    url = url.substring(1).trim();
                }
                // --- 수정된 부분 끝 ---

                const videoId = extractVideoID(url);

                if (!videoId) {
                    // URL은 찾았으나 비디오 ID 추출에 실패한 경우
                    throw new Error('Invalid YouTube URL in dcaddr.txt');
                }
                
                player = new YT.Player('player', {
                    height: '0',
                    width: '0',
                    videoId: videoId,
                    playerVars: {
                        'playsinline': 1
                    },
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

            } catch (error) {
                playerUi.classList.add('hidden');
                errorMessageDiv.classList.remove('hidden');
                if (error.message === 'not_uploaded') {
                    errorMessageDiv.textContent = '오늘의 AI요약 음성은 아직 업로드 전입니다.';
                } else {
                    errorMessageDiv.textContent = '오디오를 불러오는 중 오류가 발생했습니다.';
                    console.error('Error loading video:', error);
                }
            }
        }

        function extractVideoID(url) {
            // 다양한 YouTube URL 형식에서 비디오 ID를 추출하는 정규식
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function onPlayerReady(event) {
            playPauseButton.disabled = false;
            playPauseButton.textContent = '재생';
            playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
            
            playPauseButton.addEventListener('click', togglePlayPause);
        }

        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                playPauseButton.textContent = '일시정지';
                playPauseButton.setAttribute('aria-label', '교리 오디오 일시정지');
                progressInterval = setInterval(updateProgressBar, 1000);
            } else {
                playPauseButton.textContent = '재생';
                playPauseButton.setAttribute('aria-label', '교리 오디오 재생');
                clearInterval(progressInterval);
                if (event.data === YT.PlayerState.ENDED) {
                    progressBar.style.width = '100%';
                }
            }
        }

        function togglePlayPause() {
            if (player.getPlayerState() === YT.PlayerState.PLAYING) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        }

        function updateProgressBar() {
            if (player && player.getDuration) {
                const currentTime = player.getCurrentTime();
                const duration = player.getDuration();
                const progress = (currentTime / duration) * 100;
                progressBar.style.width = progress + '%';
            }
        }
    </script>

</body>
</html>
