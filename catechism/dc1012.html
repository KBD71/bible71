<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 10월 12일 | 혼인의 목적</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f3f4f6;
            color: #374151;
        }
        .infographic-card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .icon-bg {
            background-color: rgba(79, 70, 229, 0.05);
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Hidden YouTube Player Div -->
    <div id="player-container" class="hidden"></div>

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 md:p-8">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-2">혼인의 목적</h1>
            <p class="text-lg text-gray-600">신앙고백서 24.2</p>
            <div class="mt-6 flex justify-center">
                <button id="audio-toggle" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-5 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    <svg id="audio-icon-play" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <svg id="audio-icon-pause" class="w-5 h-5 mr-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <svg id="audio-icon-loading" class="w-5 h-5 mr-2 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span id="audio-text">AI 요약</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="space-y-6">

            <!-- Card 1: Core Doctrine -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6-2.292m0 0A9.043 9.043 0 0112 6.042" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">신앙고백서 24장 2항</h2>
                        <div class="text-gray-700 leading-relaxed space-y-2">
                           <p>"혼인은 남편과 아내가 서로 돕도록 제정되었다. 또 합법한 자녀에 의해 인류가 증가하도록, 거룩한 자손에 의해 교회가 성장하도록, 또한 부정을 방지하도록 제정되었다."</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Card 2: Mutual Help -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.289 2.72a3 3 0 01-4.682-2.72 9.094 9.094 0 013.741-.479m-4.25 1.5A2.625 2.625 0 005.625 18h8.75c.621 0 1.203-.25 1.625-.662m-1.022-.725a3 3 0 00-4.682-2.72 8.982 8.982 0 00-4.25 1.5a2.625 2.625 0 01-2.625-2.625m2.625-2.625a2.625 2.625 0 00-2.625-2.625m0 0a2.625 2.625 0 00-2.625 2.625m2.625 2.625v2.625" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">목적 1: 서로 돕는 배필</h2>
                        <p class="text-gray-700 leading-relaxed">하나님께서는 "사람이 혼자 사는 것이 좋지 아니하니 내가 그를 위하여 돕는 배필을 지으리라"(창 2:18)고 하셨습니다. '돕는 배필'은 일방적 관계가 아닌, 동등한 동반자로서 서로의 부족함을 채워주며 하나님의 언약적 사랑을 반영하는 관계를 의미합니다.</p>
                    </div>
                </div>
            </section>

            <!-- Card 3: Procreation and Church Growth -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 100 15 7.5 7.5 0 000-15zM21 21l-5.197-5.197" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">목적 2 & 3: 인류 증가와 교회 성장</h2>
                        <p class="text-gray-700 leading-relaxed">혼인은 합법적인 관계 안에서 하나님의 형상을 지닌 자녀를 낳아 인류를 번성케 하는 목적을 가집니다(창 1:28). 더 나아가, 부모의 신앙 안에서 "경건한 자손"을 얻어 하나님의 은혜 언약을 이어가고 교회를 성장시키는 사명이 있습니다(말 2:15).</p>
                    </div>
                </div>
            </section>

            <!-- Card 4: Prevention of Immorality -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.602-3.751m-.228-4.014A12.022 12.022 0 0012 2.75a12.022 12.022 0 00-3.198 1.955Z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">목적 4: 부정 방지</h2>
                        <p class="text-gray-700 leading-relaxed">혼인은 부부간의 성적인 친밀감을 통해 음행과 같은 부정한 죄를 방지하는 보호 장치입니다. 성경은 "음행을 피하기 위하여 남자마다 자기 아내를 두고 여자마다 자기 남편을 두라"(고전 7:2)고 가르치며, 이를 통해 영적인 거룩함을 지켜나갈 것을 권면합니다.</p>
                    </div>
                </div>
            </section>
            
            <!-- Card 5: Application Questions -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">적용 질문</h2>
                        <ul class="text-gray-700 leading-relaxed list-disc list-outside space-y-4 pl-5">
                            <li>"돕는 배필"이 창세기 2:18에서 의미하는 바는 무엇이며, 왜 남편과 아내가 동등한 동반자로 이해되어야 합니까? 여러분의 가정생활 속에서 배우자를 단순히 돕는 조수로 여기지 않고, 하나님이 주신 동등한 동반자로서 서로의 부족함을 채우며 함께 살아가고 있습니까?</li>
                            <li>신앙고백서가 "합법한 자녀"를 강조하는 이유는 무엇이며, 이것이 혼인의 목적과 어떤 관련이 있습니까? 여러분은 가정을 세우는 일에서 자녀 출산과 양육을 단순히 많은 수의 번식이 아니라 하나님의 형상을 전하는 사명으로 바라보고 있습니까?</li>
                            <li>말라기 2:15에서 말하는 "경건한 자손"이 혼인의 목적과 어떤 관련을 가지며, 왜 교회의 성장과 연결됩니까? 여러분은 자녀를 양육할 때 단순히 사회의 구성원이 되게 하는 데 그치지 않고, 언약 공동체의 일원으로서 신앙을 이어가도록 가르치고 있습니까?</li>
                            <li>고린도전서 7:2, 9에 따르면 혼인이 부정을 막는 역할을 한다는 것은 어떤 의미입니까? 여러분은 결혼생활에서 성적인 친밀을 하나님 앞에서 거룩함을 지켜가는 수단으로 여기며, 부부 관계를 통해 서로를 보호하고 있습니까?</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 mb-4">
            <p class="text-sm text-gray-500">교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <script>
        const DATE_TODAY = '1012';
        let player;
        let videoId = null;

        // 1. YouTube IFrame Player API 비동기 로드
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 2. API 로드 후 플레이어 생성
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player-container', {
                height: '0',
                width: '0',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 3. 오디오 주소 가져오기
        async function fetchAudioSource() {
            try {
                const response = await fetch('../address/dcadd.txt');
                if (!response.ok) {
                    throw new Error('File not found');
                }
                const data = await response.text();
                const lines = data.split('\n');
                const audioLine = lines.find(line => line.trim().startsWith(DATE_TODAY + ' '));

                if (audioLine) {
                    const url = audioLine.substring(DATE_TODAY.length).trim();
                    const extractedId = extractVideoID(url);
                    if (extractedId) {
                        videoId = extractedId;
                    } else {
                        alert('유효한 YouTube URL이 아닙니다.');
                    }
                } else {
                    alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                }
            } catch (error) {
                console.error('Error fetching audio source:', error);
                alert('오디오 주소 파일(dcadd.txt)을 찾을 수 없습니다.');
            }
        }

        // 4. 정규식을 사용하여 YouTube 비디오 ID 추출
        function extractVideoID(url) {
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            return (match && match[1]) ? match[1] : null;
        }

        // 5. 플레이어 준비 완료 시
        function onPlayerReady(event) {
            if (videoId) {
                document.getElementById('audio-toggle').disabled = false;
            }
        }
        
        // 6. 플레이어 상태 변경 시 UI 업데이트
        function onPlayerStateChange(event) {
            const toggleButton = document.getElementById('audio-toggle');
            const playIcon = document.getElementById('audio-icon-play');
            const pauseIcon = document.getElementById('audio-icon-pause');
            const loadingIcon = document.getElementById('audio-icon-loading');
            const audioText = document.getElementById('audio-text');

            playIcon.classList.add('hidden');
            pauseIcon.classList.add('hidden');
            loadingIcon.classList.add('hidden');

            switch (event.data) {
                case YT.PlayerState.PLAYING:
                    pauseIcon.classList.remove('hidden');
                    audioText.textContent = '일시정지';
                    break;
                case YT.PlayerState.PAUSED:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    break;
                case YT.PlayerState.BUFFERING:
                    loadingIcon.classList.remove('hidden');
                    audioText.textContent = '로딩 중...';
                    break;
                case YT.PlayerState.ENDED:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    player.seekTo(0, true);
                    player.stopVideo(); // End and reset
                    break;
                default:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    break;
            }
        }

        // 7. 버튼 클릭 이벤트
        document.getElementById('audio-toggle').addEventListener('click', () => {
            if (player && typeof player.getPlayerState === 'function' && videoId) {
                // Load video only on first click if it's not loaded
                if (player.getVideoData().video_id !== videoId) {
                    player.loadVideoById(videoId);
                    // The onStateChange event will handle playing the video
                    return; 
                }
                
                const playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING || playerState === YT.PlayerState.BUFFERING) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            }
        });
        
        // 8. 페이지 로드 시 오디오 소스 가져오기
        window.addEventListener('load', async () => {
            await fetchAudioSource();
            // Player will be initialized by onYouTubeIframeAPIReady, 
            // and the button will be enabled in onPlayerReady if videoId is found.
        });
    </script>

</body>
</html>

