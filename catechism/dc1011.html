<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>날마다 읽는 교리 - 10월 11일 | 혼인의 의미</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.9/dist/web/static/pretendard.min.css">
    <style>
        body {
            font-family: 'Pretendard', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f3f4f6;
            color: #374151;
        }
        .infographic-card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        .icon-bg {
            background-color: rgba(79, 70, 229, 0.05);
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Hidden YouTube Player Div -->
    <div id="player-container" class="hidden"></div>

    <div class="container mx-auto max-w-2xl p-4 sm:p-6 md:p-8">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-2">혼인의 의미</h1>
            <p class="text-lg text-gray-600">신앙고백서 24.1</p>
            <div class="mt-6 flex justify-center">
                <button id="audio-toggle" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-5 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    <svg id="audio-icon-play" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <svg id="audio-icon-pause" class="w-5 h-5 mr-2 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <svg id="audio-icon-loading" class="w-5 h-5 mr-2 animate-spin hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span id="audio-text">AI 요약</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="space-y-6">

            <!-- Card 1: Core Doctrine -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6-2.292m0 0A9.043 9.043 0 0112 6.042" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">신앙고백서 24장 1항</h2>
                        <div class="text-gray-700 leading-relaxed space-y-2">
                            <p>"혼인은 한 남자와 한 여자 사이에 이루어져야 한다. 한 남자가 한 명보다 많은 아내를 동시에 두는 것이나, 한 여자가 한 명보다 많은 남편을 동시에 두는 것은 합법하지 않다."</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Card 2: Historical Context -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                             <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6-2.292m0 0A9.043 9.043 0 0112 6.042" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">역사적 배경: 뮌스터 재세례파</h2>
                        <p class="text-gray-700 leading-relaxed">16세기 독일 뮌스터 재세례파 지도자 요한 라이덴은 자신을 '새 다윗'으로 칭하며 다윗과 솔로몬의 일부다처제를 합법적이라 주장했습니다. 신앙고백서는 이러한 주장이 성경적이지 않음을 명확히 하고자 했습니다.</p>
                    </div>
                </div>
            </section>
            
            <!-- Card 3: Creation Ordinance -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">하나님의 창조 규례</h2>
                        <p class="text-gray-700 leading-relaxed">혼인은 사회적 제도를 넘어 하나님께서 제정하신 창조 규례입니다. 창세기 2:24은 "남자가 부모를 떠나 그의 아내와 합하여 둘이 한 몸을 이룰지로다"라고 선언하며 일부일처제를 명확히 하셨고, 예수님께서도 이 말씀을 인용하여 혼인의 원리를 재확인하셨습니다(마 19:4-6).</p>
                    </div>
                </div>
            </section>

             <!-- Card 4: Old Testament Context -->
             <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">구약의 일부다처제에 대한 이해</h2>
                        <p class="text-gray-700 leading-relaxed">구약의 신앙 위인들이 여러 아내를 둔 것은 일부다처제가 합법임을 의미하지 않습니다. 이는 인간의 타락으로 인해 창조 규례에서 벗어난 모습이며, 하나님께서 인간의 부패함 때문에 잠시 허용하신 것에 불과합니다. 이러한 가정들은 항상 갈등과 분열을 겪었으며, 이는 하나님의 뜻이 아님을 보여줍니다.</p>
                    </div>
                </div>
            </section>

            <!-- Card 5: New Testament Restoration -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.092 1.21-.138 2.43-.138 3.662a48.678 48.678 0 000 7.324 4.006 4.006 0 003.7 3.7 48.678 48.678 0 007.324 0 4.006 4.006 0 003.7-3.7c.092-1.21.138-2.43.138-3.662z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">신약의 회복</h2>
                        <p class="text-gray-700 leading-relaxed">신약 시대에 이르러 하나님께서는 본래의 일부일처 혼인으로 회복할 것을 요구하십니다. 에베소서 5장 33절에서 "자기의 아내 사랑하기를 자신 같이 하라"고 말할 때 '아내'는 단수로 표현됩니다. 이는 창조 질서의 회복을 강조하는 것입니다.</p>
                    </div>
                </div>
            </section>

            <!-- Card 6: Application Questions -->
            <section class="infographic-card rounded-2xl shadow-md overflow-hidden">
                <div class="p-6 flex items-start space-x-5">
                    <div class="flex-shrink-0">
                        <div class="icon-bg rounded-lg p-3">
                            <svg class="w-7 h-7 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-900 mb-2">적용 질문</h2>
                        <ul class="text-gray-700 leading-relaxed list-disc list-outside space-y-3 pl-5">
                            <li>결혼을 단순한 사회 제도가 아닌, 하나님께서 제정하신 창조 규례로 인식하고 있습니까? 우리 가정과 결혼 관계 속에서 이 원리를 어떻게 지키고 실천할 수 있겠습니까?</li>
                            <li>존경하는 신앙 인물의 허물을 보고 '신자도 하는 일이니까 괜찮다'고 합리화한 적은 없습니까? 사람의 행위가 아닌 오직 말씀의 기준에 따라 삶을 세워가고 있습니까?</li>
                            <li>가정생활과 결혼생활 속에서 창세기의 창조 질서를 따르며, 그리스도와 교회의 관계를 본받으려 하고 있습니까? 세상의 문화나 가치관이 나의 결혼관을 흔들고 있지는 않습니까?</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 mb-4">
            <p class="text-sm text-gray-500">교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다.</p>
        </footer>
    </div>

    <script>
        const DATE_TODAY = '1011';
        let player;
        let videoId = null;

        // 1. YouTube IFrame Player API 비동기 로드
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 2. API 로드 후 플레이어 생성
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player-container', {
                height: '0',
                width: '0',
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 3. 오디오 주소 가져오기
        async function fetchAudioSource() {
            try {
                const response = await fetch('../address/dcadd.txt');
                if (!response.ok) {
                    throw new Error('File not found');
                }
                const data = await response.text();
                const lines = data.split('\n');
                const audioLine = lines.find(line => line.trim().startsWith(DATE_TODAY + ' '));

                if (audioLine) {
                    const url = audioLine.substring(DATE_TODAY.length).trim();
                    const extractedId = extractVideoID(url);
                    if (extractedId) {
                        videoId = extractedId;
                    } else {
                        alert('유효한 YouTube URL이 아닙니다.');
                    }
                } else {
                    alert('해당 날짜의 오디오 주소를 찾을 수 없습니다.');
                }
            } catch (error) {
                console.error('Error fetching audio source:', error);
                alert('오디오 주소 파일(dcadd.txt)을 찾을 수 없습니다.');
            }
        }

        // 4. 정규식을 사용하여 YouTube 비디오 ID 추출
        function extractVideoID(url) {
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            return (match && match[1]) ? match[1] : null;
        }

        // 5. 플레이어 준비 완료 시
        function onPlayerReady(event) {
            if (videoId) {
                event.target.loadVideoById(videoId);
                document.getElementById('audio-toggle').disabled = false;
            }
        }

        // 6. 플레이어 상태 변경 시 UI 업데이트
        function onPlayerStateChange(event) {
            const toggleButton = document.getElementById('audio-toggle');
            const playIcon = document.getElementById('audio-icon-play');
            const pauseIcon = document.getElementById('audio-icon-pause');
            const loadingIcon = document.getElementById('audio-icon-loading');
            const audioText = document.getElementById('audio-text');

            playIcon.classList.add('hidden');
            pauseIcon.classList.add('hidden');
            loadingIcon.classList.add('hidden');

            switch (event.data) {
                case YT.PlayerState.PLAYING:
                    pauseIcon.classList.remove('hidden');
                    audioText.textContent = '일시정지';
                    break;
                case YT.PlayerState.PAUSED:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    break;
                case YT.PlayerState.BUFFERING:
                    loadingIcon.classList.remove('hidden');
                    audioText.textContent = '로딩 중...';
                    break;
                case YT.PlayerState.ENDED:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    player.seekTo(0);
                    player.stopVideo(); // End and reset
                    break;
                default:
                    playIcon.classList.remove('hidden');
                    audioText.textContent = 'AI 요약';
                    break;
            }
        }

        // 7. 버튼 클릭 이벤트
        document.getElementById('audio-toggle').addEventListener('click', () => {
            if (player && typeof player.getPlayerState === 'function') {
                const playerState = player.getPlayerState();
                if (playerState === YT.PlayerState.PLAYING) {
                    player.pauseVideo();
                } else {
                    player.playVideo();
                }
            }
        });

        // 8. 페이지 로드 시 오디오 소스 가져오기
        window.addEventListener('load', async () => {
            await fetchAudioSource();
            // If player is already ready, it will call onPlayerReady.
            // If not, onYouTubeIframeAPIReady will be called later, which will then call onPlayerReady.
        });
    </script>

</body>
</html>
