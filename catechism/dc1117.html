<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11월 17일 교리 묵상</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        body { font-family: 'Pretendard', sans-serif; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen py-8 px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl mx-auto space-y-8">
        <!-- Header -->
        <header class="text-center space-y-2">
            <h1 class="text-3xl font-bold text-gray-900">11월 17일</h1>
            <h2 class="text-xl font-semibold text-gray-700">111/ 17일</h2>
        </header>

        <!-- Audio Player -->
        <div class="bg-white rounded-2xl shadow-lg p-6 space-y-4">
            <h3 class="text-lg font-bold text-gray-900">AI요약 듣기</h3>
            <div id="player-container" class="w-full">
                <div id="youtube-player"></div>
            </div>
            <div id="player-status" class="hidden text-center text-gray-500 py-4"></div>
            <button id="play-btn" disabled class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-4 rounded-xl transition-colors flex items-center justify-center gap-2" aria-label="교리 오디오 재생/일시정지">
                <span id="btn-text">로딩 중...</span>
            </button>
        </div>

        <!-- Catechism Section -->
        <div class="bg-white rounded-2xl shadow-lg p-6 space-y-4">
            <h3 class="text-lg font-bold text-indigo-900 border-b-2 border-indigo-100 pb-2">소요리문답 94</h3>
            <div class="prose prose-indigo max-w-none text-gray-800 bg-indigo-50 p-4 rounded-lg">
                <p class="leading-relaxed">: 세례의의미 소요리문답 94 대요리문답 165 94. 세례란무엇입니까? 답. 세례는 성례의 하나인데, 세례에서 성부와 성자 와 성령의 이름으로 물로 씻는 것은1) 우리가 그리스도 에게 접붙임 받고, 은혜언약의 유익에 참여하며, 우리가 주님의 것이라는 서약을 표하고 인치는 것입니다.2) 1) 마 28:19. 2) 롬 6:4; 갈 3:27. l46 대요리문답 165: ‘</p>
            </div>
        </div>

        <!-- Exposition Section -->
        <div class="bg-white rounded-2xl shadow-lg p-6 space-y-4">
            <h3 class="text-lg font-bold text-gray-900 border-b-2 border-gray-100 pb-2">교리 해설</h3>
            <div class="prose prose-blue max-w-none">
                
            </div>
        </div>

        <!-- Application Questions -->
        <div class="bg-white rounded-2xl shadow-lg p-6 space-y-4">
            <h3 class="text-lg font-bold text-gray-900 border-b-2 border-gray-100 pb-2">적용 질문</h3>
            <div class="prose prose-green max-w-none bg-green-50 p-4 rounded-lg">
                <ol class="list-decimal list-inside space-y-3 text-gray-700 leading-relaxed">
<li class="mb-2">세례가 그리스도께 접붙임을 받는 표와 인이라고 할 때, 세례를 받을 
때 우리는 그리스도와 어떠한 관계로 들어갑니까? 세례는 이러한 관계에 
근거하여 무엇을 가리키는 표입니까? 여러분은 세례를 통해 그리스도의 죽 
음과 부활에 연합하여 새로운 생명으로 살아가도록 부름받았음을 기억하 
며, 그 부르심에 합당한 삶을 살고 있습니까? 여러분의 신앙생활 속에서 세 
례의 표지가 단순한 과거의 의식이 아니라, 날마다 그리스도와 함께 사는 
11 월. 28장. 세례 151 
현재의 은혜로 작용하고 있습니까?</li>
<li class="mb-2">세례는 그리스도와의 연합에 대한 표징이며 인장입니다. 그리고 그리 
스도와의 연합에서 비롯되는 많은 유익들의 표징이면서 또한 인장입니다. 
이 유익들은 무엇입니까? 여러분은 세례를 통해 주어진 이 구속의 유익들 
올 단순히 관념으로만 두지 않고, 성령의 역사 속에서 실제로 누리며 감사 
하고 있습니까? 세례의 표징이 가리키는 이 은혜의 현실올 믿음으로 붙들 
며, 그리스도 안에서 이미 주어진 죄 사함과 새 생명의 확신을 삶 속에서 
나타내고있습니까?</li>
<li class="mb-2">세례는 단지 개인적인 신앙 경험만이 아닙니다. 세례는 기본적으로 개 
인주의적이지 않습니다. 세례는 교회 공동체와 주님 사이의 어떠한 특별한 
관계를 선언합니까? 이러한 세례의 의미는 오늘 우리의 교회 생활과 어떤 
관계가 있을까요? 여러분은 세례를 통해 교회의 지체로 부름받았음을 기억 
하며, 신앙 공동체 안에서 예배와 순종, 봉사와 헌신의 책임을 기쁨으로 감 
당하고 있습니까? 또한 여러분은 자신이 세례로 서약한 바와 같이, 세상의 
가치와 욕망이 아니라 오직 주님께 속한 자로서 살아가고 있습니까?</li>
</ol>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm py-4">
            <p>교재는 날마다 양식으로 읽는 웨스트민스터 표준교리(영음사)를 사용합니다</p>
        </footer>
    </div>

    <script>
        // Audio Player Logic
        const dateStr = "1117";
        let player;
        let isReady = false;
        let videoId = null;

        async function initAudio() {
            try {
                const response = await fetch('../address/dcaddr.txt');
                if (!response.ok) throw new Error('Address file not found');
                const text = await response.text();
                
                // Parse file for today's video ID
                const lines = text.split('\n');
                const todayLine = lines.find(line => line.startsWith(dateStr));
                
                if (!todayLine) {
                    showError("오늘의 AI요약 음성은 아직 업로드 전입니다.");
                    return;
                }

                // Extract Video ID (regex for youtube URLs)
                const urlMatch = todayLine.match(/(?:v=|\/)([a-zA-Z0-9_-]{11})/);
                if (urlMatch && urlMatch[1]) {
                    videoId = urlMatch[1];
                    loadYoutubeAPI();
                } else {
                    showError("오디오 주소를 찾을 수 없습니다.");
                }
            } catch (e) {
                showError("오디오 정보를 불러오는 중 오류가 발생했습니다.");
                console.error(e);
            }
        }

        function showError(msg) {
            const status = document.getElementById('player-status');
            const btn = document.getElementById('play-btn');
            status.textContent = msg;
            status.classList.remove('hidden');
            btn.classList.add('hidden');
        }

        function loadYoutubeAPI() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0',
                width: '0',
                videoId: videoId,
                playerVars: {
                    'playsinline': 1,
                    'controls': 0
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            isReady = true;
            const btn = document.getElementById('play-btn');
            btn.disabled = false;
            document.getElementById('btn-text').textContent = '재생';
        }

        function onPlayerStateChange(event) {
            const btnText = document.getElementById('btn-text');
            if (event.data === YT.PlayerState.PLAYING) {
                btnText.textContent = '일시정지';
            } else {
                btnText.textContent = '재생';
            }
        }

        document.getElementById('play-btn').addEventListener('click', () => {
            if (!isReady) return;
            const state = player.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                player.pauseVideo();
            } else {
                player.playVideo();
            }
        });

        // Start initialization
        initAudio();
    </script>
</body>
</html>